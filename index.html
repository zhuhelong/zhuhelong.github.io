<!DOCTYPE html>





<html class="theme-next mist use-motion" lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="generator" content="Hexo 3.9.0">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=7.3.0">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon.ico?v=7.3.0">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-x16.ico?v=7.3.0">
  <link rel="mask-icon" href="/images/logo.svg?v=7.3.0" color="#222">

<link rel="stylesheet" href="/css/main.css?v=7.3.0">


<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css?v=4.7.0">


<script id="hexo-configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    version: '7.3.0',
    exturl: false,
    sidebar: {"position":"left","display":"post","offset":12,"onmobile":false},
    back2top: {"enable":true,"sidebar":false,"scrollpercent":false},
    save_scroll: false,
    copycode: {"enable":false,"show_result":false,"style":null},
    fancybox: false,
    mediumzoom: false,
    lazyload: false,
    pangu: false,
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    },
    localsearch: {"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},
    path: '',
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    translation: {
      copy_button: '复制',
      copy_success: '复制成功',
      copy_failure: '复制失败'
    }
  };
</script>

  <meta name="description" content="我的博客">
<meta name="keywords" content="ZHL">
<meta property="og:type" content="website">
<meta property="og:title" content="ZHL的博客">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="ZHL的博客">
<meta property="og:description" content="我的博客">
<meta property="og:locale" content="zh-CN">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="ZHL的博客">
<meta name="twitter:description" content="我的博客">
  <link rel="canonical" href="http://yoursite.com/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome: true,
    isPost: false,
    isPage: false,
    isArchive: false
  };
</script>

  <title>ZHL的博客</title>
  


  <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?9fd3e2a7c57b3971f3439f9713354241";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>






  <noscript>
  <style>
  .use-motion .motion-element,
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-title { opacity: initial; }

  .use-motion .logo,
  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">

  <div class="container sidebar-position-left">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta">

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">ZHL的博客</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
        <p class="site-subtitle">love-wh</p>
      
  </div>

  <div class="site-nav-toggle">
    <button aria-label="切换导航栏">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>


<nav class="site-nav">
  
  <ul id="menu" class="menu">
      
      
      
        
        <li class="menu-item menu-item-home">
      
    

    <a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i> <br>首页</a>

  </li>
      
      
      
        
        <li class="menu-item menu-item-about">
      
    

    <a href="/about/" rel="section"><i class="menu-item-icon fa fa-fw fa-user"></i> <br>关于</a>

  </li>
      
      
      
        
        <li class="menu-item menu-item-tags">
      
    

    <a href="/tags/" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i> <br>标签</a>

  </li>
      
      
      
        
        <li class="menu-item menu-item-categories">
      
    

    <a href="/categories/" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i> <br>分类</a>

  </li>
      
      
      
        
        <li class="menu-item menu-item-archives">
      
    

    <a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i> <br>归档</a>

  </li>
  </ul>

    

</nav>
</div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content page-home">
            
  <section id="posts" class="posts-expand">
      

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/02/19/Win10-Office-激活/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="ZHL">
      <meta itemprop="description" content="我的博客">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ZHL的博客">
    </span>
      <header class="post-header">

        
          <h1 class="post-title" itemprop="name headline">
              
              <a href="/2020/02/19/Win10-Office-激活/" class="post-title-link" itemprop="url">Win10 & Office 激活</a>
            
          </h1>
        

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              
                
              

              <time title="创建时间：2020-02-19 21:43:29 / 修改时间：21:44:30" itemprop="dateCreated datePublished" datetime="2020-02-19T21:43:29+08:00">2020-02-19</time>
            </span>
          
            

            
          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/激活/" itemprop="url" rel="index"><span itemprop="name">激活</span></a></span>

                
                
              
            </span>
          

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          
            <h1 id="手动-KMS-激活-Win-10"><a href="#手动-KMS-激活-Win-10" class="headerlink" title="手动 KMS 激活 Win 10"></a>手动 KMS 激活 Win 10</h1><p><strong>步骤:</strong></p>
<ol>
<li><p>使用<strong>管理员权限</strong>打开 <code>cmd</code></p>
</li>
<li><p>卸载当前电脑的密钥</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">slmgr.vbs /upk</span><br></pre></td></tr></table></figure>
</li>
<li><p>安装密钥</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">slmgr /ipk W269N-WFGWX-YVC9B-4J6C9-T83GX</span><br></pre></td></tr></table></figure>
</li>
<li><p>设置 <code>kms</code> 服务器地址</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">slmgr /skms zh.us.to</span><br></pre></td></tr></table></figure>
</li>
<li><p>连接到 <code>kms</code> 服务器进行 <code>windows</code> 激活</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">slmgr /ato</span><br></pre></td></tr></table></figure>

</li>
</ol>
<p><strong>备注：</strong></p>
<ol>
<li>如密钥是该密钥，可只输入后两行命令</li>
</ol>
<h1 id="手动-Office-激活（尝试未激活）"><a href="#手动-Office-激活（尝试未激活）" class="headerlink" title="手动 Office 激活（尝试未激活）"></a>手动 Office 激活（尝试未激活）</h1><p><strong>步骤:</strong></p>
<ol>
<li><p>使用<strong>管理员权限</strong>打开 <code>cmd</code>。</p>
</li>
<li><p>进入到 Office 目录。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd &apos;C:\Program Files (x86)\Microsoft Office\Office16&apos;</span><br></pre></td></tr></table></figure>
</li>
<li><p>安装 KMS 秘钥</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cscript ospp.vbs /inpkey:NMMKJ-6RK4F-KMJVX-8D9MJ-6MWKP</span><br></pre></td></tr></table></figure>
</li>
<li><p>设置 KMS 服务器</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cscript ospp.vbs /sethst:kms9.MSGuides.com</span><br></pre></td></tr></table></figure>
</li>
<li><p>激活</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cscript ospp.vbs /act</span><br></pre></td></tr></table></figure>
</li>
<li><p>查看激活状态</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cscript ospp.vbs /dstatus</span><br></pre></td></tr></table></figure>

</li>
</ol>
<p><strong>备注：</strong></p>
<ol>
<li>截止到 2019年1月2日，有效的 <code>kms</code> 服务器地址（能 <code>ping</code> 通便是有效的）：</li>
</ol>
<table>
<thead>
<tr>
<th>地址</th>
<th>有效性</th>
</tr>
</thead>
<tbody><tr>
<td>zh.us.to</td>
<td>有效</td>
</tr>
<tr>
<td>kms.chinancce.com</td>
<td>有效</td>
</tr>
<tr>
<td>kms.shuax.com</td>
<td>有效（延迟较高）</td>
</tr>
<tr>
<td>kms.dwhd.org</td>
<td>有效</td>
</tr>
<tr>
<td>kms.luody.info</td>
<td>有效</td>
</tr>
<tr>
<td>kms.digiboy.ir</td>
<td>有效</td>
</tr>
<tr>
<td><a href="http://www.zgbs.cc" target="_blank" rel="noopener">www.zgbs.cc</a></td>
<td>有效</td>
</tr>
<tr>
<td>cy2617.jios.org</td>
<td>有效</td>
</tr>
<tr>
<td>kms.luody.info</td>
<td>有效</td>
</tr>
<tr>
<td>kms7.MSGuides.com</td>
<td>有效</td>
</tr>
<tr>
<td>kms8.MSGuides.com</td>
<td>有效</td>
</tr>
<tr>
<td>kms9.MSGuides.com</td>
<td>有效</td>
</tr>
<tr>
<td>cy2617.jios.org</td>
<td>有效</td>
</tr>
<tr>
<td>kms.shuax.com</td>
<td>有效</td>
</tr>
<tr>
<td>122.226.152.230</td>
<td>有效</td>
</tr>
<tr>
<td>kms.vtrois.com</td>
<td>有效</td>
</tr>
<tr>
<td>kms.digiboy.ir</td>
<td>有效</td>
</tr>
<tr>
<td>kms.library.hk</td>
<td>有效</td>
</tr>
<tr>
<td>kms.bluskai.com</td>
<td>有效</td>
</tr>
</tbody></table>
<ol start="2">
<li>截止到 2019年1月2日，有效的 <code>Office 2019</code> 的 <code>key</code> 有：</li>
</ol>
<table>
<thead>
<tr>
<th>地址</th>
<th>有效性</th>
</tr>
</thead>
<tbody><tr>
<td>W8W6K-3N7KK-PXB9H-8TD8W-BWTH9</td>
<td>有效</td>
</tr>
</tbody></table>
<h1 id="Batch-激活-Office"><a href="#Batch-激活-Office" class="headerlink" title="Batch 激活 Office"></a>Batch 激活 Office</h1><figure class="highlight bat"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">@<span class="built_in">echo</span> off</span><br><span class="line">(<span class="built_in">cd</span> /d "%~dp0")&amp;&amp;(<span class="built_in">NET</span> FILE||(powershell <span class="built_in">start</span>-process -FilePath '%<span class="number">0</span>' -verb runas)&amp;&amp;(<span class="keyword">exit</span> /B)) &gt;<span class="built_in">NUL</span> <span class="number">2</span>&gt;&amp;<span class="number">1</span></span><br><span class="line"><span class="built_in">title</span> Office <span class="number">2019</span> Activator r/Piracy</span><br><span class="line"><span class="built_in">echo</span> Converting... &amp; <span class="built_in">mode</span> <span class="number">40</span>,<span class="number">25</span></span><br><span class="line">(<span class="keyword">if</span> <span class="keyword">exist</span> "<span class="variable">%ProgramFiles%</span>\Microsoft Office\Office16\ospp.vbs" <span class="built_in">cd</span> /d "<span class="variable">%ProgramFiles%</span>\Microsoft Office\Office16")&amp;(<span class="keyword">if</span> <span class="keyword">exist</span> "<span class="variable">%ProgramFiles(x86)%</span>\Microsoft Office\Office16\ospp.vbs" <span class="built_in">cd</span> /d "<span class="variable">%ProgramFiles(x86)%</span>\Microsoft Office\Office16")&amp;(<span class="keyword">for</span> /f <span class="variable">%%x</span> <span class="keyword">in</span> ('<span class="built_in">dir</span> /b ..\root\Licenses16\ProPlus2019VL*.xrm-ms') <span class="keyword">do</span> cscript ospp.vbs /inslic:"..\root\Licenses16\<span class="variable">%%x</span>" &gt;<span class="built_in">nul</span>)&amp;(<span class="keyword">for</span> /f <span class="variable">%%x</span> <span class="keyword">in</span> ('<span class="built_in">dir</span> /b ..\root\Licenses16\ProPlus2019VL*.xrm-ms') <span class="keyword">do</span> cscript ospp.vbs /inslic:"..\root\Licenses16\<span class="variable">%%x</span>" &gt;<span class="built_in">nul</span>)</span><br><span class="line">cscript //nologo ospp.vbs /unpkey:<span class="number">6</span>MWKP &gt;<span class="built_in">nul</span>&amp;cscript //nologo ospp.vbs /inpkey:NMMKJ-<span class="number">6</span>RK4F-KMJVX-<span class="number">8</span>D9MJ-<span class="number">6</span>MWKP &gt;<span class="built_in">nul</span>&amp;<span class="built_in">set</span> i=<span class="number">1</span></span><br><span class="line">:server</span><br><span class="line"><span class="keyword">if</span> <span class="variable">%i%</span>==<span class="number">1</span> <span class="built_in">set</span> KMS_Sev=kms7.MSGuides.com</span><br><span class="line"><span class="keyword">if</span> <span class="variable">%i%</span>==<span class="number">2</span> <span class="built_in">set</span> KMS_Sev=kms8.MSGuides.com</span><br><span class="line"><span class="keyword">if</span> <span class="variable">%i%</span>==<span class="number">3</span> <span class="built_in">set</span> KMS_Sev=kms9.MSGuides.com</span><br><span class="line">cscript //nologo ospp.vbs /sethst:<span class="variable">%KMS_Sev%</span> &gt;<span class="built_in">nul</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">%KMS_Sev%</span> &amp; <span class="built_in">echo</span> Activating...</span><br><span class="line">cscript //nologo ospp.vbs /act | <span class="built_in">find</span> /i "successful" &amp;&amp; (<span class="built_in">echo</span> Complete) || (<span class="built_in">echo</span> Trying another KMS Server &amp; <span class="built_in">set</span> /a i+=<span class="number">1</span> &amp; <span class="keyword">goto</span> server)</span><br><span class="line"><span class="built_in">pause</span> &gt;<span class="built_in">nul</span></span><br><span class="line"><span class="keyword">exit</span></span><br></pre></td></tr></table></figure>

<h1 id="Office-2019激活"><a href="#Office-2019激活" class="headerlink" title="Office 2019激活"></a>Office 2019激活</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">@echo off</span><br><span class="line">title Activate Microsoft Office 2019 ALL versions for FREE!&amp;cls&amp;echo ============================================================================&amp;echo #Project: Activating Microsoft software products for FREE without software&amp;echo ============================================================================&amp;echo.&amp;echo #Supported products:&amp;echo - Microsoft Office Standard 2019&amp;echo - Microsoft Office Professional Plus 2019&amp;echo.&amp;echo.&amp;(if exist &quot;%ProgramFiles%\Microsoft Office\Office16\ospp.vbs&quot; cd /d &quot;%ProgramFiles%\Microsoft Office\Office16&quot;)&amp;(if exist &quot;%ProgramFiles(x86)%\Microsoft Office\Office16\ospp.vbs&quot; cd /d &quot;%ProgramFiles(x86)%\Microsoft Office\Office16&quot;)&amp;(for /f %%x in (&apos;dir /b ..\root\Licenses16\ProPlus2019VL*.xrm-ms&apos;) do cscript ospp.vbs /inslic:&quot;..\root\Licenses16\%%x&quot; &gt;nul)&amp;(for /f %%x in (&apos;dir /b ..\root\Licenses16\ProPlus2019VL*.xrm-ms&apos;) do cscript ospp.vbs /inslic:&quot;..\root\Licenses16\%%x&quot; &gt;nul)&amp;echo.&amp;echo ============================================================================&amp;echo Activating your Office...&amp;cscript //nologo ospp.vbs /unpkey:6MWKP &gt;nul&amp;cscript //nologo ospp.vbs /inpkey:NMMKJ-6RK4F-KMJVX-8D9MJ-6MWKP &gt;nul&amp;set i=1</span><br><span class="line">:server</span><br><span class="line">if %i%==1 set KMS_Sev=kms8.MSGuides.com</span><br><span class="line">if %i%==2 set KMS_Sev=kms9.MSGuides.com</span><br><span class="line">if %i%==3 set KMS_Sev=kms7.MSGuides.com</span><br><span class="line">if %i%==4 goto notsupported</span><br><span class="line">cscript //nologo ospp.vbs /sethst:%KMS_Sev% &gt;nul&amp;echo ============================================================================&amp;echo.&amp;echo.</span><br><span class="line">cscript //nologo ospp.vbs /act | find /i &quot;successful&quot; &amp;&amp; (echo.&amp;echo ============================================================================&amp;echo.&amp;echo #My official blog: MSGuides.com&amp;echo.&amp;echo #How it works: bit.ly/kms-server&amp;echo.&amp;echo #Please feel free to contact me at msguides.com@gmail.com if you have any questions or concerns.&amp;echo.&amp;echo #Please consider supporting this project: donate.msguides.com&amp;echo #Your support is helping me keep my servers running everyday!&amp;echo.&amp;echo ============================================================================&amp;choice /n /c YN /m &quot;Would you like to visit my blog [Y,N]?&quot; &amp; if errorlevel 2 exit) || (echo The connection to my KMS server failed! Trying to connect to another one... &amp; echo Please wait... &amp; echo. &amp; echo. &amp; set /a i+=1 &amp; goto server)</span><br><span class="line">explorer &quot;http://MSGuides.com&quot;&amp;goto halt</span><br><span class="line">:notsupported</span><br><span class="line">echo.&amp;echo ============================================================================&amp;echo Sorry! Your version is not supported.&amp;echo Please try installing the latest version here: bit.ly/aiomsp</span><br><span class="line">:halt</span><br><span class="line">pause &gt;nul</span><br></pre></td></tr></table></figure>

<h1 id="Visio-2019激活"><a href="#Visio-2019激活" class="headerlink" title="Visio 2019激活"></a>Visio 2019激活</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">@echo off</span><br><span class="line">title Activate Microsoft Visio 2019 ALL versions for FREE!&amp;cls&amp;echo ============================================================================&amp;echo #Visio: Activating Microsoft software products for FREE without software&amp;echo ============================================================================&amp;echo.&amp;echo #Supported products:&amp;echo - Microsoft Visio Standard 2019&amp;echo - Microsoft Visio Professional Plus 2019&amp;echo.&amp;echo.&amp;(if exist &quot;%ProgramFiles%\Microsoft Office\Office16\ospp.vbs&quot; cd /d &quot;%ProgramFiles%\Microsoft Office\Office16&quot;)&amp;(if exist &quot;%ProgramFiles(x86)%\Microsoft Office\Office16\ospp.vbs&quot; cd /d &quot;%ProgramFiles(x86)%\Microsoft Office\Office16&quot;)&amp;cscript //nologo ospp.vbs /inslic:&quot;..\root\Licenses16\pkeyconfig-office.xrm-ms&quot; &gt;nul&amp;(for /f %%x in (&apos;dir /b ..\root\Licenses16\client-issuance*.xrm-ms&apos;) do cscript ospp.vbs /inslic:&quot;..\root\Licenses16\%%x&quot; &gt;nul)&amp;(for /f %%x in (&apos;dir /b ..\root\Licenses16\visioprovl_kms*.xrm-ms&apos;) do cscript ospp.vbs /inslic:&quot;..\root\Licenses16\%%x&quot; &gt;nul)&amp;(for /f %%x in (&apos;dir /b ..\root\Licenses16\visiopro2019vl_kms*.xrm-ms&apos;) do cscript ospp.vbs /inslic:&quot;..\root\Licenses16\%%x&quot; &gt;nul)&amp;echo.&amp;echo ============================================================================&amp;echo Activating your Visio...&amp;cscript //nologo slmgr.vbs /ckms &gt;nul&amp;cscript //nologo ospp.vbs /setprt:1688 &gt;nul&amp;cscript //nologo ospp.vbs /unpkey:7VCBB &gt;nul&amp;cscript //nologo ospp.vbs /inpkey:9BGNQ-K37YR-RQHF2-38RQ3-7VCBB &gt;nul&amp;set i=1</span><br><span class="line">:server</span><br><span class="line">if %i%==1 set KMS_Sev=kms8.MSGuides.com</span><br><span class="line">if %i%==2 set KMS_Sev=kms9.MSGuides.com</span><br><span class="line">if %i%==3 set KMS_Sev=kms7.MSGuides.com</span><br><span class="line">if %i%==4 goto notsupported</span><br><span class="line">cscript //nologo ospp.vbs /sethst:%KMS_Sev% &gt;nul&amp;echo ============================================================================&amp;echo.&amp;echo.</span><br><span class="line">cscript //nologo ospp.vbs /act | find /i &quot;successful&quot; &amp;&amp; (echo.&amp;echo ============================================================================&amp;echo.&amp;echo #My official blog: MSGuides.com&amp;echo.&amp;echo #How it works: bit.ly/kms-server&amp;echo.&amp;echo #Please feel free to contact me at msguides.com@gmail.com if you have any questions or concerns.&amp;echo.&amp;echo #Please consider supporting this project: donate.msguides.com&amp;echo #Your support is helping me keep my servers running everyday!&amp;echo.&amp;echo ============================================================================&amp;choice /n /c YN /m &quot;Would you like to visit my blog [Y,N]?&quot; &amp; if errorlevel 2 exit) || (echo The connection to my KMS server failed! Trying to connect to another one... &amp; echo Please wait... &amp; echo. &amp; echo. &amp; set /a i+=1 &amp; goto server)</span><br><span class="line">explorer &quot;http://MSGuides.com&quot;&amp;goto halt</span><br><span class="line">:notsupported</span><br><span class="line">echo.&amp;echo ============================================================================&amp;echo Sorry! Your version is not supported.&amp;echo Please try installing the latest version here: bit.ly/odt2k16</span><br><span class="line">:halt</span><br><span class="line">pause &gt;nul</span><br></pre></td></tr></table></figure>

<h1 id="Project-2019激活"><a href="#Project-2019激活" class="headerlink" title="Project 2019激活"></a>Project 2019激活</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">@echo off</span><br><span class="line">title Activate Microsoft Project 2019 ALL versions for FREE!&amp;cls&amp;echo ============================================================================&amp;echo #Project: Activating Microsoft software products for FREE without software&amp;echo ============================================================================&amp;echo.&amp;echo #Supported products:&amp;echo - Microsoft Project Standard 2019&amp;echo - Microsoft Project Professional Plus 2019&amp;echo.&amp;echo.&amp;(if exist &quot;%ProgramFiles%\Microsoft Office\Office16\ospp.vbs&quot; cd /d &quot;%ProgramFiles%\Microsoft Office\Office16&quot;)&amp;(if exist &quot;%ProgramFiles(x86)%\Microsoft Office\Office16\ospp.vbs&quot; cd /d &quot;%ProgramFiles(x86)%\Microsoft Office\Office16&quot;)&amp;cscript //nologo ospp.vbs /inslic:&quot;..\root\Licenses16\pkeyconfig-office.xrm-ms&quot; &gt;nul&amp;(for /f %%x in (&apos;dir /b ..\root\Licenses16\client-issuance*.xrm-ms&apos;) do cscript ospp.vbs /inslic:&quot;..\root\Licenses16\%%x&quot; &gt;nul)&amp;(for /f %%x in (&apos;dir /b ..\root\Licenses16\projectprovl_kms*.xrm-ms&apos;) do cscript ospp.vbs /inslic:&quot;..\root\Licenses16\%%x&quot; &gt;nul)&amp;(for /f %%x in (&apos;dir /b ..\root\Licenses16\projectpro2019vl_kms*.xrm-ms&apos;) do cscript ospp.vbs /inslic:&quot;..\root\Licenses16\%%x&quot; &gt;nul)&amp;echo.&amp;echo ============================================================================&amp;echo Activating your Project...&amp;cscript //nologo slmgr.vbs /ckms &gt;nul&amp;cscript //nologo ospp.vbs /setprt:1688 &gt;nul&amp;cscript //nologo ospp.vbs /unpkey:PKD2B &gt;nul&amp;cscript //nologo ospp.vbs /inpkey:B4NPR-3FKK7-T2MBV-FRQ4W-PKD2B &gt;nul&amp;set i=1</span><br><span class="line">:server</span><br><span class="line">if %i%==1 set KMS_Sev=kms8.MSGuides.com</span><br><span class="line">if %i%==2 set KMS_Sev=kms9.MSGuides.com</span><br><span class="line">if %i%==3 set KMS_Sev=kms7.MSGuides.com</span><br><span class="line">if %i%==4 goto notsupported</span><br><span class="line">cscript //nologo ospp.vbs /sethst:%KMS_Sev% &gt;nul&amp;echo ============================================================================&amp;echo.&amp;echo.</span><br><span class="line">cscript //nologo ospp.vbs /act | find /i &quot;successful&quot; &amp;&amp; (echo.&amp;echo ============================================================================&amp;echo.&amp;echo #My official blog: MSGuides.com&amp;echo.&amp;echo #How it works: bit.ly/kms-server&amp;echo.&amp;echo #Please feel free to contact me at msguides.com@gmail.com if you have any questions or concerns.&amp;echo.&amp;echo #Please consider supporting this project: donate.msguides.com&amp;echo #Your support is helping me keep my servers running everyday!&amp;echo.&amp;echo ============================================================================&amp;choice /n /c YN /m &quot;Would you like to visit my blog [Y,N]?&quot; &amp; if errorlevel 2 exit) || (echo The connection to my KMS server failed! Trying to connect to another one... &amp; echo Please wait... &amp; echo. &amp; echo. &amp; set /a i+=1 &amp; goto server)</span><br><span class="line">explorer &quot;http://MSGuides.com&quot;&amp;goto halt</span><br><span class="line">:notsupported</span><br><span class="line">echo.&amp;echo ============================================================================&amp;echo Sorry! Your version is not supported.&amp;echo Please try installing the latest version here: bit.ly/odt2k16</span><br><span class="line">:halt</span><br><span class="line">pause &gt;nul</span><br></pre></td></tr></table></figure>


          
        
      
    </div>

    
    
    
      <footer class="post-footer">
          <div class="post-eof"></div>
        
      </footer>
  </div>
  
  
  
  </article>

    
      

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/02/19/Qt-TLS-SSL-HTTPS-错误/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="ZHL">
      <meta itemprop="description" content="我的博客">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ZHL的博客">
    </span>
      <header class="post-header">

        
          <h1 class="post-title" itemprop="name headline">
              
              <a href="/2020/02/19/Qt-TLS-SSL-HTTPS-错误/" class="post-title-link" itemprop="url">Qt TLS SSL HTTPS 错误</a>
            
          </h1>
        

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              
                
              

              <time title="创建时间：2020-02-19 13:29:42 / 修改时间：21:42:51" itemprop="dateCreated datePublished" datetime="2020-02-19T13:29:42+08:00">2020-02-19</time>
            </span>
          
            

            
          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Qt/" itemprop="url" rel="index"><span itemprop="name">Qt</span></a></span>

                
                
              
            </span>
          

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          
            <h1 id="现象"><a href="#现象" class="headerlink" title="现象"></a>现象</h1>
          
        
      
    </div>

    
    
    
      <footer class="post-footer">
          <div class="post-eof"></div>
        
      </footer>
  </div>
  
  
  
  </article>

    
      

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/02/15/Qt-代码格式化，使用-Artistic-Style/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="ZHL">
      <meta itemprop="description" content="我的博客">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ZHL的博客">
    </span>
      <header class="post-header">

        
          <h1 class="post-title" itemprop="name headline">
              
              <a href="/2020/02/15/Qt-代码格式化，使用-Artistic-Style/" class="post-title-link" itemprop="url">Qt 代码格式化，使用 Artistic Style</a>
            
          </h1>
        

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              
                
              

              <time title="创建时间：2020-02-15 12:32:02 / 修改时间：12:42:54" itemprop="dateCreated datePublished" datetime="2020-02-15T12:32:02+08:00">2020-02-15</time>
            </span>
          
            

            
          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Artistic-Style/" itemprop="url" rel="index"><span itemprop="name">Artistic Style</span></a></span>

                
                
              
            </span>
          

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          
            <h1 id="Qt-打开插件"><a href="#Qt-打开插件" class="headerlink" title="Qt 打开插件"></a>Qt 打开插件</h1><p>菜单栏 –&gt; 帮助 –&gt; 关于插件</p>
<p><img src="/2020/02/15/Qt-代码格式化，使用-Artistic-Style/打开插件.png" alt="打开插件"></p>
<h1 id="下载-Artistic-Style"><a href="#下载-Artistic-Style" class="headerlink" title="下载 Artistic Style"></a>下载 Artistic Style</h1><p><a href="http://astyle.sourceforge.net/" target="_blank" rel="noopener">官网（可能要翻墙）</a></p>
<p>安装比较简单，随意解压后放置一个目录。</p>
<h1 id="Qt-配置-Artistic-Style"><a href="#Qt-配置-Artistic-Style" class="headerlink" title="Qt 配置 Artistic Style"></a>Qt 配置 Artistic Style</h1><p>菜单栏 –&gt; 工具 –&gt; 选项</p>
<ol>
<li>启用代码格式化</li>
</ol>
<p><img src="/2020/02/15/Qt-代码格式化，使用-Artistic-Style/Qt配置ArtisticStyle.png" alt="Qt配置ArtisticStyle"></p>
<ol start="2">
<li>配置 Artistic Style</li>
</ol>
<p><img src="/2020/02/15/Qt-代码格式化，使用-Artistic-Style/配置ArtisticStyle.png" alt="配置ArtisticStyle"></p>
<h1 id="Artistic-Style-配置文件"><a href="#Artistic-Style-配置文件" class="headerlink" title="Artistic Style 配置文件"></a>Artistic Style 配置文件</h1><p>在 Qt 里有 4 种配置 Artistic Style 的方式，配置文件的方式更加方便。</p>
<p>我喜欢的风格配置：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"># 基本风格</span><br><span class="line">style=java</span><br><span class="line">#style=attach</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 制表符选项</span><br><span class="line">indent=spaces=4</span><br></pre></td></tr></table></figure>


          
        
      
    </div>

    
    
    
      <footer class="post-footer">
          <div class="post-eof"></div>
        
      </footer>
  </div>
  
  
  
  </article>

    
      

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/02/01/Jenkins-卡在-Please-wait-界面/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="ZHL">
      <meta itemprop="description" content="我的博客">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ZHL的博客">
    </span>
      <header class="post-header">

        
          <h1 class="post-title" itemprop="name headline">
              
              <a href="/2020/02/01/Jenkins-卡在-Please-wait-界面/" class="post-title-link" itemprop="url">Jenkins 卡在 Please wait ... 界面</a>
            
          </h1>
        

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              
                
              

              <time title="创建时间：2020-02-01 14:16:25" itemprop="dateCreated datePublished" datetime="2020-02-01T14:16:25+08:00">2020-02-01</time>
            </span>
          
            

            
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-02-10 21:08:59" itemprop="dateModified" datetime="2020-02-10T21:08:59+08:00">2020-02-10</time>
              </span>
            
          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Jenkins-安装/" itemprop="url" rel="index"><span itemprop="name">Jenkins 安装</span></a></span>

                
                
              
            </span>
          

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          
            <h1 id="War-方式安装"><a href="#War-方式安装" class="headerlink" title="War 方式安装"></a>War 方式安装</h1><p>全局使用<a href="https://mirrors.tuna.tsinghua.edu.cn/jenkins/" target="_blank" rel="noopener">清华大学开源软件镜像站/jenkins</a>。</p>
<h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><h3 id="下载-War-包"><a href="#下载-War-包" class="headerlink" title="下载 War 包"></a>下载 War 包</h3><p><a href="https://mirrors.tuna.tsinghua.edu.cn/jenkins/war/latest/jenkins.war" target="_blank" rel="noopener">下载链接</a></p>
<h3 id="启动"><a href="#启动" class="headerlink" title="启动"></a>启动</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java -jar jenkins.war</span><br></pre></td></tr></table></figure>

<h2 id="启动后信息"><a href="#启动后信息" class="headerlink" title="启动后信息"></a>启动后信息</h2><p>在 <code>&lt;user-home&gt;/.jenkins</code> 文件夹下生成相关文件。</p>
<h2 id="访问-Jenkins"><a href="#访问-Jenkins" class="headerlink" title="访问 Jenkins"></a>访问 Jenkins</h2><p>浏览器打开 <a href="http://127.0.0.1:8080" target="_blank" rel="noopener">http://127.0.0.1:8080</a></p>
<h2 id="出现错误"><a href="#出现错误" class="headerlink" title="出现错误"></a>出现错误</h2><p>一直处于 Please wait while Jenkins is getting ready to work… 界面。</p>
<h2 id="解决办法"><a href="#解决办法" class="headerlink" title="解决办法"></a>解决办法</h2><p>停止服务，修改 <code>&lt;user-home&gt;/.jenkins/hudson.model.UpdateCenter.xml</code> 文件，改为：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version='1.1' encoding='UTF-8'?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">sites</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">site</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">id</span>&gt;</span>default<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url</span>&gt;</span>https://mirrors.tuna.tsinghua.edu.cn/jenkins/updates/update-center.json<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">site</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">sites</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>重启后再使用浏览器进入，在出现 <strong>解锁 Jenkins</strong> 界面后不要继续操作。</p>
<p><strong>因为更换源后下载插件还是走的官方的源，那是因为 <code>update-center.json</code> 文件内的插件的地址是官方的（这里吐槽一下清华源，做事不做完！）。</strong></p>
<p>有两种解决办法。</p>
<h3 id="第一种，替换-update-center-json-中插件地址"><a href="#第一种，替换-update-center-json-中插件地址" class="headerlink" title="第一种，替换 update-center.json 中插件地址"></a>第一种，替换 <code>update-center.json</code> 中插件地址</h3><p>文件 <code>update-center.json</code> 位于 <code>your_device_jenkins_directory/updates/update-center.json</code>。将其中的 <code>http://updates.jenkins-ci.org/download/</code> 替换为 <code>https://mirrors.tuna.tsinghua.edu.cn/jenkins/</code></p>
<p><strong>但是：这只是权宜之计，后续会出现问题。</strong></p>
<h3 id="第二种，使用代理，比如-Nignx-代理"><a href="#第二种，使用代理，比如-Nignx-代理" class="headerlink" title="第二种，使用代理，比如 Nignx 代理"></a>第二种，使用代理，比如 Nignx 代理</h3><p>host 配置：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">127.255.255.254 updates.jenkins-ci.org  # 不占用 127.0.0.1 ip</span><br></pre></td></tr></table></figure>

<p>nginx.conf 配置：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">	listen 80;</span><br><span class="line">	server_name 127.255.255.254;</span><br><span class="line">	location /download/plugins &#123;  # 代理插件的地址</span><br><span class="line">        proxy_next_upstream http_502 http_504 error timeout invalid_header;</span><br><span class="line">        proxy_set_header Host mirrors.tuna.tsinghua.edu.cn;</span><br><span class="line">        proxy_set_header X-Real-IP $remote_addr;</span><br><span class="line">        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; </span><br><span class="line">        rewrite /download/plugins(.*) /jenkins/plugins/$1 break;</span><br><span class="line">        proxy_pass https://mirrors.tuna.tsinghua.edu.cn;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    location /download/war &#123;  # 代理更新包的地址</span><br><span class="line">        proxy_next_upstream http_502 http_504 error timeout invalid_header;</span><br><span class="line">        proxy_set_header Host mirrors.tuna.tsinghua.edu.cn;</span><br><span class="line">        proxy_set_header X-Real-IP $remote_addr;</span><br><span class="line">        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; </span><br><span class="line">        rewrite /download/war(.*) /jenkins/war/latest/jenkins.war break;</span><br><span class="line">        proxy_pass https://mirrors.tuna.tsinghua.edu.cn;</span><br><span class="line">    &#125;</span><br><span class="line">    # 后续如有其他也可以自行添加</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>这种方式也有缺点，比如，不能代理 https。</p>
<h1 id="Nginx-反向代理的问题"><a href="#Nginx-反向代理的问题" class="headerlink" title="Nginx 反向代理的问题"></a>Nginx 反向代理的问题</h1><p>可能会显示 【 反向代理设置有误】</p>
<p><a href="https://cloud.tencent.com/developer/article/1476876" target="_blank" rel="noopener">参考</a>，Nginx 反向代理设置：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">    ......</span><br><span class="line">    location /&#123;</span><br><span class="line">        proxy_pass http://127.0.0.1:55555;</span><br><span class="line">        proxy_redirect off;</span><br><span class="line">        proxy_read_timeout  90;</span><br><span class="line">	    proxy_set_header X-Forwarded-Host $host:$server_port;</span><br><span class="line">	    proxy_set_header X-Forwarded-Server $host;</span><br><span class="line">	    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;</span><br><span class="line">	    proxy_set_header X-Forwarded-Proto $scheme;</span><br><span class="line">	    proxy_set_header X-Real-IP $remote_addr;</span><br><span class="line">    &#125;</span><br><span class="line">    ......</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="Docker-方式安装"><a href="#Docker-方式安装" class="headerlink" title="Docker 方式安装"></a>Docker 方式安装</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">docker run \</span><br><span class="line">  -u root \</span><br><span class="line">  --rm \  <span class="comment"># 1</span></span><br><span class="line">  -d \  <span class="comment"># 2</span></span><br><span class="line">  -p 54321:8080 \  <span class="comment"># 3</span></span><br><span class="line">  -p 50000:50000 \  <span class="comment"># 4</span></span><br><span class="line">  -v your_device_jenkins_directory:/var/jenkins_home \  <span class="comment"># 5</span></span><br><span class="line">  -v /var/run/docker.sock:/var/run/docker.sock \  <span class="comment"># 6</span></span><br><span class="line">  jenkinsci/blueocean</span><br></pre></td></tr></table></figure>

<h2 id="命令解释"><a href="#命令解释" class="headerlink" title="命令解释"></a>命令解释</h2><ol>
<li><p>（可选） jenkinsci/blueocean 关闭时自动删除Docker容器（下图为实例）。如果您需要退出Jenkins，这可以保持整洁。</p>
</li>
<li><p>（可选）jenkinsci/blueocean 在后台运行容器（即“分离”模式）并输出容器ID。如果您不指定此选项， 则在终端窗口中输出正在运行的此容器的Docker日志。</p>
</li>
<li><p>映射（例如“发布”）jenkinsci/blueocean 容器的端口8080到主机上的端口8080。 第一个数字代表主机上的端口，而最后一个代表容器的端口。因此，如果您为此选项指定 -p 54321:8080 ，您将通过端口54321访问主机上的Jenkins。</p>
</li>
<li><p>（可选）将 <code>jenkinsci/blueocean</code> 容器的端口50000 映射到主机上的端口50000。 如果您在其他机器上设置了一个或多个基于JNLP的Jenkins代理程序，而这些代理程序又与 <code>jenkinsci/blueocean</code> 容器交互（充当“主”Jenkins服务器，或者简称为“Jenkins主”）， 则这是必需的。默认情况下，基于JNLP的Jenkins代理通过TCP端口50000与Jenkins主站进行通信。 您可以通过“ 配置全局安全性” 页面更改Jenkins主服务器上的端口号。如果您要将您的Jenkins主机的JNLP代理端口的TCP端口 值更改为51000（例如），那么您需要重新运行Jenkins（通过此 docker run …命令）并指定此“发布”选项 -p 52000:51000，其中最后一个值与Jenkins master上的这个更改值相匹配，第一个值是Jenkins主机的主机上的端口号， 通过它，基于JNLP的Jenkins代理与Jenkins主机进行通信 - 例如52000。</p>
</li>
<li><p>（可选，但强烈建议）映射在容器中的<code>/var/jenkins_home</code> 目录到具有名字 <code>jenkins-data</code> 的<a href="https://docs.docker.com/engine/admin/volumes/volumes/" target="_blank" rel="noopener">volume</a>。 如果这个卷不存在，那么这个 <code>docker run</code> 命令会自动为你创建卷。 如果您希望每次重新启动Jenkins（通过此 <code>docker run ...</code> 命令）时保持Jenkins状态，则此选项是必需的 。 如果你没有指定这个选项，那么在每次重新启动后，Jenkins将有效地重置为新的实例。<br><strong>注意:</strong> 所述的 <code>jenkins-data</code> 卷也可以 <a href="https://docs.docker.com/engine/reference/commandline/volume_create/" target="_blank" rel="noopener"><code>docker volume create</code></a>命令创建： <code>docker volume create jenkins-data</code> 代替映射 <code>/var/jenkins_home</code> 目录转换为Docker卷，还 可以将此目录映射到计算机本地文件系统上的目录。 例如，指定该选项 <code>-v $HOME/jenkins:/var/jenkins_home</code> 会将容器的 <code>/var/jenkins_home</code> 目录映射 到 本地计算机上目录中的 <code>jenkins</code> 子目录， 该$HOME目录通常是 <code>/Users//jenkins</code> 或<code>/home/&lt;your-username&gt;/jenkins</code> 。</p>
</li>
<li><p>（可选 /var/run/docker.sock 表示Docker守护程序通过其监听的基于Unix的套接字。 该映射允许 jenkinsci/blueocean 容器与Docker守护进程通信， 如果 jenkinsci/blueocean 容器需要实例化其他Docker容器，则该守护进程是必需的。 如果运行声明式管道，其语法包含agent部分用 docker<br>• 例如， <a href="https://jenkins.io/zh/doc/book/installing/#pipeline/syntax#agent" target="_blank" rel="noopener">agent</a> { docker { … } } 此选项是必需的。 在<a href="https://jenkins.io/zh/doc/book/installing/#pipeline/syntax#" target="_blank" rel="noopener">Pipeline Syntax</a> 页面上阅读更多关于这个的信息 。<br>jenkinsci/blueocean Docker镜像本身。如果此镜像尚未下载，则此 docker run 命令 将自动为您下载镜像。此外，如果自上次运行此命令后发布了此镜像的任何更新， 则再次运行此命令将自动为您下载这些已发布的镜像更新。 注意：这个Docker镜像也可以使用以下 docker pull命令独立下载（或更新） ： docker pull jenkinsci/blueocean</p>
</li>
</ol>
<h2 id="启动后信息-1"><a href="#启动后信息-1" class="headerlink" title="启动后信息"></a>启动后信息</h2><p>在 your_device_jenkins_directory 文件夹下生成如下内容</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">// your_device_jenkins_directory</span><br><span class="line">-rw-r--r--  1 root root   477 2月   1 12:13 com.cloudbees.hudson.plugins.folder.config.AbstractFolderConfiguration.xml</span><br><span class="line">-rw-r--r--  1 root root  1643 2月   1 14:13 config.xml</span><br><span class="line">-rw-r--r--  1 root root  4179 2月   1 14:13 copy_reference_file.log</span><br><span class="line">-rw-r--r--  1 root root   182 2月   1 14:13 hudson.model.UpdateCenter.xml</span><br><span class="line">-rw-r--r--  1 root root   370 2月   1 12:13 hudson.plugins.git.GitTool.xml</span><br><span class="line">-rw-------  1 root root  1712 2月   1 12:13 identity.key.enc</span><br><span class="line">-rw-r--r--  1 root root     7 2月   1 14:13 jenkins.install.UpgradeWizard.state</span><br><span class="line">-rw-r--r--  1 root root   171 2月   1 12:13 jenkins.telemetry.Correlator.xml</span><br><span class="line">drwxr-xr-x  2 root root  4096 2月   1 12:12 jobs</span><br><span class="line">drwxr-xr-x  4 root root  4096 2月   1 12:13 logs</span><br><span class="line">-rw-r--r--  1 root root   907 2月   1 14:13 nodeMonitors.xml</span><br><span class="line">drwxr-xr-x  2 root root  4096 2月   1 12:13 nodes</span><br><span class="line">drwxr-xr-x 88 root root 24576 2月   1 12:12 plugins</span><br><span class="line">-rw-r--r--  1 root root   129 2月   1 14:12 queue.xml.bak</span><br><span class="line">-rw-r--r--  1 root root    64 2月   1 12:12 secret.key</span><br><span class="line">-rw-r--r--  1 root root     0 2月   1 12:12 secret.key.not-so-secret</span><br><span class="line">drwx------  4 root root  4096 2月   1 12:13 secrets</span><br><span class="line">drwxr-xr-x  2 root root  4096 2月   1 14:13 updates</span><br><span class="line">drwxr-xr-x  2 root root  4096 2月   1 12:13 userContent</span><br><span class="line">drwxr-xr-x  3 root root  4096 2月   1 12:13 users</span><br><span class="line">drwxr-xr-x 11 root root  4096 2月   1 12:12 war</span><br><span class="line">drwxr-xr-x  2 root root  4096 2月   1 12:13 workflow-libs</span><br></pre></td></tr></table></figure>

<h2 id="访问-Jenkins-1"><a href="#访问-Jenkins-1" class="headerlink" title="访问 Jenkins"></a>访问 Jenkins</h2><p>浏览器打开 <a href="http://127.0.0.1:54321" target="_blank" rel="noopener">http://127.0.0.1:54321</a></p>
<h2 id="出现错误-1"><a href="#出现错误-1" class="headerlink" title="出现错误"></a>出现错误</h2><p>一直处于 Please wait while Jenkins is getting ready to work… 界面。</p>
<h2 id="解决办法-1"><a href="#解决办法-1" class="headerlink" title="解决办法"></a>解决办法</h2><p>待续。。。。。。</p>
<p>停止服务，修改 <code>your_device_jenkins_directory/hudson.model.UpdateCenter.xml</code> 文件，改为：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version='1.1' encoding='UTF-8'?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">sites</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">site</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">id</span>&gt;</span>default<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url</span>&gt;</span>https://mirrors.tuna.tsinghua.edu.cn/jenkins/updates/update-center.json<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">site</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">sites</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>使用清华的源。</p>
<p>重启后再使用浏览器进入，在出现 <strong>解锁 Jenkins</strong> 界面后不要继续操作。</p>
<p><strong>因为更换源后下载插件还是走的官方的源，那是因为 <code>update-center.json</code> 文件内的插件的地址是官方的（这里吐槽一下清华源，做事不做完！）。</strong></p>
<p>有两种解决办法。</p>
<h3 id="替换-update-center-json-中插件地址"><a href="#替换-update-center-json-中插件地址" class="headerlink" title="替换 update-center.json 中插件地址"></a>替换 <code>update-center.json</code> 中插件地址</h3><p>文件 <code>update-center.json</code> 位于 <code>your_device_jenkins_directory/updates/update-center.json</code>。将其中的 <code>http://updates.jenkins-ci.org/download/</code> 替换为 <code>https://mirrors.tuna.tsinghua.edu.cn/jenkins/</code></p>
<p><strong>但是：这只是权宜之计，会出现很多问题。</strong></p>
<h3 id="使用代理，比如-Nignx-代理"><a href="#使用代理，比如-Nignx-代理" class="headerlink" title="使用代理，比如 Nignx 代理"></a>使用代理，比如 Nignx 代理</h3><p>host 配置：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">127.255.255.254 updates.jenkins-ci.org  # 不占用 127.0.0.1 ip</span><br></pre></td></tr></table></figure>

<p>nginx.conf 配置：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"># updates.jenkins-ci.org 代理</span><br><span class="line">server &#123;</span><br><span class="line">	listen 80;</span><br><span class="line">	server_name 127.255.255.254;</span><br><span class="line">	location /download/plugins &#123;</span><br><span class="line">        proxy_next_upstream http_502 http_504 error timeout invalid_header;</span><br><span class="line">        proxy_set_header Host mirrors.tuna.tsinghua.edu.cn;</span><br><span class="line">        proxy_set_header X-Real-IP $remote_addr;</span><br><span class="line">        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; </span><br><span class="line">        rewrite /download/plugins(.*) /jenkins/plugins/$1 break;</span><br><span class="line">        proxy_pass https://mirrors.tuna.tsinghua.edu.cn;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


          
        
      
    </div>

    
    
    
      <footer class="post-footer">
          <div class="post-eof"></div>
        
      </footer>
  </div>
  
  
  
  </article>

    
      

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/01/30/Gradle-学习/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="ZHL">
      <meta itemprop="description" content="我的博客">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ZHL的博客">
    </span>
      <header class="post-header">

        
          <h1 class="post-title" itemprop="name headline">
              
              <a href="/2020/01/30/Gradle-学习/" class="post-title-link" itemprop="url">Gradle 学习</a>
            
          </h1>
        

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              
                
              

              <time title="创建时间：2020-01-30 20:34:20 / 修改时间：21:34:39" itemprop="dateCreated datePublished" datetime="2020-01-30T20:34:20+08:00">2020-01-30</time>
            </span>
          
            

            
          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Webpack/" itemprop="url" rel="index"><span itemprop="name">Webpack</span></a></span>

                
                
              
            </span>
          

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          
            <h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>学习使用 Gradle，并使用的是 Gradle Kotlin DSL。</p>
<p>暂处在学习阶段，一点点完善内容。</p>
<h1 id="依赖管理"><a href="#依赖管理" class="headerlink" title="依赖管理"></a>依赖管理</h1><h2 id="依赖版本号的管理"><a href="#依赖版本号的管理" class="headerlink" title="依赖版本号的管理"></a>依赖版本号的管理</h2><p>使用方法在 <code>org.gradle.api.plugins.ExtraPropertiesExtension</code>文档 中可以看到。</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// build.gradle.kts</span></span><br><span class="line">...</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 设置额外的配置，一般用于 依赖的版本号</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="comment">// 第 1 种方法，设置额外的配置</span></span><br><span class="line"><span class="comment">//ext &#123;</span></span><br><span class="line"><span class="comment">//    set("junit_version", "4.13")</span></span><br><span class="line"><span class="comment">//&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 第 2 种方法，设置额外的配置</span></span><br><span class="line"><span class="comment">//ext["junit_version"] = "4.12"</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 第 3 种方法，设置额外的配置</span></span><br><span class="line"><span class="comment">//extra["junit_version"] = "4.12"</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 第 4 种方法，设置额外的配置</span></span><br><span class="line">project.ext.<span class="keyword">set</span>(<span class="string">"junit_version"</span>, <span class="string">"4.13"</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 在 dependencies 中的使用</span></span><br><span class="line">dependencies &#123;</span><br><span class="line">    testImplementation(<span class="string">"junit:junit:<span class="subst">$&#123;project.extra["junit_version"]&#125;</span>"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>疑问：</strong></p>
<ol>
<li><p>为什么 ext 和 extra 表现的一样。猜测与 <code>org.gradle.api.plugins.ExtraPropertiesExtension</code> 中的</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * The name of this extension in all</span></span><br><span class="line"><span class="comment"> * &#123;<span class="doctag">@link</span> ExtensionContainer ExtensionContainers&#125;, &#123;<span class="doctag">@value</span>&#125;.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">String EXTENSION_NAME = <span class="string">"ext"</span>;</span><br></pre></td></tr></table></figure>

<p>有关。</p>
</li>
</ol>

          
        
      
    </div>

    
    
    
      <footer class="post-footer">
          <div class="post-eof"></div>
        
      </footer>
  </div>
  
  
  
  </article>

    
      

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/12/28/Webpack-下网络请求跨域问题/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="ZHL">
      <meta itemprop="description" content="我的博客">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ZHL的博客">
    </span>
      <header class="post-header">

        
          <h1 class="post-title" itemprop="name headline">
              
              <a href="/2019/12/28/Webpack-下网络请求跨域问题/" class="post-title-link" itemprop="url">Webpack 下网络请求跨域问题</a>
            
          </h1>
        

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              
                
              

              <time title="创建时间：2019-12-28 10:36:53" itemprop="dateCreated datePublished" datetime="2019-12-28T10:36:53+08:00">2019-12-28</time>
            </span>
          
            

            
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2019-12-29 17:41:46" itemprop="dateModified" datetime="2019-12-29T17:41:46+08:00">2019-12-29</time>
              </span>
            
          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Webpack/" itemprop="url" rel="index"><span itemprop="name">Webpack</span></a></span>

                
                
              
            </span>
          

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          
            <h1 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h1><p>在使用 Webpack 前后端分离开发的情况下，会遇到跨域访问问题。</p>
<h1 id="解决办法"><a href="#解决办法" class="headerlink" title="解决办法"></a>解决办法</h1><p>例子使用 Axios 进行说明。</p>
<ol>
<li>在 <code>项目目录/config/index.js</code> 中配置：</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">module.exports = &#123;</span><br><span class="line">  dev: &#123;</span><br><span class="line">    ...</span><br><span class="line">    proxyTable: &#123;</span><br><span class="line">      &apos;需要代理的根路径&apos;: &#123;  // 如 “/api”</span><br><span class="line">        target: &apos;接口地址&apos;,  // 如：“http://localhost:8080”，注意，需带上http:// 或 https://</span><br><span class="line">        changeOrigin: true,</span><br><span class="line">        pathRewrite: &#123;  // 路径重写，注意：需要代理的根路径 前面有符号：“^”。</span><br><span class="line">          &apos;^需要代理的根路径&apos;: &apos;接口真实路径&apos;  // 如 需要代理的路径为：“/api”，接口真实路径为：“/”</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    ....</span><br><span class="line">  &#125;</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>在 <code>项目目录/config/dev.env.js</code> 中配置：</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">module.exports = merge(prodEnv, &#123;</span><br><span class="line">  ...</span><br><span class="line">  // 如：开发使用的地址为：“http://localhost:8081”，需要代理的根路径为“/api”，</span><br><span class="line">  // 则为：“&apos;http://localhost:8081/api&apos;”，</span><br><span class="line">  // 千万注意：双引号内有单引号（也可使用单引号包含双引号）！</span><br><span class="line">  // 因为这是使用类似 C++ 宏的方式将 BASE_API 替换成 BASE_API 的值。</span><br><span class="line">  BASE_API: &quot;&apos;开发使用地址 + 需要代理的根路径&apos;&quot;,</span><br><span class="line">  ...</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>例：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">// 项目目录/config/index.js</span><br><span class="line">module.exports = &#123;</span><br><span class="line">  dev: &#123;</span><br><span class="line">    ...</span><br><span class="line">    proxyTable: &#123;</span><br><span class="line">      &apos;/api&apos;: &#123;</span><br><span class="line">        target: &apos;http://localhost:8080&apos;,</span><br><span class="line">        changeOrigin: true,</span><br><span class="line">        pathRewrite: &#123;</span><br><span class="line">          &apos;^api&apos;: &apos;/restful_api&apos;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    ....</span><br><span class="line">  &#125;</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 项目目录/config/dev.env.js</span><br><span class="line">module.exports = merge(prodEnv, &#123;</span><br><span class="line">  ...</span><br><span class="line">  BASE_API: &quot;&apos;http://localhost:8081/api&apos;&quot;,</span><br><span class="line">  ...</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>上面的例子中，Axios 的使用方式：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">axios(&apos;/one_action&apos;)</span><br><span class="line">.then(res =&gt; &#123;...&#125;)</span><br><span class="line">.catch(err =&gt; &#123;...&#125;);</span><br></pre></td></tr></table></figure>

<p>则在浏览器中，看到的是向  <code>http://localhost:8081/api/one_action</code> 请求数据，这不是真正的接口地址，但其实代理服务器会将该请求代理至 <code>http://localhost:8080/restful_api/one_action</code>，这才是真正的请求地址，所以可以请求到数据，解决了跨域问题。</p>

          
        
      
    </div>

    
    
    
      <footer class="post-footer">
          <div class="post-eof"></div>
        
      </footer>
  </div>
  
  
  
  </article>

    
      

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/12/22/Qt-Q-OBJECT-的作用/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="ZHL">
      <meta itemprop="description" content="我的博客">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ZHL的博客">
    </span>
      <header class="post-header">

        
          <h1 class="post-title" itemprop="name headline">
              
              <a href="/2019/12/22/Qt-Q-OBJECT-的作用/" class="post-title-link" itemprop="url">Qt Q_OBJECT 的作用</a>
            
          </h1>
        

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              
                
              

              <time title="创建时间：2019-12-22 15:21:17 / 修改时间：15:24:53" itemprop="dateCreated datePublished" datetime="2019-12-22T15:21:17+08:00">2019-12-22</time>
            </span>
          
            

            
          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/qt/" itemprop="url" rel="index"><span itemprop="name">qt</span></a></span>

                
                
              
            </span>
          

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          
            <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">graph TD;</span><br><span class="line">  node1(1. Qt Q_OBJECT 的作用)--&gt;node2(2. 构造函数初始化列表和构造函数体内赋值区别)</span><br><span class="line">  node2--&gt;node3(3. C++ 运算符重载)</span><br><span class="line">  node3--&gt;node4(4. 友元函数)</span><br><span class="line">  node1--&gt;node5(5. 引用和指针的用法区别)</span><br><span class="line">  node5--&gt;node6(6. Model/View)</span><br><span class="line">  node6--&gt;node7(7. 类中成员函数声明后面的const的含义)</span><br></pre></td></tr></table></figure>

<h1 id="1-Qt-Q-OBJECT-的作用"><a href="#1-Qt-Q-OBJECT-的作用" class="headerlink" title="1. Qt Q_OBJECT 的作用"></a>1. Qt Q_OBJECT 的作用</h1><blockquote>
<p>原文：The Q_OBJECT macro at the beginning of the class definition is necessary for all classes that define signals or slots.</p>
</blockquote>
<p>只有加入了Q_OBJECT，才能使用QT中的signal和slot机制，而且Q_OBJECT要放在类的最前面</p>
<h2 id="1-QT的信号与槽机制介绍"><a href="#1-QT的信号与槽机制介绍" class="headerlink" title="1.QT的信号与槽机制介绍"></a>1.QT的信号与槽机制介绍</h2><h3 id="1-1-信号与槽"><a href="#1-1-信号与槽" class="headerlink" title="1.1 信号与槽"></a>1.1 信号与槽</h3><p>信号和槽机制是 QT 的核心机制，要精通 QT 编程就必须对信号和槽有所了解。信号和槽是一种高级接口，应用于对象之间的通信，它是 QT 的核心特性，也是 QT 区别于其它工具包的重要地方。信号和槽是 QT 自行定义的一种通信机制，它独立于标准的 C/C++ 语言，因此要正确的处理信号和槽，必须借助一个称为 moc（Meta Object Compiler）的 QT 工具，该工具是一个 C++ 预处理程序，它为高层次的事件处理自动生成所需要的附加代码。</p>
<p>在我们所熟知的很多 GUI 工具包中，==窗口小部件 (widget) 都有一个回调函数用于响应它们能触发的每个动作，这个回调函数通常是一个指向某个函数的指针==。但是，在 QT 中信号和槽取代了这些凌乱的函数指针，使得我们编写这些通信程序更为简洁明了。 信号和槽能携带任意数量和任意类型的参数，他们是类型完全安全的，不会像回调函数那样产生 core dumps。</p>
<p>所有从 QObject 或其子类 ( 例如 Qwidget) 派生的类都能够包含信号和槽。当对象改变其状态时，信号就由该对象发射 (emit) 出去，这就是对象所要做的全部事情，它不知道另一端是谁在接收这个信号。这就是真正的信息封装，它确保对象被当作一个真正的软件组件来使用。槽用于接收信号，但它们是普通的对象成员函数。一个槽并不知道是否有任何信号与自己相连接。而且，对象并不了解具体的通信机制。</p>
<p>==可以将很多信号与单个的槽进行连接，也可以将单个的信号与很多的槽进行连接==，甚至于将一个信号与另外一个信号相连接也是可能的，这时无论第一个信号什么时候发射系统都将立刻发射第二个信号。总之，信号与槽构造了一个强大的部件编程机制。</p>
<h3 id="1-2-信号"><a href="#1-2-信号" class="headerlink" title="1.2 信号"></a>1.2 信号</h3><p>当某个信号对其客户或所有者发生的内部状态发生改变，信号被一个对象发射。只有定义过这个信号的类及其派生类能够发射这个信号。当一个信号被发射时，与其相关联的槽将被立刻执行，就象一个正常的函数调用一样。信号 - 槽机制完全独立于任何 GUI 事件循环。只有当所有的槽返回以后发射函数（emit）才返回。 如果存在多个槽与某个信号相关联，那么，当这个信号被发射时，这些槽将会一个接一个地执行，但是它们执行的顺序将会是随机的、不确定的，我们不能人为地指定哪个先执行、哪个后执行。</p>
<p>信号的声明是在头文件中进行的，QT 的 signals 关键字指出进入了信号声明区，随后即可声明自己的信号。例如，下面定义了三个信号：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">signals: </span><br><span class="line">  void mySignal();</span><br><span class="line">  void mySignal(int x); </span><br><span class="line">  void mySignalParam(int x,int y);</span><br></pre></td></tr></table></figure>

<p>在上面的定义中，signals 是 QT 的关键字，而非 C/C++ 的。接下来的一行 void mySignal() 定义了信号 mySignal，这个信号没有携带参数；接下来的一行 void mySignal(int x) 定义 了重名信号 mySignal，但是它携带一个整形参数，这有点类似于 C++ 中的虚函数。从形式上 讲信号的声明与普通的 C++ 函数是一样的，但是信号却没有函数体定义，另外，==信号的返回类型都是 void，不要指望能从信号返回什么有用信息==。</p>
<p>信号由moc自动产生，它们不应该在 .cpp 文件中实现。</p>
<h3 id="1-3-槽"><a href="#1-3-槽" class="headerlink" title="1.3 槽"></a>1.3 槽</h3><p>槽是普通的 C++ 成员函数，可以被正常调用，它们唯一的特殊性就是很多信号可以与其相关联。当与其关联的信号被发射时，这个槽就会被调用。槽可以有参数，但槽的参数不能有缺省值。</p>
<p>既然槽是普通的成员函数，因此与其它的函数一样，它们也有存取权限。槽的存取权限决定了谁能够与其相关联。同普通的 C++ 成员函数一样，槽函数也分为三种类型，即 public slots、private slots 和 protected slots。</p>
<p><strong>public slots</strong>：在这个区内声明的槽意味着任何对象都可将信号与之相连接。这对于组件编程非常有用，可以创建彼此互不了解的对象，将它们的信号与槽进行连接以便信息能够正确的传递。</p>
<p><strong>protected slots</strong>：在这个区内声明的槽意味着当前类及其子类可以将信号与之相连接。适用于那些槽，它们是类实现的一部分，但是其界面接口却面向外部。</p>
<p><strong>private slots</strong>：在这个区内声明的槽意味着只有类自己可以将信号与之相连接。适用于联系非常紧密的类。<br>槽也能够声明为虚函数，这也是非常有用的。</p>
<p>槽的声明也是在头文件中进行的。例如，下面声明了三个槽：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">public slots: </span><br><span class="line">  void mySlot(); </span><br><span class="line">  void mySlot(int x); </span><br><span class="line">  void mySlotParam(int x,int y);</span><br></pre></td></tr></table></figure>

<h3 id="1-4-信号与槽的关联"><a href="#1-4-信号与槽的关联" class="headerlink" title="1.4 信号与槽的关联"></a>1.4 信号与槽的关联</h3><p>通过调用 QObject 对象的 connect 函数来将某个对象的信号与另外一个对象的槽函数相关联，这样当发射者发射信号时，接收者的槽函数将被调用。该函数的定义如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">bool QObject::connect ( const QObject * sender, const char * signal,</span><br><span class="line">                        const QObject * receiver, const char * member ) [static]</span><br></pre></td></tr></table></figure>

<p>这个函数的作用就是将发射者 sender 对象中的信号 signal 与接收者 receiver 中的 member 槽函数联系起来。当指定信号 signal 时必须使用 QT 的宏 SIGNAL()，当指定槽函数时必须使用宏 SLOT()。如果发射者与接收者属于同一个对象的话，那么在 connect 调用中接收者参数可以省略。</p>
<p>例如，下面定义了两个对象：标签对象 label 和滚动条对象 scroll，并将 valueChanged() 信号与标签对象的 setNum() 相关联，另外信号还携带了一个整形参数，这样标签总是显示滚动条所处位置的值。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">QLabel *label  = new QLabel; </span><br><span class="line">QScrollBar *scroll = new QScrollBar; </span><br><span class="line">QObject::connect( scroll, SIGNAL(valueChanged(int)), label,  SLOT(setNum(int)) );</span><br></pre></td></tr></table></figure>

<h2 id="2-一个小例子"><a href="#2-一个小例子" class="headerlink" title="2.一个小例子"></a>2.一个小例子</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line">//tsignal.h </span><br><span class="line"> class TsignalApp:public QMainWindow </span><br><span class="line"> &#123; </span><br><span class="line">	 Q_OBJECT </span><br><span class="line">	 ... </span><br><span class="line">	 // 信号声明区</span><br><span class="line">	 signals: </span><br><span class="line">		 // 声明信号 mySignal() </span><br><span class="line">		 void mySignal(); </span><br><span class="line">		 // 声明信号 mySignal(int) </span><br><span class="line">		 void mySignal(int x); </span><br><span class="line">		 // 声明信号 mySignalParam(int,int) </span><br><span class="line">		 void mySignalParam(int x,int y); </span><br><span class="line">	 // 槽声明区</span><br><span class="line">	 public slots: </span><br><span class="line">		 // 声明槽函数 mySlot() </span><br><span class="line">		 void mySlot(); </span><br><span class="line">		 // 声明槽函数 mySlot(int) </span><br><span class="line">		 void mySlot(int x); </span><br><span class="line">		 // 声明槽函数 mySignalParam (int，int) </span><br><span class="line">		 void mySlotParam(int x,int y); </span><br><span class="line"> &#125; </span><br><span class="line"> ... </span><br><span class="line"> //tsignal.cpp </span><br><span class="line"> ... </span><br><span class="line"> TsignalApp::TsignalApp() </span><br><span class="line"> &#123; </span><br><span class="line">	 ... </span><br><span class="line">	 // 将信号 mySignal() 与槽 mySlot() 相关联</span><br><span class="line">	 connect(this,SIGNAL(mySignal()),SLOT(mySlot())); </span><br><span class="line">	 // 将信号 mySignal(int) 与槽 mySlot(int) 相关联</span><br><span class="line">	 connect(this,SIGNAL(mySignal(int)),SLOT(mySlot(int))); </span><br><span class="line">	 // 将信号 mySignalParam(int,int) 与槽 mySlotParam(int,int) 相关联</span><br><span class="line">	 connect(this,SIGNAL(mySignalParam(int,int)),SLOT(mySlotParam(int,int))); </span><br><span class="line"> &#125; </span><br><span class="line"> // 定义槽函数 mySlot() </span><br><span class="line"> void TsignalApp::mySlot() </span><br><span class="line"> &#123; </span><br><span class="line">	 QMessageBox::about(this,&quot;Tsignal&quot;, &quot;This is a signal/slot sample without parameter.&quot;); </span><br><span class="line"> &#125; </span><br><span class="line"> // 定义槽函数 mySlot(int) </span><br><span class="line"> void TsignalApp::mySlot(int x) </span><br><span class="line"> &#123; </span><br><span class="line">	 QMessageBox::about(this,&quot;Tsignal&quot;, &quot;This is a signal/slot sample with one parameter.&quot;); </span><br><span class="line"> &#125; </span><br><span class="line"> // 定义槽函数 mySlotParam(int,int) </span><br><span class="line"> void TsignalApp::mySlotParam(int x,int y) </span><br><span class="line"> &#123; </span><br><span class="line">	 char s[256]; </span><br><span class="line">	 sprintf(s,&quot;x:%d y:%d&quot;,x,y); </span><br><span class="line">	 QMessageBox::about(this,&quot;Tsignal&quot;, s); </span><br><span class="line"> &#125; </span><br><span class="line"> void TsignalApp::slotFileNew() </span><br><span class="line"> &#123; </span><br><span class="line">	 // 发射信号 mySignal() </span><br><span class="line">	 emit mySignal(); </span><br><span class="line">	 // 发射信号 mySignal(int) </span><br><span class="line">	 emit mySignal(5); </span><br><span class="line">	 // 发射信号 mySignalParam(5，100) </span><br><span class="line">	 emit mySignalParam(5,100); </span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>

<h2 id="3-关于元对象工具MOC"><a href="#3-关于元对象工具MOC" class="headerlink" title="3.关于元对象工具MOC"></a>3.关于元对象工具MOC</h2><p>元对象编译器 moc（meta object compiler）对 C++ 文件中的类声明进行分析并产生用于初始化元对象的 C++ 代码，元对象包含全部信号和槽的名字以及指向这些函数的指针。</p>
<p>==moc 读 C++ 源文件，如果发现有 Q_OBJECT 宏声明的类，它就会生成另外一个 C++ 源文件，这个新生成的文件中包含有该类的元对象代码。<br>例如，假设我们有一个头文件 mysignal.h，在这个文件中包含有信号或槽的声明，那么在编译之前 moc 工具就会根据该文件自动生成一个名为 mysignal.moc.h 的 C++ 源文件并将其提交给编译器；类似地，对应于 mysignal.cpp 文件 moc 工具将自动生成一个名为 mysignal.moc.cpp 文件提交给编译器。==</p>
<p>==元对象代码是 signal/slot 机制所必须的。用 moc 产生的 C++ 源文件必须与类实现一起进行编译和连接，或者用 #include 语句将其包含到类的源文件中。moc 并不扩展 #include 或者 #define 宏定义 , 它只是简单的跳过所遇到的任何预处理指令。==</p>
<h1 id="2-构造函数初始化列表和构造函数体内赋值区别"><a href="#2-构造函数初始化列表和构造函数体内赋值区别" class="headerlink" title="2. 构造函数初始化列表和构造函数体内赋值区别"></a>2. 构造函数初始化列表和构造函数体内赋值区别</h1><p>C++类中成员变量的初始化有两种方式：</p>
<ul>
<li>构造函数初始化列表</li>
<li>构造函数体内赋值</li>
</ul>
<p>下面看看两种方式有何不同。<br>成员变量初始化的顺序是按照定义的顺序。</p>
<h2 id="1、内部数据类型（char，int……指针等）"><a href="#1、内部数据类型（char，int……指针等）" class="headerlink" title="1、内部数据类型（char，int……指针等）"></a>1、内部数据类型（char，int……指针等）</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">class Animal</span><br><span class="line">&#123;</span><br><span class="line">public:</span><br><span class="line">    Animal(int weight,int height):       //A初始化列表</span><br><span class="line">      m_weight(weight),</span><br><span class="line">      m_height(height)</span><br><span class="line">    &#123;</span><br><span class="line">    &#125;</span><br><span class="line">    Animal(int weight,int height)       //B函数体内初始化</span><br><span class="line">    &#123;</span><br><span class="line">        m_weight = weight;</span><br><span class="line">        m_height = height;</span><br><span class="line">    &#125;</span><br><span class="line">private:</span><br><span class="line">    int m_weight;</span><br><span class="line">    int m_height;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>对于这些内部类型来说，基本上是没有区别的，效率上也不存在多大差异。</p>
<p>==当然A和B方式不能共存==。</p>
<h2 id="2、无默认构造函数的继承关系中"><a href="#2、无默认构造函数的继承关系中" class="headerlink" title="2、无默认构造函数的继承关系中"></a>2、无默认构造函数的继承关系中</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">class Animal</span><br><span class="line">&#123;</span><br><span class="line">public:</span><br><span class="line">    Animal(int weight,int height):        //没有提供无参的构造函数 </span><br><span class="line">      m_weight(weight),</span><br><span class="line">      m_height(height)</span><br><span class="line">    &#123;</span><br><span class="line">&#125;</span><br><span class="line">private:</span><br><span class="line">    int m_weight;</span><br><span class="line">    int m_height;</span><br><span class="line">&#125;;</span><br><span class="line"> </span><br><span class="line">class Dog: public Animal</span><br><span class="line">&#123;</span><br><span class="line">public:</span><br><span class="line">    Dog(int weight,int height,int type)   //error 构造函数 父类Animal无合适构造函数</span><br><span class="line">    &#123;</span><br><span class="line">    &#125;</span><br><span class="line">private:</span><br><span class="line">    int m_type;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>上面的子类和父类编译会出错：<br>报错内容：找不到合适的默认构造函数</p>
<p><img src="/2019/12/22/Qt-Q-OBJECT-的作用/2.3.1.png" alt="2.3.1"></p>
<p>因为子类Dog初始化之前要进行父类Animal的初始化，但是根据Dog的构造函数，没有给父类传递参数，使用了父类Animal的无参数构造函数。而父类Animal提供了有参数的构造函数，这样编译器就不会给父类Animal提供一个默认的无参数的构造函数了，所以编译时报错，说找不到合适的默认构造函数可用。要么提供一个无参数的构造函数，要么在子类的Dog的初始化列表中给父类Animal传递初始化参数，如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">class Dog: public Animal</span><br><span class="line">&#123;</span><br><span class="line">public:</span><br><span class="line">    Dog(int weight,int height,int type):</span><br><span class="line">        Animal(weight,height)         //必须使用初始化列表增加对父类的初始化</span><br><span class="line">    &#123;</span><br><span class="line">        ;</span><br><span class="line">    &#125;</span><br><span class="line">private:</span><br><span class="line">    int m_type;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h2 id="3、类中const常量，必须在初始化列表中初始，不能使用赋值的方式初始化"><a href="#3、类中const常量，必须在初始化列表中初始，不能使用赋值的方式初始化" class="headerlink" title="3、类中const常量，必须在初始化列表中初始，不能使用赋值的方式初始化"></a>3、类中const常量，必须在初始化列表中初始，不能使用赋值的方式初始化</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">class Dog: public Animal</span><br><span class="line">&#123;</span><br><span class="line">public:</span><br><span class="line">    Dog(int weight,int height,int type):</span><br><span class="line">        Animal(weight,height), </span><br><span class="line">        LEGS(4)                //必须在初始化列表中初始化</span><br><span class="line">    &#123;</span><br><span class="line">        //LEGS = 4;           //error</span><br><span class="line">    &#125;</span><br><span class="line">private:</span><br><span class="line">    int m_type;</span><br><span class="line">    const int LEGS;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h2 id="4、包含有自定义数据类型（类）对象的成员初始化"><a href="#4、包含有自定义数据类型（类）对象的成员初始化" class="headerlink" title="4、包含有自定义数据类型（类）对象的成员初始化"></a>4、包含有自定义数据类型（类）对象的成员初始化</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line">class Food</span><br><span class="line">&#123;</span><br><span class="line">public:</span><br><span class="line">    Food(int type = 10)</span><br><span class="line">    &#123;</span><br><span class="line">        m_type = 10;</span><br><span class="line">    &#125;</span><br><span class="line">    Food(Food &amp;other)                 //拷贝构造函数</span><br><span class="line">    &#123;</span><br><span class="line">        m_type = other.m_type;</span><br><span class="line">    &#125;</span><br><span class="line">    Food &amp; operator =(Food &amp;other)      //重载赋值=函数</span><br><span class="line">    &#123;</span><br><span class="line">        m_type = other.m_type;</span><br><span class="line">        return *this;</span><br><span class="line">    &#125;</span><br><span class="line">private:</span><br><span class="line">    int m_type;</span><br><span class="line">&#125;;</span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">（1）构造函数赋值方式 初始化成员对象m_food</span><br><span class="line"></span><br><span class="line">class Dog: public Animal</span><br><span class="line">&#123;</span><br><span class="line">public:</span><br><span class="line">    Dog(Food &amp;food)</span><br><span class="line">      //:m_food(food)  </span><br><span class="line">    &#123;</span><br><span class="line">        m_food = food;               //初始化 成员对象</span><br><span class="line">    &#125;</span><br><span class="line">private:</span><br><span class="line">    Food m_food;</span><br><span class="line">&#125;;</span><br><span class="line">//使用</span><br><span class="line">Food fd;</span><br><span class="line">Dog dog(fd);   //</span><br><span class="line">Dog dog(fd);</span><br><span class="line"></span><br><span class="line">结果：</span><br><span class="line">先执行了   对象类型构造函数Food(int type = 10)——&gt; </span><br><span class="line">然后在执行 对象类型构造函数Food &amp; operator =(Food &amp;other)</span><br><span class="line">想象是为什么？</span><br><span class="line"> </span><br><span class="line">（2）构造函数初始化列表方式</span><br><span class="line">class Dog: public Animal</span><br><span class="line">&#123;</span><br><span class="line">public:</span><br><span class="line">    Dog(Food &amp;food)</span><br><span class="line">      :m_food(food)                  //初始化 成员对象</span><br><span class="line">    &#123;</span><br><span class="line">        //m_food = food;               </span><br><span class="line">    &#125;</span><br><span class="line">private:</span><br><span class="line">    Food m_food;</span><br><span class="line">&#125;;</span><br><span class="line">//使用</span><br><span class="line">Food fd;</span><br><span class="line">Dog dog(fd);   //</span><br><span class="line">Dog dog(fd);</span><br><span class="line">结果：执行Food(Food &amp;other)拷贝构造函数完成初始化</span><br></pre></td></tr></table></figure>

<p>不同的初始化方式得到不同的结果：</p>
<p>==明显构造函数初始化列表的方式效率更高。==</p>
<h1 id="3-C-运算符重载"><a href="#3-C-运算符重载" class="headerlink" title="3. C++ 运算符重载"></a>3. C++ 运算符重载</h1><p><a href="https://blog.csdn.net/lishuzhai/article/details/50781753" target="_blank" rel="noopener">太多了，见博客</a></p>
<h1 id="4-友元函数"><a href="#4-友元函数" class="headerlink" title="4. 友元函数"></a>4. 友元函数</h1><p>类的友元函数是定义在类外部，但有权访问类的所有私有（private）成员和保护（protected）成员。尽管友元函数的原型有在类的定义中出现过，但是友元函数并不是成员函数。</p>
<p>友元可以是一个函数，该函数被称为友元函数；友元也可以是一个类，该类被称为友元类，在这种情况下，整个类及其所有成员都是友元。</p>
<h1 id="5-引用和指针的用法区别"><a href="#5-引用和指针的用法区别" class="headerlink" title="5. 引用和指针的用法区别"></a>5. 引用和指针的用法区别</h1><h2 id="5-1-定义"><a href="#5-1-定义" class="headerlink" title="5.1 定义"></a>5.1 定义</h2><p>指针：指针是一个变量，只不过这个变量存储的是一个地址，指向内存的一个存储单元；<br>引用：跟原来的变量实质上是同一个东西，只不过是原变量的一个别名而已。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">int a=1;</span><br><span class="line">int *p=&amp;a;   // 指针</span><br><span class="line">int &amp;b=a;   //引用</span><br></pre></td></tr></table></figure>

<p>上面定义了一个整形变量和一个指针变量p，该指针变量指向a的存储单元，即p的值是a存储单元的地址。<br>而下面2句定义了一个整形变量a和这个整形a的引用b，事实上a和b是同一个东西，在内存占有同一个存储单元。</p>
<h2 id="5-2-区别"><a href="#5-2-区别" class="headerlink" title="5.2 区别"></a>5.2 区别</h2><p>(1)指针：指针是一个变量，只不过这个变量存储的是一个地址，指向内存的一个存储单元；引用：跟原来的变量实质上是同一个东西，只不过是原变量的一个别名而已。</p>
<p>(2)可以有const指针，但是没有const引用；</p>
<p>(3)指针可以有多级，但是引用只能是一级（int **p；合法 而 int &amp;&amp;a是不合法的），即可以有指向指针的指针，但是没有引用的引用。</p>
<p>(4)指针的值可以为空，但是引用的值不能为NULL，并且引用在定义的时候必须初始化；</p>
<p>(5)指针的值在初始化后可以改变，即指向其它的存储单元，而引用在进行初始化后就不会再改变了。</p>
<p>(6)”sizeof引用”得到的是所指向的变量(对象)的大小，而”sizeof指针”得到的是指针本身的大小；</p>
<p>(7)指针和引用的自增(++)运算意义不一样；</p>
<h1 id="7-类中成员函数声明后面的const的含义"><a href="#7-类中成员函数声明后面的const的含义" class="headerlink" title="7. 类中成员函数声明后面的const的含义"></a>7. 类中成员函数声明后面的const的含义</h1><p>这个const一般是对类中成员函数属性的声明，但这个声明怪怪的，只能放在函数声明的尾部，大概是因为其它地方都已经被占用了。这个声明表示任这个函数不会修改类中的数据成员。如果在编写const成员函数时，不慎修改了数据成员，或者调用了其它非const成员函数，编译器将指出错误，这无疑会提高程序的健壮性。<br>以下程序中，类stack的成员函数GetCount仅用于计数，从逻辑上讲GetCount应当为const函数。编译器将指出GetCount函数中的错误。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">class Stack</span><br><span class="line">&#123;</span><br><span class="line">    public:</span><br><span class="line">        void Push(int elem);</span><br><span class="line">        int Pop(void);</span><br><span class="line">        int GetCount(void) const;   // const 成员函数</span><br><span class="line">    private:</span><br><span class="line">        int m_num;</span><br><span class="line">        int m_data[100];</span><br><span class="line">&#125;;</span><br><span class="line">int Stack::GetCount(void)const</span><br><span class="line">&#123;</span><br><span class="line">    ++m_num;   // 编译错误，企图修改数据成员m_num</span><br><span class="line">    Pop();   // 编译错误，企图调用非const函数</span><br><span class="line">    returnm_num;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>关于Const函数的几点规则：<br>a. 在类中被const声明的成员函数只能访问const成员函数，而非const函数可以访问任意的成员函数，包括const成员函数。<br>b. 在类中被const声明的成员函数不可以修改对象的成员数据，不管对象是否具有const性质。编译时会对是否修改成员数据进行检查。<br>c. 加上mutable修饰符的数据成员，对于任何情况下通过任何手段都可修改，自然此时的const成员函数可以修改它。</p>

          
        
      
    </div>

    
    
    
      <footer class="post-footer">
          <div class="post-eof"></div>
        
      </footer>
  </div>
  
  
  
  </article>

    
      

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/12/17/Centos7-部署遇到的一些问题/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="ZHL">
      <meta itemprop="description" content="我的博客">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ZHL的博客">
    </span>
      <header class="post-header">

        
          <h1 class="post-title" itemprop="name headline">
              
              <a href="/2019/12/17/Centos7-部署遇到的一些问题/" class="post-title-link" itemprop="url">Centos7 部署遇到的一些问题</a>
            
          </h1>
        

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              
                
              

              <time title="创建时间：2019-12-17 09:53:37 / 修改时间：19:03:24" itemprop="dateCreated datePublished" datetime="2019-12-17T09:53:37+08:00">2019-12-17</time>
            </span>
          
            

            
          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Centos7/" itemprop="url" rel="index"><span itemprop="name">Centos7</span></a></span>

                
                
                  ，
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Centos7/部署/" itemprop="url" rel="index"><span itemprop="name">部署</span></a></span>

                
                
              
            </span>
          

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          
            <h1 id="Nginx-安装问题"><a href="#Nginx-安装问题" class="headerlink" title="Nginx 安装问题"></a>Nginx 安装问题</h1><p>按照大多数教程的方式都是使用自编译的方式，可是过程过于繁琐。</p>
<p>采用以下方式简单一些：</p>
<ol>
<li>添加 nginx 存储库，<code>sudo yum install epel-release</code>；</li>
<li>安装 nginx，<code>yum install nginx</code>。</li>
</ol>
<h1 id="Certbot-出错问题"><a href="#Certbot-出错问题" class="headerlink" title="Certbot 出错问题"></a>Certbot 出错问题</h1><h2 id="urllib3-出错"><a href="#urllib3-出错" class="headerlink" title="urllib3 出错"></a>urllib3 出错</h2><p>问题：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">[root@iZwz98bpfv23icxqr51jwfZ for_https]# certbot certonly --webroot -w /home/hcgy/project/for_https -d hcgy.top</span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File &quot;/usr/bin/certbot&quot;, line 9, in &lt;module&gt;</span><br><span class="line">    load_entry_point(&apos;certbot==0.39.0&apos;, &apos;console_scripts&apos;, &apos;certbot&apos;)()</span><br><span class="line">  File &quot;/usr/lib/python2.7/site-packages/pkg_resources/__init__.py&quot;, line 570, in load_entry_point</span><br><span class="line">    return get_distribution(dist).load_entry_point(group, name)</span><br><span class="line">  File &quot;/usr/lib/python2.7/site-packages/pkg_resources/__init__.py&quot;, line 2687, in load_entry_point</span><br><span class="line">    return ep.load()</span><br><span class="line">  File &quot;/usr/lib/python2.7/site-packages/pkg_resources/__init__.py&quot;, line 2341, in load</span><br><span class="line">    return self.resolve()</span><br><span class="line">  File &quot;/usr/lib/python2.7/site-packages/pkg_resources/__init__.py&quot;, line 2347, in resolve</span><br><span class="line">    module = __import__(self.module_name, fromlist=[&apos;__name__&apos;], level=0)</span><br><span class="line">  File &quot;/usr/lib/python2.7/site-packages/certbot/main.py&quot;, line 17, in &lt;module&gt;</span><br><span class="line">    from certbot import account</span><br><span class="line">  File &quot;/usr/lib/python2.7/site-packages/certbot/account.py&quot;, line 17, in &lt;module&gt;</span><br><span class="line">    from acme import messages</span><br><span class="line">  File &quot;/usr/lib/python2.7/site-packages/acme/messages.py&quot;, line 11, in &lt;module&gt;</span><br><span class="line">    from acme import challenges</span><br><span class="line">  File &quot;/usr/lib/python2.7/site-packages/acme/challenges.py&quot;, line 12, in &lt;module&gt;</span><br><span class="line">    import requests</span><br><span class="line">  File &quot;/usr/lib/python2.7/site-packages/requests/__init__.py&quot;, line 58, in &lt;module&gt;</span><br><span class="line">    from . import utils</span><br><span class="line">  File &quot;/usr/lib/python2.7/site-packages/requests/utils.py&quot;, line 32, in &lt;module&gt;</span><br><span class="line">    from .exceptions import InvalidURL</span><br><span class="line">  File &quot;/usr/lib/python2.7/site-packages/requests/exceptions.py&quot;, line 10, in &lt;module&gt;</span><br><span class="line">    from urllib3.exceptions import HTTPError as BaseHTTPError</span><br><span class="line">  File &quot;/usr/lib/python2.7/site-packages/urllib3/__init__.py&quot;, line 10, in &lt;module&gt;</span><br><span class="line">    from .connectionpool import (</span><br><span class="line">  File &quot;/usr/lib/python2.7/site-packages/urllib3/connectionpool.py&quot;, line 31, in &lt;module&gt;</span><br><span class="line">    from .connection import (</span><br><span class="line">  File &quot;/usr/lib/python2.7/site-packages/urllib3/connection.py&quot;, line 45, in &lt;module&gt;</span><br><span class="line">    from .util.ssl_ import (</span><br><span class="line">  File &quot;/usr/lib/python2.7/site-packages/urllib3/util/__init__.py&quot;, line 5, in &lt;module&gt;</span><br><span class="line">    from .request import make_headers</span><br><span class="line">  File &quot;/usr/lib/python2.7/site-packages/urllib3/util/request.py&quot;, line 5, in &lt;module&gt;</span><br><span class="line">    from ..exceptions import UnrewindableBodyError</span><br><span class="line">ImportError: cannot import name UnrewindableBodyError</span><br></pre></td></tr></table></figure>

<p>解决办法：<br>安装新一点的 urllib3 库，<code>pip install urllib3==1.21.1</code>。注：版本号视情况而定！</p>
<h2 id="pyOpenSSL-出错"><a href="#pyOpenSSL-出错" class="headerlink" title="pyOpenSSL 出错"></a>pyOpenSSL 出错</h2><p>问题：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">[root@iZwz98bpfv23icxqr51jwfZ for_https]# certbot certonly --webroot -w /home/hcgy/project/for_https -d hcgy.top</span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File &quot;/usr/bin/certbot&quot;, line 9, in &lt;module&gt;</span><br><span class="line">    load_entry_point(&apos;certbot==0.39.0&apos;, &apos;console_scripts&apos;, &apos;certbot&apos;)()</span><br><span class="line">  File &quot;/usr/lib/python2.7/site-packages/pkg_resources/__init__.py&quot;, line 570, in load_entry_point</span><br><span class="line">    return get_distribution(dist).load_entry_point(group, name)</span><br><span class="line">  File &quot;/usr/lib/python2.7/site-packages/pkg_resources/__init__.py&quot;, line 2687, in load_entry_point</span><br><span class="line">    return ep.load()</span><br><span class="line">  File &quot;/usr/lib/python2.7/site-packages/pkg_resources/__init__.py&quot;, line 2341, in load</span><br><span class="line">    return self.resolve()</span><br><span class="line">  File &quot;/usr/lib/python2.7/site-packages/pkg_resources/__init__.py&quot;, line 2347, in resolve</span><br><span class="line">    module = __import__(self.module_name, fromlist=[&apos;__name__&apos;], level=0)</span><br><span class="line">  File &quot;/usr/lib/python2.7/site-packages/certbot/main.py&quot;, line 20, in &lt;module&gt;</span><br><span class="line">    from certbot import client</span><br><span class="line">  File &quot;/usr/lib/python2.7/site-packages/certbot/client.py&quot;, line 14, in &lt;module&gt;</span><br><span class="line">    from acme import client as acme_client</span><br><span class="line">  File &quot;/usr/lib/python2.7/site-packages/acme/client.py&quot;, line 37, in &lt;module&gt;</span><br><span class="line">    requests.packages.urllib3.contrib.pyopenssl.inject_into_urllib3()  # type: ignore</span><br><span class="line">  File &quot;/usr/lib/python2.7/site-packages/urllib3/contrib/pyopenssl.py&quot;, line 112, in inject_into_urllib3</span><br><span class="line">    _validate_dependencies_met()</span><br><span class="line">  File &quot;/usr/lib/python2.7/site-packages/urllib3/contrib/pyopenssl.py&quot;, line 147, in _validate_dependencies_met</span><br><span class="line">    raise ImportError(&quot;&apos;pyOpenSSL&apos; module missing required functionality. &quot;</span><br><span class="line">ImportError: &apos;pyOpenSSL&apos; module missing required functionality. Try upgrading to v0.14 or newer.</span><br></pre></td></tr></table></figure>

<p>解决办法：</p>
<p>在certbot的GitHub上面找到正解：<a href="https://github.com/certbot/certbot/issues/5534" target="_blank" rel="noopener">https://github.com/certbot/certbot/issues/5534</a></p>
<p>使用 <code>pip install --upgrade --force-reinstall &#39;requests==2.6.0&#39;</code> 命令解决。</p>

          
        
      
    </div>

    
    
    
      <footer class="post-footer">
          <div class="post-eof"></div>
        
      </footer>
  </div>
  
  
  
  </article>

    
      

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/11/26/Ubuntu18-下部署/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="ZHL">
      <meta itemprop="description" content="我的博客">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ZHL的博客">
    </span>
      <header class="post-header">

        
          <h1 class="post-title" itemprop="name headline">
              
              <a href="/2019/11/26/Ubuntu18-下部署/" class="post-title-link" itemprop="url">Ubuntu18 下部署</a>
            
          </h1>
        

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              
                
              

              <time title="创建时间：2019-11-26 19:03:19" itemprop="dateCreated datePublished" datetime="2019-11-26T19:03:19+08:00">2019-11-26</time>
            </span>
          
            

            
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-02-11 00:14:14" itemprop="dateModified" datetime="2020-02-11T00:14:14+08:00">2020-02-11</time>
              </span>
            
          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/部署/" itemprop="url" rel="index"><span itemprop="name">部署</span></a></span>

                
                
              
            </span>
          

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          
            <h1 id="开启-root"><a href="#开启-root" class="headerlink" title="开启 root"></a>开启 root</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo passwd root  // 之后按照提示输入密码</span><br></pre></td></tr></table></figure>

<h1 id="root-使用规则"><a href="#root-使用规则" class="headerlink" title="root 使用规则"></a>root 使用规则</h1><h2 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">su root  // 使用 root</span><br><span class="line">exit  // 用完后退出，root 权限很高，不建议全部都使用 root 操作</span><br></pre></td></tr></table></figure>

<h2 id="远程登录（不建议使用）"><a href="#远程登录（不建议使用）" class="headerlink" title="远程登录（不建议使用）"></a>远程登录（不建议使用）</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">sudo vi /etc/ssh/sshd_config</span><br><span class="line">// 将</span><br><span class="line">#PermitRootLogin prohibit-password</span><br><span class="line">// 修改为</span><br><span class="line">PermitRootLogin yes</span><br><span class="line">// 如果已开启 ssh 服务，则需要重启 ssh</span><br><span class="line">sudo systemctl restart ssh</span><br></pre></td></tr></table></figure>

<h1 id="开启-SSH"><a href="#开启-SSH" class="headerlink" title="开启 SSH"></a>开启 SSH</h1><h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install openssh-server</span><br></pre></td></tr></table></figure>

<h2 id="查看状态"><a href="#查看状态" class="headerlink" title="查看状态"></a>查看状态</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl status ssh</span><br></pre></td></tr></table></figure>

<h2 id="配置开机自启"><a href="#配置开机自启" class="headerlink" title="配置开机自启"></a>配置开机自启</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl enable ssh</span><br></pre></td></tr></table></figure>

<h1 id="开启防火墙"><a href="#开启防火墙" class="headerlink" title="开启防火墙"></a>开启防火墙</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">su root</span><br><span class="line">ufw enable</span><br></pre></td></tr></table></figure>

<h2 id="开启-22-端口"><a href="#开启-22-端口" class="headerlink" title="开启 22 端口"></a>开启 22 端口</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ufw allow 22</span><br></pre></td></tr></table></figure>

<h1 id="配置-MySQL"><a href="#配置-MySQL" class="headerlink" title="配置 MySQL"></a>配置 MySQL</h1><h2 id="安装-1"><a href="#安装-1" class="headerlink" title="安装"></a>安装</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get update  // 更新软件清单</span><br><span class="line">sudo apt-get install mysql-server  // 安装 MySQL-Server</span><br></pre></td></tr></table></figure>

<h2 id="初始化"><a href="#初始化" class="headerlink" title="初始化"></a>初始化</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo mysql_secure_installation  // 之后根据提示操作</span><br></pre></td></tr></table></figure>

<h2 id="检查服务状态"><a href="#检查服务状态" class="headerlink" title="检查服务状态"></a>检查服务状态</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl status mysql</span><br></pre></td></tr></table></figure>

<h2 id="远程访问"><a href="#远程访问" class="headerlink" title="远程访问"></a>远程访问</h2><h3 id="服务配置"><a href="#服务配置" class="headerlink" title="服务配置"></a>服务配置</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/mysql/mysql.conf.d/mysqld.cnf</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># 将</span><br><span class="line">bind-address		= 127.0.0.1</span><br><span class="line"># 修改为</span><br><span class="line">bind-address        = 0.0.0.0</span><br></pre></td></tr></table></figure>

<p>重启 MySQL</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl restart mysql</span><br></pre></td></tr></table></figure>

<h3 id="新建远程账户（不建议使用-root-用户远程）"><a href="#新建远程账户（不建议使用-root-用户远程）" class="headerlink" title="新建远程账户（不建议使用 root 用户远程）"></a>新建远程账户（不建议使用 root 用户远程）</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">GRANT 权限（ALL PRIVILEGES 代表所有权限） ON 数据库（* 代表所有）.表名（* 代表所有） TO 用户名@&quot;允许远程的 IP（% 代表允许所有）&quot; IDENTIFIED BY &quot;密码&quot;;</span><br><span class="line"></span><br><span class="line">FLUSH PRIVILEGES;  -- 刷新权限</span><br></pre></td></tr></table></figure>

<h2 id="开启-3306-端口"><a href="#开启-3306-端口" class="headerlink" title="开启 3306 端口"></a>开启 3306 端口</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">su root</span><br><span class="line">ufw allow 3306</span><br></pre></td></tr></table></figure>

<h2 id="测试远程连接"><a href="#测试远程连接" class="headerlink" title="测试远程连接"></a>测试远程连接</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql -h 【MySQL-Server 所在主机IP 】 -P 【MySQL 开启端口】 -u 账号 -p</span><br></pre></td></tr></table></figure>

<h2 id="配置开机自启-1"><a href="#配置开机自启-1" class="headerlink" title="配置开机自启"></a>配置开机自启</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl enable mysql</span><br></pre></td></tr></table></figure>

<h1 id="配置-Java"><a href="#配置-Java" class="headerlink" title="配置 Java"></a>配置 Java</h1><h2 id="安装-2"><a href="#安装-2" class="headerlink" title="安装"></a>安装</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install openjdk-11-jre-headless</span><br></pre></td></tr></table></figure>

<h2 id="查看-Java-安装是否成功"><a href="#查看-Java-安装是否成功" class="headerlink" title="查看 Java 安装是否成功"></a>查看 Java 安装是否成功</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java -version</span><br></pre></td></tr></table></figure>

<h1 id="配置-Nginx"><a href="#配置-Nginx" class="headerlink" title="配置 Nginx"></a>配置 Nginx</h1><h2 id="安装-3"><a href="#安装-3" class="headerlink" title="安装"></a>安装</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install nginx  // 安装</span><br><span class="line">systemctl start nginx  // 启动</span><br></pre></td></tr></table></figure>

<h2 id="开启-80-和-443-端口"><a href="#开启-80-和-443-端口" class="headerlink" title="开启 80 和 443 端口"></a>开启 80 和 443 端口</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">su root</span><br><span class="line">ufw allow 80</span><br><span class="line">ufw allow 443</span><br></pre></td></tr></table></figure>

<h2 id="配置开机自启-2"><a href="#配置开机自启-2" class="headerlink" title="配置开机自启"></a>配置开机自启</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl enable nginx</span><br></pre></td></tr></table></figure>

<h1 id="配置域名"><a href="#配置域名" class="headerlink" title="配置域名"></a>配置域名</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">将域名 A 记录指向 IP</span><br></pre></td></tr></table></figure>

<h1 id="使用-Let’s-Encrypt-配置-SSL"><a href="#使用-Let’s-Encrypt-配置-SSL" class="headerlink" title="使用 Let’s Encrypt 配置 SSL"></a>使用 Let’s Encrypt 配置 SSL</h1><h2 id="新建一个-80的访问目录，以便-Let’s-encrypt-验证使用"><a href="#新建一个-80的访问目录，以便-Let’s-encrypt-验证使用" class="headerlink" title="新建一个 80的访问目录，以便 Let’s encrypt 验证使用"></a>新建一个 80的访问目录，以便 Let’s encrypt 验证使用</h2><h2 id="查看-Nginx-配置文件地址"><a href="#查看-Nginx-配置文件地址" class="headerlink" title="查看 Nginx 配置文件地址"></a>查看 Nginx 配置文件地址</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">nginx -t</span><br><span class="line"></span><br><span class="line">// 如果不需要，可以将 nignx 配置文件目录下/sites-available/default 删除</span><br><span class="line"></span><br><span class="line">vim 【nignx 配置文件目录下/sites-available/default】</span><br></pre></td></tr></table></figure>

<p>修改为</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">    listen 80;</span><br><span class="line">    listen [::]:80;</span><br><span class="line"></span><br><span class="line">    root 【80的访问目录】;</span><br><span class="line">    </span><br><span class="line">    index index.html index.htm;</span><br><span class="line">    </span><br><span class="line">    server_name 【域名】;</span><br><span class="line">    </span><br><span class="line">    location / &#123;</span><br><span class="line">        # First attempt to serve request as file, then</span><br><span class="line">        # as directory, then fall back to displaying a 404.</span><br><span class="line">        try_files $uri $uri/ =404;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在 80 访问目录中新建一个 index.html 文件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">vim index.html</span><br><span class="line">// 写点内容，比如</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;utf-8&quot; /&gt;</span><br><span class="line">    &lt;title&gt;Hello&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;h1&gt;Hello world!&lt;/h1&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br><span class="line">或者</span><br><span class="line">&lt;script&gt;window.location.replace(&apos;https&apos; + window.location.href.substr(4));&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">// 测试 nginx 配置</span><br><span class="line">nginx -t</span><br><span class="line">// 重启 nginx 服务</span><br><span class="line">nginx -s reload</span><br></pre></td></tr></table></figure>

<h2 id="查看-Nginx-配置是否正确"><a href="#查看-Nginx-配置是否正确" class="headerlink" title="查看 Nginx 配置是否正确"></a>查看 Nginx 配置是否正确</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">浏览器中输入 IP，查看显示是否为 index.html 内容</span><br></pre></td></tr></table></figure>

<h2 id="安装-openssl"><a href="#安装-openssl" class="headerlink" title="安装  openssl"></a>安装  openssl</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install openssl</span><br></pre></td></tr></table></figure>

<h2 id="安装-certbot"><a href="#安装-certbot" class="headerlink" title="安装  certbot"></a>安装  certbot</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install certbot</span><br></pre></td></tr></table></figure>

<h3 id="申请证书"><a href="#申请证书" class="headerlink" title="申请证书"></a>申请证书</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">certbot certonly \</span><br><span class="line">--webroot -w 80的访问目录 \</span><br><span class="line">-d 域名</span><br><span class="line">// 根据提示填写相关信息</span><br></pre></td></tr></table></figure>

<h3 id="生成Perfect-Forward-Security（PFS）键值"><a href="#生成Perfect-Forward-Security（PFS）键值" class="headerlink" title="生成Perfect Forward Security（PFS）键值"></a>生成Perfect Forward Security（PFS）键值</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">openssl dhparam 2048 -out /etc/ssl/private/dhparam.pem  // 生成，一般需要很长时间，耐心等候</span><br><span class="line">有时会生成失败，多试几次，如果生成不了，尝试</span><br><span class="line">cd /etc/ssl/private</span><br><span class="line">openssl dhparam -dsaparam -out dhparam.pem 4096</span><br></pre></td></tr></table></figure>

<blockquote>
<p><a href="https://link.jianshu.com?t=https://wiki.openssl.org/index.php/Manual:Dhparam(1)#OPTIONS" target="_blank" rel="noopener">This option instructs OpenSSL to produce “DSA-like” DH parameters</a> (<em>p</em> is such that <em>p</em>-1 is a multiple of a smaller prime <em>q</em>, and the generator has multiplicative order <em>q</em>). This is considerably faster because it does not need to nest the primality tests, and thus only thousands, not millions, of candidates will be generated and tested.<br> As far as academics know, DSA-like parameters for DH are equally secure; there is no actual advantage to using “strong primes” (the terminology is traditional and does not actually imply some extra strength).<br> Similarly, you may also use a 2048-bit modulus, which is already very far into the “cannot break it zone”. The 4096-bit modulus will make DH computations slower (which is not a real problem for a VPN; these occur only at the start of the connection), but won’t actually improve security.<br> To some extent, a 4096-bit modulus may woo auditors, but auditors are unlikely to be much impressed by a Raspberry-Pi, which is way too cheap anyway.</p>
</blockquote>
<h2 id="配置-Nginx-启用-https"><a href="#配置-Nginx-启用-https" class="headerlink" title="配置 Nginx 启用 https"></a>配置 Nginx 启用 https</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line">/etc/nginx/sites-available 目录下新建配置文件，如 MySite.cnf</span><br><span class="line"></span><br><span class="line">// 将以下配置写入</span><br><span class="line">// 如果是静态网页</span><br><span class="line">server &#123;</span><br><span class="line">    listen       443   ssl;</span><br><span class="line">    server_name  【域名】;</span><br><span class="line"></span><br><span class="line">    charset utf-8;</span><br><span class="line"></span><br><span class="line">    access_log  【log 路径】/access_log.log;</span><br><span class="line">    error_log   【log 路径】/error_log.log;</span><br><span class="line"></span><br><span class="line">    # 可不配置</span><br><span class="line">    location / &#123;</span><br><span class="line">        root   【80的访问目录】;</span><br><span class="line">        index  index.html index.htm;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    ssl_certificate        /etc/letsencrypt/live/【域名】/fullchain.pem;</span><br><span class="line">    ssl_certificate_key    /etc/letsencrypt/live/【域名】/privkey.pem;</span><br><span class="line"></span><br><span class="line">    ssl_session_timeout 1d;</span><br><span class="line">    ssl_session_cache shared:SSL:50m;</span><br><span class="line">    ssl_session_tickets on;</span><br><span class="line"></span><br><span class="line">    ssl_dhparam /etc/ssl/private/dhparam.pem;</span><br><span class="line"></span><br><span class="line">    ssl_protocols TLSv1 TLSv1.1 TLSv1.2;</span><br><span class="line"></span><br><span class="line">    # 一般推荐使用的ssl_ciphers值: https://wiki.mozilla.org/Security/Server_Side_TLS</span><br><span class="line">    ssl_ciphers &apos;ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-AES256-GCM-SHA384:DHE-RSA-AES128-GCM-SHA256:DHE-DSS-AES128-GCM-SHA256:kEDH+AESGCM:ECDHE-RSA-AES128-SHA256:ECDHE-ECDSA-AES128-SHA256:ECDHE-RSA-AES128-SHA:ECDHE-ECDSA-AES128-SHA:ECDHE-RSA-AES256-SHA384:ECDHE-ECDSA-AES256-SHA384:ECDHE-RSA-AES256-SHA:ECDHE-ECDSA-AES256-SHA:DHE-RSA-AES128-SHA256:DHE-RSA-AES128-SHA:DHE-DSS-AES128-SHA256:DHE-RSA-AES256-SHA256:DHE-DSS-AES256-SHA:DHE-RSA-AES256-SHA:AES128-GCM-SHA256:AES256-GCM-SHA384:AES128:AES256:AES:DES-CBC3-SHA:HIGH:!aNULL:!eNULL:!EXPORT:!DES:!RC4:!MD5:!PSK&apos;;</span><br><span class="line"></span><br><span class="line">    ssl_prefer_server_ciphers on;</span><br><span class="line"></span><br><span class="line">    error_page  404              /404.html;</span><br><span class="line">    error_page  500 502 503 504  /50x.html;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">// 如果是代理</span><br><span class="line">server &#123;</span><br><span class="line">    listen        443   ssl;</span><br><span class="line">    server_name   【域名】;</span><br><span class="line">    location /&#123;</span><br><span class="line">        proxy_redirect off;</span><br><span class="line">        proxy_set_header Host $host;</span><br><span class="line">        proxy_set_header X-Real-IP $remote_addr;</span><br><span class="line">        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;</span><br><span class="line">        proxy_pass http://127.0.0.1:【端口】;</span><br><span class="line">    &#125;</span><br><span class="line">    location /static&#123;</span><br><span class="line">        // 注意“/”的使用</span><br><span class="line">        alias   【static 路径】/;</span><br><span class="line">        index  index.html;</span><br><span class="line">    &#125;</span><br><span class="line">    access_log  【log 路径】/access_log.log;</span><br><span class="line">    error_log   【log 路径】/error_log.log;</span><br><span class="line"></span><br><span class="line">    ssl_certificate        /etc/letsencrypt/live/【域名】/fullchain.pem;</span><br><span class="line">        ssl_certificate_key    /etc/letsencrypt/live/【域名】/privkey.pem;</span><br><span class="line"></span><br><span class="line">        ssl_session_timeout 1d;</span><br><span class="line">        ssl_session_cache shared:SSL:50m;</span><br><span class="line">        ssl_session_tickets on;</span><br><span class="line"></span><br><span class="line">        ssl_dhparam /etc/ssl/private/dhparam.pem;</span><br><span class="line"></span><br><span class="line">        ssl_protocols TLSv1 TLSv1.1 TLSv1.2;</span><br><span class="line"></span><br><span class="line">        # 一般推荐使用的ssl_ciphers值: https://wiki.mozilla.org/Security/Server_Side_TLS</span><br><span class="line">        ssl_ciphers &apos;ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-AES256-GCM-SHA384:DHE-RSA-AES128-GCM-SHA256:DHE-DSS-AES128-GCM-SHA256:kEDH+AESGCM:ECDHE-RSA-AES128-SHA256:ECDHE-ECDSA-AES128-SHA256:ECDHE-RSA-AES128-SHA:ECDHE-ECDSA-AES128-SHA:ECDHE-RSA-AES256-SHA384:ECDHE-ECDSA-AES256-SHA384:ECDHE-RSA-AES256-SHA:ECDHE-ECDSA-AES256-SHA:DHE-RSA-AES128-SHA256:DHE-RSA-AES128-SHA:DHE-DSS-AES128-SHA256:DHE-RSA-AES256-SHA256:DHE-DSS-AES256-SHA:DHE-RSA-AES256-SHA:AES128-GCM-SHA256:AES256-GCM-SHA384:AES128:AES256:AES:DES-CBC3-SHA:HIGH:!aNULL:!eNULL:!EXPORT:!DES:!RC4:!MD5:!PSK&apos;;</span><br><span class="line"></span><br><span class="line">        ssl_prefer_server_ciphers on;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">// 测试 nginx 配置</span><br><span class="line">nginx -t</span><br><span class="line">// 重启 nginx 服务</span><br><span class="line">nginx -s reload</span><br></pre></td></tr></table></figure>


          
        
      
    </div>

    
    
    
      <footer class="post-footer">
          <div class="post-eof"></div>
        
      </footer>
  </div>
  
  
  
  </article>

    
      

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/11/23/解决-Idea-下-Tomcat-出现-“至少有一个JAR被扫描用于TLD但尚未包含TLD。”/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="ZHL">
      <meta itemprop="description" content="我的博客">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ZHL的博客">
    </span>
      <header class="post-header">

        
          <h1 class="post-title" itemprop="name headline">
              
              <a href="/2019/11/23/解决-Idea-下-Tomcat-出现-“至少有一个JAR被扫描用于TLD但尚未包含TLD。”/" class="post-title-link" itemprop="url">解决 Idea 下 Tomcat 出现 “至少有一个JAR被扫描用于TLD但尚未包含TLD。”</a>
            
          </h1>
        

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              
                
              

              <time title="创建时间：2019-11-23 08:33:22" itemprop="dateCreated datePublished" datetime="2019-11-23T08:33:22+08:00">2019-11-23</time>
            </span>
          
            

            
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-01-30 20:37:41" itemprop="dateModified" datetime="2020-01-30T20:37:41+08:00">2020-01-30</time>
              </span>
            
          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Tomcat/" itemprop="url" rel="index"><span itemprop="name">Tomcat</span></a></span>

                
                
              
            </span>
          

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          
            <h1 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h1><ol>
<li><a href="https://blog.csdn.net/qqqnzhky/article/details/80563823" target="_blank" rel="noopener">什么是.tld文件</a></li>
<li><a href="https://oomake.com/question/4033038" target="_blank" rel="noopener">如何修复JSP编译器警告：一个JAR被扫描用于TLD但尚未包含TLD？</a></li>
</ol>
<p>感谢以上作者的分享</p>
<h1 id="现象"><a href="#现象" class="headerlink" title="现象"></a>现象</h1><p>启动 Tomcat 很慢，出现 “至少有一个JAR被扫描用于TLD但尚未包含TLD”提示。</p>
<h1 id="分析原因"><a href="#分析原因" class="headerlink" title="分析原因"></a>分析原因</h1><p>TLD(Tag library descriptors)，即“标签库描述文件”，页面中实现 JSP 标签，必须首先定义实现标签的类，然后在标签库描述文件（TLD）中将写好的类映射成 JSP 标签,最后在 JSP 文件中使用定义好的标签，就可以生成动态的 JSP 内容【1】。</p>
<p>出现此现象，Tomcat 也给出了建议：为此记录器启用调试日志记录，以获取已扫描但未在其中找到 TLD 的完整 JAR 列表。 在扫描期间跳过不需要的 JAR 可以缩短启动时间和 JSP 编译时间。</p>
<h1 id="解决办法"><a href="#解决办法" class="headerlink" title="解决办法"></a>解决办法</h1><ol>
<li>启用调试日志记录：在 Tomcat 安装目录/conf/logging.properties 文件末尾添加 <code>org.apache.jasper.servlet.TldScanner.level = FINE</code>。再启动 Tomcat 后出现很多扫描了但是不包含 TLD 的 jar。</li>
<li>将这些 jar 添加到 Tomcat 安装目录/conf/catalina.properties 文件的 <code>tomcat.util.scan.StandardJarScanFilter.jarsToSkip</code> 标签中。</li>
</ol>
<p>注意：如果你没有使用 JSP，那可以直接设置 <code>tomcat.util.scan.StandardJarScanFilter.jarsToSkip = *.jar</code>。</p>

          
        
      
    </div>

    
    
    
      <footer class="post-footer">
          <div class="post-eof"></div>
        
      </footer>
  </div>
  
  
  
  </article>

    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>


          </div>
          

        </div>
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      <div class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">

          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image"
      src="/images/avatar.png"
      alt="ZHL">
  <p class="site-author-name" itemprop="name">ZHL</p>
  <div class="site-description motion-element" itemprop="description">我的博客</div>
</div>
  <nav class="site-state motion-element">
      <div class="site-state-item site-state-posts">
        
          <a href="/archives/">
        
          <span class="site-state-item-count">29</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
    
      
      
      <div class="site-state-item site-state-categories">
        
          
            <a href="/categories/">
          
        
        
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
        <span class="site-state-item-count">21</span>
        <span class="site-state-item-name">分类</span>
        </a>
      </div>
    
      
      
      <div class="site-state-item site-state-tags">
        
          
            <a href="/tags/">
          
        
        
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
        <span class="site-state-item-count">45</span>
        <span class="site-state-item-name">标签</span>
        </a>
      </div>
    
  </nav>



        </div>
      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2020</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">ZHL</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io" class="theme-link" rel="noopener" target="_blank">Hexo</a> 强力驱动 v3.9.0</div>
  <span class="post-meta-divider">|</span>
  <div class="theme-info">主题 – <a href="https://theme-next.org" class="theme-link" rel="noopener" target="_blank">NexT.Mist</a> v7.3.0</div>

        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <span class="post-meta-item-icon">
      <i class="fa fa-user"></i>
    </span>
    <span class="site-uv" title="总访客量">
      <span class="busuanzi-value" id="busuanzi_value_site_uv"></span>
    </span>
  
    <span class="post-meta-divider">|</span>
  
    <span class="post-meta-item-icon">
      <i class="fa fa-eye"></i>
    </span>
    <span class="site-pv" title="总访问量">
      <span class="busuanzi-value" id="busuanzi_value_site_pv"></span>
    </span>
  
</div>








        
      </div>
    </footer>
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
      </div>

    

  </div>

  
  <script src="/lib/jquery/index.js?v=3.4.1"></script>
  <script src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  <script src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

<script src="/js/utils.js?v=7.3.0"></script>
  <script src="/js/motion.js?v=7.3.0"></script>


  <script src="/js/schemes/muse.js?v=7.3.0"></script>



<script src="/js/next-boot.js?v=7.3.0"></script>




  





























  

  

  


  
    

</body>
</html>
