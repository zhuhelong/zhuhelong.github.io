<!DOCTYPE html>





<html class="theme-next mist use-motion" lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="generator" content="Hexo 3.9.0">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=7.3.0">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon.ico?v=7.3.0">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-x16.ico?v=7.3.0">
  <link rel="mask-icon" href="/images/logo.svg?v=7.3.0" color="#222">

<link rel="stylesheet" href="/css/main.css?v=7.3.0">


<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css?v=4.7.0">


<script id="hexo-configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    version: '7.3.0',
    exturl: false,
    sidebar: {"position":"left","display":"post","offset":12,"onmobile":false},
    back2top: {"enable":true,"sidebar":false,"scrollpercent":false},
    save_scroll: false,
    copycode: {"enable":false,"show_result":false,"style":null},
    fancybox: false,
    mediumzoom: false,
    lazyload: false,
    pangu: false,
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    },
    localsearch: {"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},
    path: '',
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    translation: {
      copy_button: '复制',
      copy_success: '复制成功',
      copy_failure: '复制失败'
    }
  };
</script>

  <meta name="description" content="我的博客">
<meta name="keywords" content="ZHL">
<meta property="og:type" content="website">
<meta property="og:title" content="ZHL的博客">
<meta property="og:url" content="http://yoursite.com/page/3/index.html">
<meta property="og:site_name" content="ZHL的博客">
<meta property="og:description" content="我的博客">
<meta property="og:locale" content="zh-CN">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="ZHL的博客">
<meta name="twitter:description" content="我的博客">
  <link rel="canonical" href="http://yoursite.com/page/3/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome: true,
    isPost: false,
    isPage: false,
    isArchive: false
  };
</script>

  <title>ZHL的博客</title>
  


  <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?9fd3e2a7c57b3971f3439f9713354241";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>






  <noscript>
  <style>
  .use-motion .motion-element,
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-title { opacity: initial; }

  .use-motion .logo,
  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">

  <div class="container sidebar-position-left">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta">

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">ZHL的博客</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
        <p class="site-subtitle">love-wh</p>
      
  </div>

  <div class="site-nav-toggle">
    <button aria-label="切换导航栏">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>


<nav class="site-nav">
  
  <ul id="menu" class="menu">
      
      
      
        
        <li class="menu-item menu-item-home">
      
    

    <a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i> <br>首页</a>

  </li>
      
      
      
        
        <li class="menu-item menu-item-about">
      
    

    <a href="/about/" rel="section"><i class="menu-item-icon fa fa-fw fa-user"></i> <br>关于</a>

  </li>
      
      
      
        
        <li class="menu-item menu-item-tags">
      
    

    <a href="/tags/" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i> <br>标签</a>

  </li>
      
      
      
        
        <li class="menu-item menu-item-categories">
      
    

    <a href="/categories/" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i> <br>分类</a>

  </li>
      
      
      
        
        <li class="menu-item menu-item-archives">
      
    

    <a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i> <br>归档</a>

  </li>
  </ul>

    

</nav>
</div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content page-home">
            
  <section id="posts" class="posts-expand">
      

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/08/12/DICOM-基础知识/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="ZHL">
      <meta itemprop="description" content="我的博客">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ZHL的博客">
    </span>
      <header class="post-header">

        
          <h1 class="post-title" itemprop="name headline">
              
              <a href="/2019/08/12/DICOM-基础知识/" class="post-title-link" itemprop="url">DICOM 基础知识</a>
            
          </h1>
        

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              
                
              

              <time title="创建时间：2019-08-12 15:39:32" itemprop="dateCreated datePublished" datetime="2019-08-12T15:39:32+08:00">2019-08-12</time>
            </span>
          
            

            
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2019-10-09 21:28:17" itemprop="dateModified" datetime="2019-10-09T21:28:17+08:00">2019-10-09</time>
              </span>
            
          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/DICOM/" itemprop="url" rel="index"><span itemprop="name">DICOM</span></a></span>

                
                
              
            </span>
          

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          
            <h1 id="数据结构中的包含关系"><a href="#数据结构中的包含关系" class="headerlink" title="数据结构中的包含关系"></a>数据结构中的包含关系</h1><p><img src="/2019/08/12/DICOM-基础知识/Normal-SOP.png" alt="Normal SOP"></p>
<p>Normal SOP 中只包含一个 IOE。</p>
<p><img src="/2019/08/12/DICOM-基础知识/Composite-SOP.png" alt="Composite SOP"></p>
<p>Composite SOP 中包含多个 IOE。</p>
<h1 id="通信过程"><a href="#通信过程" class="headerlink" title="通信过程"></a>通信过程</h1><p><img src="/2019/08/12/DICOM-基础知识/通信过程.png" alt="通信过程"></p>
<p>DICOM PDU 的作用在于 AE 间建立基础通信后，AE 间确认建立连接，确认建立连接过程包含“统一”的过程，即双方协商“统一”认可的某些特点条件，经过这个协商，双方才能知道对方的能力和限制，且明确传送的数据编码方式和数据类型。</p>

          
        
      
    </div>

    
    
    
      <footer class="post-footer">
          <div class="post-eof"></div>
        
      </footer>
  </div>
  
  
  
  </article>

    
      

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/08/12/DICOM-文件编码/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="ZHL">
      <meta itemprop="description" content="我的博客">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ZHL的博客">
    </span>
      <header class="post-header">

        
          <h1 class="post-title" itemprop="name headline">
              
              <a href="/2019/08/12/DICOM-文件编码/" class="post-title-link" itemprop="url">DICOM 文件编码</a>
            
          </h1>
        

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              
                
              

              <time title="创建时间：2019-08-12 13:41:46" itemprop="dateCreated datePublished" datetime="2019-08-12T13:41:46+08:00">2019-08-12</time>
            </span>
          
            

            
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2019-10-09 21:28:17" itemprop="dateModified" datetime="2019-10-09T21:28:17+08:00">2019-10-09</time>
              </span>
            
          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/DICOM/" itemprop="url" rel="index"><span itemprop="name">DICOM</span></a></span>

                
                
              
            </span>
          

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          
            <p>剪切出一段 DICOM 文件的编码出来，增强对 DICOM 文件编码的理解。</p>
<table>
<thead>
<tr>
<th>文件二进制内容（采用十六进制展示）</th>
<th>Tag</th>
<th>VR</th>
<th>VL</th>
<th>Value</th>
<th>备注</th>
</tr>
</thead>
<tbody><tr>
<td>00 00 00 …… 00</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td>128 字节导言</td>
</tr>
<tr>
<td>44 49 43 4D</td>
<td></td>
<td></td>
<td></td>
<td>DICM</td>
<td>DICOM 文件的标志</td>
</tr>
<tr>
<td>02 00 00 00 55 4C 04 00 A8 00 00 00</td>
<td>0002,0000</td>
<td>UL</td>
<td>4</td>
<td>168</td>
<td>Group Length</td>
</tr>
<tr>
<td>02 00 01 00 4F 42 00 00 02 00 00 00 00 01</td>
<td>0002,0001</td>
<td>OB</td>
<td>2</td>
<td>00\01</td>
<td>File Meta Information Version</td>
</tr>
<tr>
<td>……</td>
<td>……</td>
<td>……</td>
<td>……</td>
<td></td>
<td>……</td>
</tr>
<tr>
<td>08 00 20 00 08 00 00 00 31 39  39 35 30 36 30 38</td>
<td>0008,0020</td>
<td>DA</td>
<td>8</td>
<td>19950608</td>
<td>Study Data</td>
</tr>
<tr>
<td>……</td>
<td>……</td>
<td>……</td>
<td>……</td>
<td></td>
<td>……</td>
</tr>
</tbody></table>
<p>其中前 2 个内容（128 字节全 00 导言 + DICOM 文件标志“DICM”）为标准 DICOM 文件的文件头。</p>
<p>后续 3 个列出来的内容为数据元素，分别包含显式值表示法 2 字节长的 VL，显式值表示法 4 字节长的 VL 和 隐式值表示法不标明 VL。</p>
<p>第 1 条 <code>02 00 00 00 55 4C 04 00 A8 00 00 00</code> 的解析：</p>
<p><code>02 00 00 00 55 4C 04 00 A8 00 00 00</code> 切成：<br><code>02 00 00 00</code>, <code>55 4C</code>, <code>04 00</code>, <code>A8 00 00 00</code></p>
<table>
<thead>
<tr>
<th>属性</th>
<th>二进制值<br>（采用十六进制展示）</th>
<th>解析值</th>
<th>备注</th>
</tr>
</thead>
<tbody><tr>
<td>Tag</td>
<td>02 00 00 00</td>
<td>0002,0000</td>
<td>标签采用 Little Endian 编码，以 2 个字节断开，转码后即 00 02, 00 00</td>
</tr>
<tr>
<td>VR</td>
<td>55 4C</td>
<td>UL</td>
<td>由 ASCII 转码得到结果</td>
</tr>
<tr>
<td>VL</td>
<td>04 00</td>
<td>4</td>
<td>由于是显式值表示法，所以 VL 长度为 2 个字节，采用 Little Endian 编码，转码后即 00 04，得值为 4</td>
</tr>
<tr>
<td>Value</td>
<td>A8 00 00 00</td>
<td>168</td>
<td>采用 Little Endian 编码，转码后即 00 00 00 A8，得值为 168</td>
</tr>
</tbody></table>
<p>第 2 条 <code>02 00 01 00 4F 42 00 00 02 00 00 00 00 01</code> 的解析：</p>
<p><code>02 00 01 00 4F 42 00 00 02 00 00 00 00 01</code> 切成：<br><code>02 00 01 00</code>, <code>4F 42</code>, <code>00 00 02 00</code>, <code>00 00 00 01</code></p>
<table>
<thead>
<tr>
<th>属性</th>
<th>二进制值<br>（采用十六进制展示）</th>
<th>解析值</th>
<th>备注</th>
</tr>
</thead>
<tbody><tr>
<td>Tag</td>
<td>02 00 01 00</td>
<td>0002,0001</td>
<td>标签采用 Little Endian 编码，以 2 个字节断开，转码后即 00 02, 00 01</td>
</tr>
<tr>
<td>VR</td>
<td>4F 42</td>
<td>OB</td>
<td>由 ASCII 转码得到结果</td>
</tr>
<tr>
<td>VL</td>
<td>00 00 02 00</td>
<td>2</td>
<td>由于是显式值表示法，且 VR 为“OB”（某些 VR 值会导致 VL 长度为 4 个字节），所以 VL 长度为 4 个字节，前面 2 个字节 00 00 丢弃（这是规定），后两个字节采用 Little Endian 编码，转码后即 00 02，得值为 2</td>
</tr>
<tr>
<td>Value</td>
<td>00 00 00 01</td>
<td>00\01</td>
<td>该值无需解析</td>
</tr>
</tbody></table>
<p>第 3 条 <code>08 00 20 00 08 00 00 00 31 39 39 35 30 36 30 38</code> 的解析：</p>
<p><code>08 00 20 00 08 00 00 00 31 39 39 35 30 36 30 38</code> 切成：<br><code>08 00 20 00</code>, <code>08 00 00 00</code>, <code>31 39 39 35 30 36 30 38</code></p>
<table>
<thead>
<tr>
<th>属性</th>
<th>二进制值<br>（采用十六进制展示）</th>
<th>解析值</th>
<th>备注</th>
</tr>
</thead>
<tbody><tr>
<td>Tag</td>
<td>08 00 20 00</td>
<td>0008,0020</td>
<td>标签采用 Little Endian 编码，以 2 个字节断开，转码后即 00 08, 00 20</td>
</tr>
<tr>
<td>VR</td>
<td>无</td>
<td>DA</td>
<td>由于该标签代表 Study Data（某些标签固定 VR，所以无需显式说明 VR），所以隐式表明 VR 为“DA”</td>
</tr>
<tr>
<td>VL</td>
<td>08 00 00 00</td>
<td>8</td>
<td>由于是隐式值表示法，所以 VL 长度为 4 个字节，采用 Little Endian 编码，转码后即 00 00 00 08，得值为 8</td>
</tr>
<tr>
<td>Value</td>
<td>31 39 39 35 30 36 30 38</td>
<td>19950608</td>
<td>由 ASCII 转码得到结果</td>
</tr>
</tbody></table>

          
        
      
    </div>

    
    
    
      <footer class="post-footer">
          <div class="post-eof"></div>
        
      </footer>
  </div>
  
  
  
  </article>

    
      

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/08/10/DICOM-专业术语列表/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="ZHL">
      <meta itemprop="description" content="我的博客">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ZHL的博客">
    </span>
      <header class="post-header">

        
          <h1 class="post-title" itemprop="name headline">
              
              <a href="/2019/08/10/DICOM-专业术语列表/" class="post-title-link" itemprop="url">DICOM 专业术语列表</a>
            
          </h1>
        

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              
                
              

              <time title="创建时间：2019-08-10 12:11:53" itemprop="dateCreated datePublished" datetime="2019-08-10T12:11:53+08:00">2019-08-10</time>
            </span>
          
            

            
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2019-10-09 21:28:17" itemprop="dateModified" datetime="2019-10-09T21:28:17+08:00">2019-10-09</time>
              </span>
            
          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/DICOM/" itemprop="url" rel="index"><span itemprop="name">DICOM</span></a></span>

                
                
              
            </span>
          

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          
            <p>给出 DICOM 的一些简写和全称以及翻译，只是个人翻译，如有有更优的翻译或翻译有误，欢迎提出和指正。</p>
<p><strong>格式：</strong></p>
<ol>
<li>符号：&lt;，表示与右前方一格相同。</li>
<li>符号：-，不表示单词间换行连接符，表其原本语义。</li>
</ol>
<table>
<thead>
<tr>
<th>简写</th>
<th>全称</th>
<th>翻译，或包含含义</th>
</tr>
</thead>
<tbody><tr>
<td>DICOM</td>
<td>Digital Imaging and Communications in Medicine</td>
<td>医学数字成像与通信</td>
</tr>
<tr>
<td>PACS</td>
<td>Picture Archiving and Communication System</td>
<td>医学影像存档与通信系统</td>
</tr>
<tr>
<td>HIS</td>
<td>Hospital Information System</td>
<td>医院信息系统</td>
</tr>
<tr>
<td>RIS</td>
<td>Radiology Information System</td>
<td>放射科信息系统</td>
</tr>
<tr>
<td>IOD</td>
<td>Information Object Definitions</td>
<td>信息对象定义</td>
</tr>
<tr>
<td>IOE</td>
<td>Information Object Entity</td>
<td>信息对象实体。类似于面向对象编程中，IOD 就是类，IOE 就是实例</td>
</tr>
<tr>
<td>Normal IOD</td>
<td>&lt;</td>
<td>标准 IOD。只包含单个信息实体的信息对象定义</td>
</tr>
<tr>
<td>Composite IOD</td>
<td>&lt;</td>
<td>复合 IOD。包含一个以上的<strong>相关</strong>信息实体的信息对象定义</td>
</tr>
<tr>
<td>VR</td>
<td>Value Representation</td>
<td>值表示法。可理解为数据类型，分为隐式值表示法和显式值表示法。隐式值表示法：预先规定表示方法，从数据字典中查找，对应 VL 为 4 个字节。显式值表示法：用两个字符指明表示方法，对应 VL 为 2 个字节，当显式值表示法为 OB、OW、OF、UT、SQ 或 UN 时，VL 拓展为 4 个字节，其中紧跟着的 2 个字节为 0000H</td>
</tr>
<tr>
<td>VM</td>
<td>Value Multiplicity</td>
<td>值重度。数据元素的 VM 指定可以在该数据元素的值字段中编码的值的数量。当数据元素具有多个值时，字符串类型的值使用“\”来分隔</td>
</tr>
<tr>
<td>VL</td>
<td>Value Length</td>
<td>值长度。其中有未定义长度，一般用于 VR 为 SQ 时，此时 VL 为 FFFFFFFFH</td>
</tr>
<tr>
<td>LUT</td>
<td>Look Up Table</td>
<td>查表法</td>
</tr>
<tr>
<td>IOM</td>
<td>Information Object Module</td>
<td>信息对象模块</td>
</tr>
<tr>
<td>SCP</td>
<td>Service Class Provider</td>
<td>服务提供者</td>
</tr>
<tr>
<td>SCU</td>
<td>Service Class User</td>
<td>服务使用者</td>
</tr>
<tr>
<td>DICOM Service Element</td>
<td>&lt;</td>
<td>DICOM 服务元素（分为 DIMSE 和 DISSE）</td>
</tr>
<tr>
<td>DIMSE</td>
<td>DICOM Message Service Elements</td>
<td>DICOM 消息服务元素。都是证实型服务，包含：DIMSE-C、DIMSE-N</td>
</tr>
<tr>
<td>DISSE</td>
<td>DICOM Storage Service Elements</td>
<td>DICOM 存储服务元素</td>
</tr>
<tr>
<td>SE</td>
<td>Service Element</td>
<td>服务元素。对特点 SOP 类的信息对象实施的基本操作</td>
</tr>
<tr>
<td>SG</td>
<td>Service Group</td>
<td>服务组。属于一个 SOP 类的一组服务元素</td>
</tr>
<tr>
<td>SOP</td>
<td>Service Object Pair</td>
<td>服务对象对。（Normal IOD 或 Composite IOD）+ SG（SG 中只含 DIMSE）</td>
</tr>
<tr>
<td>Service Class Specification</td>
<td>&lt;</td>
<td>服务类规范。由多个 SOP Class 有规律组成</td>
</tr>
<tr>
<td>AE</td>
<td>Application Entity</td>
<td>应用实体。就是各种设备，既可是实体硬件设备，也可是软件</td>
</tr>
<tr>
<td>AET</td>
<td>Application Entity Title</td>
<td>应用实体标题</td>
</tr>
<tr>
<td>IE</td>
<td>Information Entity</td>
<td>信息实体。现实世界中单一事物（如一幅图像，一个病人等）的一组信息的整体称谓</td>
</tr>
<tr>
<td>Modality</td>
<td>&lt;</td>
<td><strong>特指</strong>成像设备</td>
</tr>
<tr>
<td>Study</td>
<td>&lt;</td>
<td><strong>特指</strong>一次检查</td>
</tr>
<tr>
<td>DIMSE-C</td>
<td>DIMSE Composite SOP Service</td>
<td>DIMSE 对复合 SOP 的服务。一般由一个 DIMSE 服务使用者向另一个对等 DIMSE 服务使用者发起，包含：C-STORE、C-FIND、C-GET、C-MOVE、C-ECHO、C-CANCEL</td>
</tr>
<tr>
<td>C-STORE</td>
<td>Composite SOP Store</td>
<td>复合 SOP 请求存储</td>
</tr>
<tr>
<td>C-FIND</td>
<td>Composite SOP Find</td>
<td>复合 SOP 请求查找</td>
</tr>
<tr>
<td>C-GET</td>
<td>Composite SOP Get</td>
<td>复合 SOP 请求获取</td>
</tr>
<tr>
<td>C-MOVE</td>
<td>Composite SOP Move</td>
<td>复合 SOP 请求迁移。只是请求，具体传输需要使用 C-STORE</td>
</tr>
<tr>
<td>C-ECHO</td>
<td>Composite SOP Echo</td>
<td>复合 SOP 发现服务。echo 有回声的意思，该服务用于判断对等 DIMSE 服务使用者之间的通讯是否存在</td>
</tr>
<tr>
<td>C-CANCEL</td>
<td>Composite SOP Cancel</td>
<td>复合 SOP 取消服务。信息对象实体无操作时返回</td>
</tr>
<tr>
<td>DIMSE-N</td>
<td>DIMSE Normal SOP Service</td>
<td>DIMSE 对标准 SOP的服务。一般由一个 DIMSE 服务使用者向另一个对等 DIMSE 服务使用者发起，包含：N-EVENT-REPORT、N-GET、N-SET、N-ACTION、N-CREATE、N-DELETE</td>
</tr>
<tr>
<td>N-EVENT-REPORT</td>
<td>Normal SOP Event Report</td>
<td>标准 SOP 报告服务。由一个 DIMSE 服务使用者激活，向对等 DIMSE 服务使用者报告有关某个 SOP 实例的事件，该服务为证实服务，需要等待响应。</td>
</tr>
<tr>
<td>N-GET</td>
<td>Normal SOP Get</td>
<td>标准 SOP 请求检索信息</td>
</tr>
<tr>
<td>N-SET</td>
<td>Normal SOP Set</td>
<td>标准 SOP 请求修改信息</td>
</tr>
<tr>
<td>N-ACTION</td>
<td>Normal SOP Action</td>
<td>标准 SOP 请求执行某个动作</td>
</tr>
<tr>
<td>N-CREATE</td>
<td>Normal SOP Create</td>
<td>标准 SOP 请求创建某个 SOP 类的一个实例</td>
</tr>
<tr>
<td>N-DELETE</td>
<td>Normal SOP Delete</td>
<td>标准 SOP 请求删除某个 SOP 类的一个实例</td>
</tr>
<tr>
<td>UID</td>
<td>Unique IDentifier</td>
<td>唯一标识符</td>
</tr>
<tr>
<td>FSC</td>
<td>File Set Creator</td>
<td>文件集生成器</td>
</tr>
<tr>
<td>FSR</td>
<td>File Set Reader</td>
<td>文件集阅读器</td>
</tr>
<tr>
<td>FSU</td>
<td>FIle Set Update</td>
<td>文件集更新器</td>
</tr>
<tr>
<td>OSI model</td>
<td>Open System Interconnection Reference Model</td>
<td>开放式系统互联通信参考模型</td>
</tr>
<tr>
<td>IOS</td>
<td>International Organization for Standardization</td>
<td>国际标准化组织</td>
</tr>
<tr>
<td>PCI</td>
<td>Protocol Control Information</td>
<td>协议控制信息</td>
</tr>
<tr>
<td>ICI</td>
<td>Interface Control Information</td>
<td>接口控制信息</td>
</tr>
<tr>
<td>IDU</td>
<td>Interface Data Unit</td>
<td>接口数据单元</td>
</tr>
<tr>
<td>ACSE</td>
<td>Association Control Service Element</td>
<td>关联控制服务元素</td>
</tr>
<tr>
<td>ULP</td>
<td>Upper Layer Protocol</td>
<td>上层协议</td>
</tr>
<tr>
<td>PDU</td>
<td>Protocol Data Unit</td>
<td>协议数据单元</td>
</tr>
<tr>
<td>A-ASSOCIATE</td>
<td>&lt;</td>
<td>连接。AE 间建立连接</td>
</tr>
<tr>
<td>A-RELEASE</td>
<td>&lt;</td>
<td>释放连接。AE 间释放连接</td>
</tr>
<tr>
<td>A-ABORT</td>
<td>&lt;</td>
<td>异常终止。AE 间发现异常后强制终止</td>
</tr>
<tr>
<td>A-DATA</td>
<td>&lt;</td>
<td>数据传输。AE 间数据传输</td>
</tr>
<tr>
<td>A-P-ABORT</td>
<td>&lt;</td>
<td>通知异常终止。AE 间通知连接的异常终止</td>
</tr>
<tr>
<td>A-ASSOCIATE-RQ</td>
<td>Associate Request</td>
<td>连接请求</td>
</tr>
<tr>
<td>A-ASSOCIATE-AC</td>
<td>Associate Accept</td>
<td>连接接受</td>
</tr>
<tr>
<td>A-ASSOCIATE-RJ</td>
<td>Associate Reject</td>
<td>连接拒绝</td>
</tr>
<tr>
<td>A-RELEASE-RQ</td>
<td>Release Request</td>
<td>释放连接请求</td>
</tr>
<tr>
<td>A-RELEASE-RP</td>
<td>Release Respond</td>
<td>释放连接回应</td>
</tr>
<tr>
<td>A-ABORT</td>
<td>Abort</td>
<td>中断</td>
</tr>
<tr>
<td>P-DATA-TF</td>
<td>Data Transfer</td>
<td>数据传输</td>
</tr>
<tr>
<td>PDV</td>
<td>Presentation Data Value</td>
<td>表示数据值？表达资料值？演示数据值？</td>
</tr>
<tr>
<td>Little Endian</td>
<td>&lt;</td>
<td>低字节序/小端序。按照从低地址到高地址的顺序存放数据的低位字节到高位字节。DICOM 文件中各数据元素排列的顺序按照标签数值 Little Endian 编码</td>
</tr>
<tr>
<td>Big Endian</td>
<td>&lt;</td>
<td>高字节序/大端序。按照从低地址到高地址的顺序存放数据的高位字节到低位字节</td>
</tr>
<tr>
<td>MWL</td>
<td>Modality Worklist</td>
<td>设备工作清单</td>
</tr>
<tr>
<td>MPPS</td>
<td>Modality Performed Procedure Step</td>
<td>设备执行过程的步骤。即能实时查看到设备运行状态</td>
</tr>
<tr>
<td>Storage Commitment</td>
<td>&lt;</td>
<td>SCP 的一种服务，让成像设备在删除图像缓存前可以确认 SCP 上已经安全的存储了该图像</td>
</tr>
<tr>
<td>IHE</td>
<td>Integrating The Healthcare Enterprise</td>
<td>医疗健康信息集成规范</td>
</tr>
</tbody></table>

          
        
      
    </div>

    
    
    
      <footer class="post-footer">
          <div class="post-eof"></div>
        
      </footer>
  </div>
  
  
  
  </article>

    
      

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/08/09/DICOM-的一些疑问/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="ZHL">
      <meta itemprop="description" content="我的博客">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ZHL的博客">
    </span>
      <header class="post-header">

        
          <h1 class="post-title" itemprop="name headline">
              
              <a href="/2019/08/09/DICOM-的一些疑问/" class="post-title-link" itemprop="url">DICOM 的一些疑问</a>
            
          </h1>
        

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              
                
              

              <time title="创建时间：2019-08-09 16:32:25" itemprop="dateCreated datePublished" datetime="2019-08-09T16:32:25+08:00">2019-08-09</time>
            </span>
          
            

            
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2019-10-09 21:28:17" itemprop="dateModified" datetime="2019-10-09T21:28:17+08:00">2019-10-09</time>
              </span>
            
          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/DICOM/" itemprop="url" rel="index"><span itemprop="name">DICOM</span></a></span>

                
                
              
            </span>
          

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          
            <h1 id="DIOCM-的标准文件为什么没有-Part-9-和-Part-13"><a href="#DIOCM-的标准文件为什么没有-Part-9-和-Part-13" class="headerlink" title="DIOCM 的标准文件为什么没有 Part 9 和 Part 13"></a>DIOCM 的标准文件为什么没有 Part 9 和 Part 13</h1><p>从 <a href="https://www.dicomstandard.org/current/" target="_blank" rel="noopener">DICOM 官网</a> 下载的标准文件是没有 Part 9 和 Part 13 的，起初我以为是西方人避讳 13 这个数字，但是 9 这个数字应该不是一个不详的数字吧。</p>
<p>后来在 <a href="http://estore.merge.com/mergecom3/Resources/DICOM/Merge_DICOM_javadoc_v5/doc-files/dicom_intro.html" target="_blank" rel="noopener">这里</a> 找到了答案，原文：</p>
<blockquote>
<p>Part 9 is rarely of interest, as it describes how DICOM messages shall be exchanged using the ‘old’ 50-pin point-to-point connection originally specified in the predecessor to DICOM (ACR/NEMA Version 2). This part has been retired from the DICOM standard.</p>
<p>Part 13 details a point to point protocol for doing print management services. This part has been retired from the DICOM standard.</p>
</blockquote>
<p>原来是老技术被淘汰了，所以标准也将这部分去除了。</p>
<p>顺便把原文全部记下来</p>
<blockquote>
<p>The DICOM (Digital Imaging and Communications in Medicine) Standard was originally developed by a joint committee of the American College of Radiology (ACR) and the National Electrical Manufacturers Association (NEMA) to “facilitate the open exchange of information between digital imaging computer systems in medical environments”.</p>
<p>Since its initial completion in 1993, the standard has taken hold. More and more products are advertising DICOM conformance, and more customers are requiring it. DICOM has also been incorporated as part of a developing European standard by CEN, as a Japanese standard by JIRA, and is increasingly becoming an International Standard.</p>
<p>DICOM Version 3.0 is composed of several hundreds of pages over sixteen separate parts. Each part of the standard focuses on a different aspect of the DICOM protocol:</p>
<ul>
<li>Part 1- Introduction and Overview</li>
<li>Part 2- Conformance</li>
<li>Part 3- Information Object Definitions</li>
<li>Part 4- Service Class Specifications</li>
<li>Part 5- Data Structures and Encoding</li>
<li>Part 6- Data Dictionary</li>
<li>Part 7- Message Exchange</li>
<li>Part 8- Network Communication Support for Message Exchange</li>
<li>Part 9- Point-to-Point Communication Support for Message Exchange (retired)</li>
<li>Part 10- Common Media Storage Functions for Data Interchange</li>
<li>Part 11- Media Storage Application Profiles</li>
<li>Part 12- Media Formats and Physical Media for Data Interchange</li>
<li>Part 13- Print Management Point-to-Point Communication Support (retired)</li>
<li>Part 14- Grayscale Standard Display Function</li>
<li>Part 15- Security Profiles</li>
<li>Part 16- DICOM Content Mapping Resource</li>
<li>Part 17- Explanatory Information</li>
<li>Part 18- Web Access to DICOM Persistent Objects (WADO)</li>
<li>Part 1 of the standard gives an overview of the standard. Since this part was approved before most of the other parts were completed, it is already somewhat outdated and can be confusing.</li>
</ul>
<p>Part 2 describes DICOM conformance and how to write a conformance statement. A conformance statement is important because it allows a network administrator to plan or coordinate a network of DICOM applications. For an application to claim DICOM conformance, it must have an accurate conformance statement.</p>
<p>Parts 3 and 4 define the types of services and information that can be exchanged using DICOM.</p>
<p>Parts 5 and 6 describe how commands and data shall be encoded so that decoding devices can interpret them.</p>
<p>Part 7 describes the structure of the DICOM commands, that along with related data, make up a DICOM message. This part also describes the association negotiation process, whereby two DICOM applications mutually agree upon the services they will perform over the network.</p>
<p>Part 8 describes how the DICOM messages are exchanged over the network using two prominent transport layer protocols; TCP/IP and OSI. This is termed the DICOM Upper Layer Protocol (DICOM UL).</p>
<p>Part 9 is rarely of interest, as it describes how DICOM messages shall be exchanged using the ‘old’ 50-pin point-to-point connection originally specified in the predecessor to DICOM (ACR/NEMA Version 2). This part has been retired from the DICOM standard.</p>
<p>Part 10 describes the DICOM model for the storage of medical imaging information on removable media. It specifies the contents of a DICOM File Set, the format of a DICOM File and the policies associated with the maintenance of a DICOM Media Storage Directory (DICOMDIR) structure.</p>
<p>Part 11 specifies Media Storage Application Profiles that standardizes a number of choices related to a specific clinical need (modality or application). This includes the specification of a specific physical medium and media format (e.g. CD-ROM, 3.5” high-density floppy, …), as well as the types of information (objects) that can be stored within the DICOM File Set. Part 11 also includes useful templates to provide guidance in authoring media application conformance statements.</p>
<p>Part 12 details the characteristics of various physical medium and media formats that are referenced by the Media Storage Application Profiles of Part 11.</p>
<p>While parts 11 and 12 of DICOM are expected to evolve along with the introduction of new clinical procedures and the advancement of storage media and file system technology, Part 10 should remain quite stable since it specifies file formats organization independent of medical application or storage technology.</p>
<p>Part 13 details a point to point protocol for doing print management services. This part has been retired from the DICOM standard.</p>
<p>Part 14 specifies a standardized display function for display of grayscale images.</p>
<p>Part 15 specifies Security Profiles to which implementations may claim conformance. Profiles are defined for secure network transfers and secure media.</p>
<p>Part 16 specifies the DICOM Content Mapping Resource (DCMR) which defines the templates and context groups used elsewhere in the standard.</p>
<p>Part 17 consolidates informative information previously contained in other parts of the standard. It is composed of several annexes describing the use of the standard.</p>
<p>Part 18 specifies a web-based service for accessing and presenting DICOM persistent objects (e.g. images, medical imaging reports).</p>
<p>As a user of this toolkit, you should have access to the DICOM Standard. Merge DICOM Toolkit takes care of most of the details of DICOM for you. However, the standard is the final word. You will probably find Parts 2 to 6 most useful. The DICOM Standard can be ordered from:</p>
<p>NEMA, 1300 N. 17th Street, Suite 1847, Rosslyn, VA 22209, USA</p>
<p>or downloaded from <a href="http://medical.nema.org" target="_blank" rel="noopener">http://medical.nema.org</a>.</p>
<p>The DICOM Standard is typically published every other year. Each version includes approved changes since the last publishing.</p>
<p>Please note: The DICOM Standard is evolving so rapidly, that additions to the Standard are published as supplements. If you find that this document references a part of the Standard and you cannot find what you are looking for in that part, you probably need to get the proper supplement from NEMA. Other additions to the Standard (e.g., new image objects or documents) will also be published as supplements. NEMA also makes all supplements to the standard freely available on their ftp server.</p>
</blockquote>

          
        
      
    </div>

    
    
    
      <footer class="post-footer">
          <div class="post-eof"></div>
        
      </footer>
  </div>
  
  
  
  </article>

    
      

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/08/08/记录-Hexo-图片的坑/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="ZHL">
      <meta itemprop="description" content="我的博客">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ZHL的博客">
    </span>
      <header class="post-header">

        
          <h1 class="post-title" itemprop="name headline">
              
              <a href="/2019/08/08/记录-Hexo-图片的坑/" class="post-title-link" itemprop="url">记录 Hexo 图片的坑</a>
            
          </h1>
        

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              
                
              

              <time title="创建时间：2019-08-08 18:47:47" itemprop="dateCreated datePublished" datetime="2019-08-08T18:47:47+08:00">2019-08-08</time>
            </span>
          
            

            
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2019-10-09 21:28:17" itemprop="dateModified" datetime="2019-10-09T21:28:17+08:00">2019-10-09</time>
              </span>
            
          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Hexo/" itemprop="url" rel="index"><span itemprop="name">Hexo</span></a></span>

                
                
              
            </span>
          

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          
            <h1 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h1><table>
<thead>
<tr>
<th>条目</th>
<th>型号</th>
<th>备注</th>
</tr>
</thead>
<tbody><tr>
<td>系统</td>
<td>Windows 10</td>
<td></td>
</tr>
<tr>
<td>编辑器</td>
<td>Typora 0.9.73(beta)</td>
<td></td>
</tr>
<tr>
<td>Hexo</td>
<td>v3.9.0</td>
<td></td>
</tr>
</tbody></table>
<h1 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h1><p>今天第一次使用 Hexo，感觉还是棒棒哒。但是，很快蛋疼的事情就出现了，插入图片，不显示。</p>
<p><img src="/2019/08/08/记录-Hexo-图片的坑/en.jpg" alt></p>
<p>当时就蒙蔽了，不应该啊，做的这么棒的一款东西，怎么这个还有问题。直接谷歌，发现不是我一个小伙伴出现了这个问题，大家都拿出了自己的解决办法，我试了试，有些地方还是不行，只好自己调教了。</p>
<h1 id="目标"><a href="#目标" class="headerlink" title="目标"></a>目标</h1><ol>
<li>图片上传至 Github。本人不喜欢将图片上传至图床，第一，麻烦；第二，md 文件和资源文件分开放难管理；第三，我鬼知道图床什么时候就 GG 了，😎 Github 总是比图床来的可靠吧！</li>
<li>完全使用 MarkDown 语法。第一，本人懒，不愿意记那么多；第二，我的 Typora 不认其他奇奇怪怪的语法！</li>
<li>能够所见即所得。我在我家 Typora 里是什么样，Push 上 Github 里也应该是什么样！</li>
<li>支持中文！这个，天朝的各位大大都没异议吧！</li>
<li>愉快的编辑。不要有太多繁琐的操作，图片能拖住丢进去，就绝不会打开资源管理器来选！</li>
</ol>
<p><img src="/2019/08/08/记录-Hexo-图片的坑/不要和我说.png" alt></p>
<p>看到这里如果想直接看解决办法，请直接跳转到 <a href="#总结">总结</a>。</p>
<h1 id="开撸"><a href="#开撸" class="headerlink" title="开撸"></a>开撸</h1><p>找了一下别人的解决办法，最后发现只有<a href="https://alreadyright.github.io/2019/06/16/aboutHexo/" target="_blank" rel="noopener">这位仁兄</a>的解决办法可能符合我的要求，既然有巨人，那就站他肩膀上，站得高至少也凉快些嘛。</p>
<h2 id="修改博客配置"><a href="#修改博客配置" class="headerlink" title="修改博客配置"></a>修改博客配置</h2><p>将博客根目录下的文件 <code>_config.yml</code> 中的 <code>post_asset_folder: false</code> 改为 <code>post_asset_folder: true</code>。</p>
<h2 id="装插件-hexo-asset-image"><a href="#装插件-hexo-asset-image" class="headerlink" title="装插件 hexo-asset-image"></a>装插件 hexo-asset-image</h2><p>装一个可以改写文件路径的插件，图片为什么不显示，就是因为路径的问题。cmd 在博客根目录下 <code>npm install hexo-asset-image -–save</code>。</p>
<h2 id="发现问题"><a href="#发现问题" class="headerlink" title="发现问题"></a>发现问题</h2><p>装好插件后装逼写一篇博客来，嗯，标题就写《记录-Hexo-图片的坑》，<code>hexo new &quot;记录-Hexo-图片的坑&quot;</code>，在 <code>博客根目录\source\_posts</code>下多了 <code>记录-Hexo-图片的坑.md</code> 和 <code>记录-Hexo-图片的坑</code> 文件夹。打开 <code>记录-Hexo-图片的坑.md</code>插入图片 <code>![](./记录-Hexo-图片的坑/en.jpg)</code>，<code>hexo clean &amp;&amp; hexo g &amp;&amp; hexo s</code> 一气呵成，<code>localhost:4000</code> 刷起来，😳😳😳图呢？</p>
<p>查看一下图片路径，咦，这路径怎么是 <code>.com/xxx.jpg</code>，程序员的直觉告诉我，事情不对！</p>
<p>再看下<a href="https://alreadyright.github.io/2019/06/16/aboutHexo/" target="_blank" rel="noopener">这位仁兄</a>的博客，奥，插件版本不对，好，改版本！</p>
<h2 id="修改插件-hexo-asset-image-版本"><a href="#修改插件-hexo-asset-image-版本" class="headerlink" title="修改插件 hexo-asset-image 版本"></a>修改插件 hexo-asset-image 版本</h2><p>将博客根目录下的文件 <code>package.json</code> 中的 <code>&quot;hexo-asset-image&quot;: &quot;1.0.0&quot;</code> 修改为 <code>&quot;hexo-asset-image&quot;: &quot;0.0.3&quot;</code>，别问我😁为什么“这位仁兄”的改是 <code>0.0.1</code>，我改的是 <code>0.0.3</code>，因为我任性！其实是因为试过 <code>0.0.3</code> 也是可以的，高版本总是好一点嘛，不知道这里对不对😂😂😂。</p>
<p>改完后<code>npm install &amp;&amp; hexo clean &amp;&amp; hexo g &amp;&amp; hexo s</code> 一气呵成，再 <code>localhost:4000</code> 刷起来，😳😳😳图呢？</p>
<h2 id="路径写法和中文问题"><a href="#路径写法和中文问题" class="headerlink" title="路径写法和中文问题"></a>路径写法和中文问题</h2><p>卧槽，卧槽，卧槽……</p>
<p>我的图呢？不应该啊，再看图片路径，怎么会是 <code>/2019/08/08/记录-Hexo-图片的坑/./%E8%AE%B0%E5%BD%95-Hexo-%E5%9B%BE%E7%89%87%E7%9A%84%E5%9D%91/en.jpg</code></p>
<p>好吧，至少我看到了有部分是对的，没办法，只好看一下插件的源码了。。。。。。</p>
<p>打开源码文件，位于 <code>博客根目录\node_modules\hexo-asset-image\index.js</code> 。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">'use strict'</span>;</span><br><span class="line"><span class="keyword">var</span> cheerio = <span class="built_in">require</span>(<span class="string">'cheerio'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// http://stackoverflow.com/questions/14480345/how-to-get-the-nth-occurrence-in-a-string</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getPosition</span>(<span class="params">str, m, i</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> str.split(m, i).join(m).length;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">hexo.extend.filter.register(<span class="string">'after_post_render'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">data</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">var</span> config = hexo.config;</span><br><span class="line">  <span class="keyword">if</span>(config.post_asset_folder)&#123;</span><br><span class="line">    <span class="keyword">var</span> link = data.permalink;</span><br><span class="line">    <span class="keyword">var</span> beginPos = getPosition(link, <span class="string">'/'</span>, <span class="number">3</span>) + <span class="number">1</span>;</span><br><span class="line">    <span class="comment">// In hexo 3.1.1, the permalink of "about" page is like ".../about/index.html".</span></span><br><span class="line">    <span class="keyword">var</span> endPos = link.lastIndexOf(<span class="string">'/'</span>) + <span class="number">1</span>;</span><br><span class="line">    link = link.substring(beginPos, endPos);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> toprocess = [<span class="string">'excerpt'</span>, <span class="string">'more'</span>, <span class="string">'content'</span>];</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; toprocess.length; i++)&#123;</span><br><span class="line">      <span class="keyword">var</span> key = toprocess[i];</span><br><span class="line"> </span><br><span class="line">      <span class="keyword">var</span> $ = cheerio.load(data[key], &#123;</span><br><span class="line">        ignoreWhitespace: <span class="literal">false</span>,</span><br><span class="line">        xmlMode: <span class="literal">false</span>,</span><br><span class="line">        lowerCaseTags: <span class="literal">false</span>,</span><br><span class="line">        decodeEntities: <span class="literal">false</span></span><br><span class="line">      &#125;);</span><br><span class="line"></span><br><span class="line">      $(<span class="string">'img'</span>).each(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="comment">// For windows style path, we replace '\' to '/'.</span></span><br><span class="line">        <span class="keyword">var</span> src = $(<span class="keyword">this</span>).attr(<span class="string">'src'</span>).replace(<span class="string">'\\'</span>, <span class="string">'/'</span>);   <span class="comment">//---------1</span></span><br><span class="line">        <span class="keyword">if</span>(!<span class="regexp">/http[s]*.*|\/\/.*/</span>.test(src))&#123;</span><br><span class="line">          <span class="comment">// For "about" page, the first part of "src" can't be removed.</span></span><br><span class="line">          <span class="comment">// In addition, to support multi-level local directory.</span></span><br><span class="line">          <span class="keyword">var</span> linkArray = link.split(<span class="string">'/'</span>).filter(<span class="function"><span class="keyword">function</span>(<span class="params">elem</span>)</span>&#123;</span><br><span class="line">            <span class="keyword">return</span> elem != <span class="string">''</span>;</span><br><span class="line">          &#125;);</span><br><span class="line">          <span class="keyword">var</span> srcArray = src.split(<span class="string">'/'</span>).filter(<span class="function"><span class="keyword">function</span>(<span class="params">elem</span>)</span>&#123;</span><br><span class="line">            <span class="keyword">return</span> elem != <span class="string">''</span>;   <span class="comment">//---------2</span></span><br><span class="line">          &#125;);</span><br><span class="line">          <span class="keyword">if</span>(linkArray[linkArray.length - <span class="number">1</span>] == srcArray[<span class="number">0</span>])   <span class="comment">//---------3</span></span><br><span class="line">            srcArray.shift();</span><br><span class="line">          src = srcArray.join(<span class="string">'/'</span>);</span><br><span class="line">          $(<span class="keyword">this</span>).attr(<span class="string">'src'</span>, <span class="string">'/'</span> + link + src);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;);</span><br><span class="line">      data[key] = $.html();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>这代码，应该能改吧，哈哈哈，我承认，第一眼看到，我是蒙蔽的。</p>
<p>仔细看了一下标记 1 处 <code>var src = $(this).attr(&#39;src&#39;).replace(&#39;\\&#39;, &#39;/&#39;);</code>，猜测 <code>src</code> 应该就是我们写的图片的路径，源码的作用是将 Windows 的文件分隔符改为 Unix 类型的文件分隔符，即将 <code>\</code> 改为 <code>/</code>，这没错，也就是说，我在 Typora 中是可以这样 <code>![](.\记录-Hexo-图片的坑\en.jpg)</code> 写图片路径的，非常好！我的 Typora 支持以相对路径插入图片，非常 nice~！不过需要设置，如图设置：<br><img src="/2019/08/08/记录-Hexo-图片的坑/Typora优先使用相对路径.png" alt="Typora优先使用相对路径"></p>
<p>设置好，就能愉快的往 Typora 里直接丢图片了，直接拖进去，才是正确的打开方式！</p>
<p>😳😳😳还是没解决显示图的问题啊！别急，再往下看看，诶！在标记 2 处看出了端倪，原来，我的这种  <code>![](./记录-Hexo-图片的坑/en.jpg)</code> 写法不对！😂😂😂，只能写  <code>![](记录-Hexo-图片的坑/en.jpg)</code> 或   <code>![](/记录-Hexo-图片的坑/en.jpg)</code>，好吧，不支持就不支持吧，那我就写成这样 <code>![](记录-Hexo-图片的坑\en.jpg)</code> 吧。</p>
<p>再试一下，还是没有图！！！😤😤😤结合图片路径，继续看源码！知道原因了，在标记 3 处，源码作者考虑到了我们需要所见即所得，我们带文件夹的路径写法，在这一步，作者判断了有没有写文件夹，如果我们的 MarkDown 中有写（一般都会写好吧，毕竟能所见即所得啊），他通过判断数组变量 <code>linkArray</code> 最后一个值是否与保存着我们写的路径的数组变量 <code>srcArray</code> 的第一个值相等，如果相等，则删除其中一个，然后拼接，对啊，逻辑没有错啊，为什么我还是看不到图片呢？其实是因为中文的原因，中文图片路径做了 <code>URL</code> 编码，我们看到的 <code>%E8%AE%B0%E5%BD%95-Hexo-%E5%9B%BE%E7%89%87%E7%9A%84%E5%9D%91</code> 其实就是 <code>记录-Hexo-图片的坑</code>，知道原因了，就好解决了。</p>
<p>将标记 3 处的 <code>var srcArray = src.split(&#39;/&#39;).filter(function(elem){</code> 改为 <code>var srcArray = decodeURI(src).split(&#39;/&#39;).filter(function(elem){</code>，还有其他的改法，但是我怎么简单怎么来，接着再来一遍猛如虎的操作 <code>hexo clean &amp;&amp; hexo g &amp;&amp; hexo s</code>，<code>localhost:4000</code> 刷起来。</p>
<p>有图片了，舒服~</p>
<h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><ol>
<li>将博客根目录下的文件 <code>_config.yml</code> 中的 <code>post_asset_folder: false</code> 改为 <code>post_asset_folder: true</code>。</li>
<li>cmd 在博客根目录下 <code>npm install hexo-asset-image -–save</code>。</li>
<li>将博客根目录下的文件 <code>package.json</code> 中的 <code>&quot;hexo-asset-image&quot;: &quot;1.0.0&quot;</code> 修改为 <code>&quot;hexo-asset-image&quot;: &quot;0.0.3&quot;</code>，在博客根目录下 cmd <code>npm install</code>；</li>
<li>修改 <code>博客根目录\node_modules\hexo-asset-image\index.js</code> 文件中的第 38 行为 <code>var srcArray = decodeURI(src).split(&#39;/&#39;).filter(function(elem){</code>；</li>
<li>在博客根目录下 cmd  <code>hexo clean &amp;&amp; hexo g &amp;&amp; hexo s</code>，完成。</li>
</ol>
<p><strong>注意：图片地址只能写成 <code>/目录/xxx.jpg</code>、<code>目录/xxx.jpg</code>、<code>目录\xxx.jpg</code> 或 <code>\目录\xxx.jpg</code> 的形式，前面不能带 <code>.</code>，且路径中不能含有空格，建议使用 “-” 代替空格。</strong></p>

          
        
      
    </div>

    
    
    
      <footer class="post-footer">
          <div class="post-eof"></div>
        
      </footer>
  </div>
  
  
  
  </article>

    
      

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/08/08/Hexo-GitPage-搭建个人博客/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="ZHL">
      <meta itemprop="description" content="我的博客">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ZHL的博客">
    </span>
      <header class="post-header">

        
          <h1 class="post-title" itemprop="name headline">
              
              <a href="/2019/08/08/Hexo-GitPage-搭建个人博客/" class="post-title-link" itemprop="url">Hexo + GitPage 搭建个人博客</a>
            
          </h1>
        

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              
                
              

              <time title="创建时间：2019-08-08 15:38:16" itemprop="dateCreated datePublished" datetime="2019-08-08T15:38:16+08:00">2019-08-08</time>
            </span>
          
            

            
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2019-10-09 21:28:17" itemprop="dateModified" datetime="2019-10-09T21:28:17+08:00">2019-10-09</time>
              </span>
            
          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Hexo/" itemprop="url" rel="index"><span itemprop="name">Hexo</span></a></span>

                
                
              
            </span>
          

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          
            <h1 id="环境"><a href="#环境" class="headerlink" title="环境"></a>环境</h1><ol>
<li>npm，意味着需要安装 <a href="https://nodejs.org/zh-cn/" target="_blank" rel="noopener">Node.js</a>。</li>
<li>Git，这个不用多说。</li>
</ol>
<h1 id="过程"><a href="#过程" class="headerlink" title="过程"></a>过程</h1><h2 id="安装-Hexo"><a href="#安装-Hexo" class="headerlink" title="安装 Hexo"></a>安装 Hexo</h2><p>安装很简单，打开 cmd，运行命令 <code>npm install -g hexo-cli</code>。</p>
<h2 id="创建本地博客"><a href="#创建本地博客" class="headerlink" title="创建本地博客"></a>创建本地博客</h2><p>Hexo 的原理：</p>
<ol>
<li>本地创建博客，写 MarkDown 文件形式的博客；</li>
<li>Hexo 将 md 文件编译成静态 HTML 文件；</li>
<li>上传至 Github 仓库；</li>
<li>通过 GitPage 的功能，实现访问这些静态资源。</li>
</ol>
<p>所以需要先在本地创建好博客。创建命令 <code>hexo init &lt;博客名称，建议如下格式：xxx.github.io&gt;</code>，这将会在当前目录下创建文件夹 <code>xxx.github.io</code>。</p>
<h2 id="初始化博客"><a href="#初始化博客" class="headerlink" title="初始化博客"></a>初始化博客</h2><p>cd 到该目录下 <code>cd xxx.github.io</code>，之后 <code>npm install</code>。</p>
<p>这个时候本地博客就已经搭建好了。</p>
<h2 id="打开博客服务器："><a href="#打开博客服务器：" class="headerlink" title="打开博客服务器："></a>打开博客服务器：</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">// 这个是hexo server的简写</span><br><span class="line">hexo s</span><br><span class="line">// 如果需要指定端口号，使用下面这个命令</span><br><span class="line">hexo s -p 端口号</span><br></pre></td></tr></table></figure>

<p>浏览器输入 <code>localhost:4000</code> 即可查看效果。<br>可以换漂亮的主题，目前最受欢迎的主题是 <a href="https://github.com/theme-next/hexo-theme-next.git" target="_blank" rel="noopener">Next</a> 具体怎么使用可以直接访问查看。</p>
<h1 id="新建文章"><a href="#新建文章" class="headerlink" title="新建文章"></a>新建文章</h1><p>新建文章也很简单：运行 <code>hexo n &quot;文章标题（同时也是文件名）&quot;</code>。生成后 Hexo 会提示文件位置，直接使用最习惯的 MarkDown 编辑器编辑就好了。</p>
<h1 id="部署"><a href="#部署" class="headerlink" title="部署"></a>部署</h1><h2 id="创建-Github-仓库"><a href="#创建-Github-仓库" class="headerlink" title="创建 Github 仓库"></a>创建 Github 仓库</h2><p>在GitHub上新建一个仓库，仓库名命名的规则是 <code>&lt;Github用户名&gt;.github.io</code>。</p>
<h2 id="安装-deploy-插件"><a href="#安装-deploy-插件" class="headerlink" title="安装 deploy 插件"></a>安装 <code>deploy</code> 插件</h2><p><code>npm install --save hexo-deployer-git</code>，之后修改文件 <code>_config.yml</code>（文件在 <code>xxx.github.io</code> 下）。<br>搜索 <code>deploy</code>，定位到它。修改为：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">deploy:</span><br><span class="line">  type: git</span><br><span class="line">  repo: https://github.com/替换为github仓库地址/xxx.github.io.git</span><br><span class="line">  branch: master</span><br></pre></td></tr></table></figure>

<h2 id="部署到-Github"><a href="#部署到-Github" class="headerlink" title="部署到 Github"></a>部署到 Github</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">// hexo generate 的缩写</span><br><span class="line">hexo g</span><br><span class="line">// hexo deploy 的缩写</span><br><span class="line">hexo d</span><br></pre></td></tr></table></figure>

<p>现在可以通过 <code>&lt;Github用户名&gt;.github.io</code> 来访问了。</p>
<h1 id="使用自己的域名"><a href="#使用自己的域名" class="headerlink" title="使用自己的域名"></a>使用自己的域名</h1><h2 id="申请域名"><a href="#申请域名" class="headerlink" title="申请域名"></a>申请域名</h2><p>直接去阿里云、腾讯云或者百度云之类的云服务商那里申请。要钱！</p>
<h2 id="修改域名解析"><a href="#修改域名解析" class="headerlink" title="修改域名解析"></a>修改域名解析</h2><p>这个自行搜索怎么设置。要注意的是：</p>
<ol>
<li>记录类型为 <code>A</code>；</li>
<li>记录值填写 <code>ping github.io</code> 得到的 ip 地址。</li>
</ol>
<h2 id="修改仓库设置"><a href="#修改仓库设置" class="headerlink" title="修改仓库设置"></a>修改仓库设置</h2><p>打开 Github 仓库的设置，定位到 <code>GitHub Pages</code> 如图：</p>
<p><img src="/2019/08/08/Hexo-GitPage-搭建个人博客/GitHub-Pages设置.png" alt="1565255117433"></p>
<h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><p>步骤较多，但不是很难。</p>

          
        
      
    </div>

    
    
    
      <footer class="post-footer">
          <div class="post-eof"></div>
        
      </footer>
  </div>
  
  
  
  </article>

    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/2/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><span class="page-number current">3</span>
  </nav>


          </div>
          

        </div>
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      <div class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">

          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image"
      src="/images/avatar.png"
      alt="ZHL">
  <p class="site-author-name" itemprop="name">ZHL</p>
  <div class="site-description motion-element" itemprop="description">我的博客</div>
</div>
  <nav class="site-state motion-element">
      <div class="site-state-item site-state-posts">
        
          <a href="/archives/">
        
          <span class="site-state-item-count">26</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
    
      
      
      <div class="site-state-item site-state-categories">
        
          
            <a href="/categories/">
          
        
        
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
        <span class="site-state-item-count">19</span>
        <span class="site-state-item-name">分类</span>
        </a>
      </div>
    
      
      
      <div class="site-state-item site-state-tags">
        
          
            <a href="/tags/">
          
        
        
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
        <span class="site-state-item-count">39</span>
        <span class="site-state-item-name">标签</span>
        </a>
      </div>
    
  </nav>



        </div>
      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2020</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">ZHL</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io" class="theme-link" rel="noopener" target="_blank">Hexo</a> 强力驱动 v3.9.0</div>
  <span class="post-meta-divider">|</span>
  <div class="theme-info">主题 – <a href="https://theme-next.org" class="theme-link" rel="noopener" target="_blank">NexT.Mist</a> v7.3.0</div>

        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <span class="post-meta-item-icon">
      <i class="fa fa-user"></i>
    </span>
    <span class="site-uv" title="总访客量">
      <span class="busuanzi-value" id="busuanzi_value_site_uv"></span>
    </span>
  
    <span class="post-meta-divider">|</span>
  
    <span class="post-meta-item-icon">
      <i class="fa fa-eye"></i>
    </span>
    <span class="site-pv" title="总访问量">
      <span class="busuanzi-value" id="busuanzi_value_site_pv"></span>
    </span>
  
</div>








        
      </div>
    </footer>
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
      </div>

    

  </div>

  
  <script src="/lib/jquery/index.js?v=3.4.1"></script>
  <script src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  <script src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

<script src="/js/utils.js?v=7.3.0"></script>
  <script src="/js/motion.js?v=7.3.0"></script>


  <script src="/js/schemes/muse.js?v=7.3.0"></script>



<script src="/js/next-boot.js?v=7.3.0"></script>




  





























  

  

  


  
    

</body>
</html>
