<!DOCTYPE html>





<html class="theme-next mist use-motion" lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="generator" content="Hexo 3.9.0">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=7.3.0">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon.ico?v=7.3.0">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-x16.ico?v=7.3.0">
  <link rel="mask-icon" href="/images/logo.svg?v=7.3.0" color="#222">

<link rel="stylesheet" href="/css/main.css?v=7.3.0">


<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css?v=4.7.0">


<script id="hexo-configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    version: '7.3.0',
    exturl: false,
    sidebar: {"position":"left","display":"post","offset":12,"onmobile":false},
    back2top: {"enable":true,"sidebar":false,"scrollpercent":false},
    save_scroll: false,
    copycode: {"enable":false,"show_result":false,"style":null},
    fancybox: false,
    mediumzoom: false,
    lazyload: false,
    pangu: false,
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    },
    localsearch: {"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},
    path: '',
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    translation: {
      copy_button: '复制',
      copy_success: '复制成功',
      copy_failure: '复制失败'
    }
  };
</script>

  <meta name="description" content="我的博客">
<meta name="keywords" content="ZHL">
<meta property="og:type" content="website">
<meta property="og:title" content="ZHL的博客">
<meta property="og:url" content="http://yoursite.com/page/2/index.html">
<meta property="og:site_name" content="ZHL的博客">
<meta property="og:description" content="我的博客">
<meta property="og:locale" content="zh-CN">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="ZHL的博客">
<meta name="twitter:description" content="我的博客">
  <link rel="canonical" href="http://yoursite.com/page/2/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome: true,
    isPost: false,
    isPage: false,
    isArchive: false
  };
</script>

  <title>ZHL的博客</title>
  


  <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?9fd3e2a7c57b3971f3439f9713354241";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>






  <noscript>
  <style>
  .use-motion .motion-element,
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-title { opacity: initial; }

  .use-motion .logo,
  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">

  <div class="container sidebar-position-left">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta">

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">ZHL的博客</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
        <p class="site-subtitle">love-wh</p>
      
  </div>

  <div class="site-nav-toggle">
    <button aria-label="切换导航栏">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>


<nav class="site-nav">
  
  <ul id="menu" class="menu">
      
      
      
        
        <li class="menu-item menu-item-home">
      
    

    <a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i> <br>首页</a>

  </li>
      
      
      
        
        <li class="menu-item menu-item-about">
      
    

    <a href="/about/" rel="section"><i class="menu-item-icon fa fa-fw fa-user"></i> <br>关于</a>

  </li>
      
      
      
        
        <li class="menu-item menu-item-tags">
      
    

    <a href="/tags/" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i> <br>标签</a>

  </li>
      
      
      
        
        <li class="menu-item menu-item-categories">
      
    

    <a href="/categories/" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i> <br>分类</a>

  </li>
      
      
      
        
        <li class="menu-item menu-item-archives">
      
    

    <a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i> <br>归档</a>

  </li>
  </ul>

    

</nav>
</div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content page-home">
            
  <section id="posts" class="posts-expand">
      

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/11/26/Ubuntu18-下部署/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="ZHL">
      <meta itemprop="description" content="我的博客">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ZHL的博客">
    </span>
      <header class="post-header">

        
          <h1 class="post-title" itemprop="name headline">
              
              <a href="/2019/11/26/Ubuntu18-下部署/" class="post-title-link" itemprop="url">Ubuntu18 下部署</a>
            
          </h1>
        

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              
                
              

              <time title="创建时间：2019-11-26 19:03:19" itemprop="dateCreated datePublished" datetime="2019-11-26T19:03:19+08:00">2019-11-26</time>
            </span>
          
            

            
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-02-11 00:14:14" itemprop="dateModified" datetime="2020-02-11T00:14:14+08:00">2020-02-11</time>
              </span>
            
          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/部署/" itemprop="url" rel="index"><span itemprop="name">部署</span></a></span>

                
                
              
            </span>
          

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          
            <h1 id="开启-root"><a href="#开启-root" class="headerlink" title="开启 root"></a>开启 root</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo passwd root  // 之后按照提示输入密码</span><br></pre></td></tr></table></figure>

<h1 id="root-使用规则"><a href="#root-使用规则" class="headerlink" title="root 使用规则"></a>root 使用规则</h1><h2 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">su root  // 使用 root</span><br><span class="line">exit  // 用完后退出，root 权限很高，不建议全部都使用 root 操作</span><br></pre></td></tr></table></figure>

<h2 id="远程登录（不建议使用）"><a href="#远程登录（不建议使用）" class="headerlink" title="远程登录（不建议使用）"></a>远程登录（不建议使用）</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">sudo vi /etc/ssh/sshd_config</span><br><span class="line">// 将</span><br><span class="line">#PermitRootLogin prohibit-password</span><br><span class="line">// 修改为</span><br><span class="line">PermitRootLogin yes</span><br><span class="line">// 如果已开启 ssh 服务，则需要重启 ssh</span><br><span class="line">sudo systemctl restart ssh</span><br></pre></td></tr></table></figure>

<h1 id="开启-SSH"><a href="#开启-SSH" class="headerlink" title="开启 SSH"></a>开启 SSH</h1><h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install openssh-server</span><br></pre></td></tr></table></figure>

<h2 id="查看状态"><a href="#查看状态" class="headerlink" title="查看状态"></a>查看状态</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl status ssh</span><br></pre></td></tr></table></figure>

<h2 id="配置开机自启"><a href="#配置开机自启" class="headerlink" title="配置开机自启"></a>配置开机自启</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl enable ssh</span><br></pre></td></tr></table></figure>

<h1 id="开启防火墙"><a href="#开启防火墙" class="headerlink" title="开启防火墙"></a>开启防火墙</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">su root</span><br><span class="line">ufw enable</span><br></pre></td></tr></table></figure>

<h2 id="开启-22-端口"><a href="#开启-22-端口" class="headerlink" title="开启 22 端口"></a>开启 22 端口</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ufw allow 22</span><br></pre></td></tr></table></figure>

<h1 id="配置-MySQL"><a href="#配置-MySQL" class="headerlink" title="配置 MySQL"></a>配置 MySQL</h1><h2 id="安装-1"><a href="#安装-1" class="headerlink" title="安装"></a>安装</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get update  // 更新软件清单</span><br><span class="line">sudo apt-get install mysql-server  // 安装 MySQL-Server</span><br></pre></td></tr></table></figure>

<h2 id="初始化"><a href="#初始化" class="headerlink" title="初始化"></a>初始化</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo mysql_secure_installation  // 之后根据提示操作</span><br></pre></td></tr></table></figure>

<h2 id="检查服务状态"><a href="#检查服务状态" class="headerlink" title="检查服务状态"></a>检查服务状态</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl status mysql</span><br></pre></td></tr></table></figure>

<h2 id="远程访问"><a href="#远程访问" class="headerlink" title="远程访问"></a>远程访问</h2><h3 id="服务配置"><a href="#服务配置" class="headerlink" title="服务配置"></a>服务配置</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/mysql/mysql.conf.d/mysqld.cnf</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># 将</span><br><span class="line">bind-address		= 127.0.0.1</span><br><span class="line"># 修改为</span><br><span class="line">bind-address        = 0.0.0.0</span><br></pre></td></tr></table></figure>

<p>重启 MySQL</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl restart mysql</span><br></pre></td></tr></table></figure>

<h3 id="新建远程账户（不建议使用-root-用户远程）"><a href="#新建远程账户（不建议使用-root-用户远程）" class="headerlink" title="新建远程账户（不建议使用 root 用户远程）"></a>新建远程账户（不建议使用 root 用户远程）</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">GRANT 权限（ALL PRIVILEGES 代表所有权限） ON 数据库（* 代表所有）.表名（* 代表所有） TO 用户名@&quot;允许远程的 IP（% 代表允许所有）&quot; IDENTIFIED BY &quot;密码&quot;;</span><br><span class="line"></span><br><span class="line">FLUSH PRIVILEGES;  -- 刷新权限</span><br></pre></td></tr></table></figure>

<h2 id="开启-3306-端口"><a href="#开启-3306-端口" class="headerlink" title="开启 3306 端口"></a>开启 3306 端口</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">su root</span><br><span class="line">ufw allow 3306</span><br></pre></td></tr></table></figure>

<h2 id="测试远程连接"><a href="#测试远程连接" class="headerlink" title="测试远程连接"></a>测试远程连接</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql -h 【MySQL-Server 所在主机IP 】 -P 【MySQL 开启端口】 -u 账号 -p</span><br></pre></td></tr></table></figure>

<h2 id="配置开机自启-1"><a href="#配置开机自启-1" class="headerlink" title="配置开机自启"></a>配置开机自启</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl enable mysql</span><br></pre></td></tr></table></figure>

<h1 id="配置-Java"><a href="#配置-Java" class="headerlink" title="配置 Java"></a>配置 Java</h1><h2 id="安装-2"><a href="#安装-2" class="headerlink" title="安装"></a>安装</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install openjdk-11-jre-headless</span><br></pre></td></tr></table></figure>

<h2 id="查看-Java-安装是否成功"><a href="#查看-Java-安装是否成功" class="headerlink" title="查看 Java 安装是否成功"></a>查看 Java 安装是否成功</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java -version</span><br></pre></td></tr></table></figure>

<h1 id="配置-Nginx"><a href="#配置-Nginx" class="headerlink" title="配置 Nginx"></a>配置 Nginx</h1><h2 id="安装-3"><a href="#安装-3" class="headerlink" title="安装"></a>安装</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install nginx  // 安装</span><br><span class="line">systemctl start nginx  // 启动</span><br></pre></td></tr></table></figure>

<h2 id="开启-80-和-443-端口"><a href="#开启-80-和-443-端口" class="headerlink" title="开启 80 和 443 端口"></a>开启 80 和 443 端口</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">su root</span><br><span class="line">ufw allow 80</span><br><span class="line">ufw allow 443</span><br></pre></td></tr></table></figure>

<h2 id="配置开机自启-2"><a href="#配置开机自启-2" class="headerlink" title="配置开机自启"></a>配置开机自启</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl enable nginx</span><br></pre></td></tr></table></figure>

<h1 id="配置域名"><a href="#配置域名" class="headerlink" title="配置域名"></a>配置域名</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">将域名 A 记录指向 IP</span><br></pre></td></tr></table></figure>

<h1 id="使用-Let’s-Encrypt-配置-SSL"><a href="#使用-Let’s-Encrypt-配置-SSL" class="headerlink" title="使用 Let’s Encrypt 配置 SSL"></a>使用 Let’s Encrypt 配置 SSL</h1><h2 id="新建一个-80的访问目录，以便-Let’s-encrypt-验证使用"><a href="#新建一个-80的访问目录，以便-Let’s-encrypt-验证使用" class="headerlink" title="新建一个 80的访问目录，以便 Let’s encrypt 验证使用"></a>新建一个 80的访问目录，以便 Let’s encrypt 验证使用</h2><h2 id="查看-Nginx-配置文件地址"><a href="#查看-Nginx-配置文件地址" class="headerlink" title="查看 Nginx 配置文件地址"></a>查看 Nginx 配置文件地址</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">nginx -t</span><br><span class="line"></span><br><span class="line">// 如果不需要，可以将 nignx 配置文件目录下/sites-available/default 删除</span><br><span class="line"></span><br><span class="line">vim 【nignx 配置文件目录下/sites-available/default】</span><br></pre></td></tr></table></figure>

<p>修改为</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">    listen 80;</span><br><span class="line">    listen [::]:80;</span><br><span class="line"></span><br><span class="line">    root 【80的访问目录】;</span><br><span class="line">    </span><br><span class="line">    index index.html index.htm;</span><br><span class="line">    </span><br><span class="line">    server_name 【域名】;</span><br><span class="line">    </span><br><span class="line">    location / &#123;</span><br><span class="line">        # First attempt to serve request as file, then</span><br><span class="line">        # as directory, then fall back to displaying a 404.</span><br><span class="line">        try_files $uri $uri/ =404;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在 80 访问目录中新建一个 index.html 文件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">vim index.html</span><br><span class="line">// 写点内容，比如</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;utf-8&quot; /&gt;</span><br><span class="line">    &lt;title&gt;Hello&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;h1&gt;Hello world!&lt;/h1&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br><span class="line">或者</span><br><span class="line">&lt;script&gt;window.location.replace(&apos;https&apos; + window.location.href.substr(4));&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">// 测试 nginx 配置</span><br><span class="line">nginx -t</span><br><span class="line">// 重启 nginx 服务</span><br><span class="line">nginx -s reload</span><br></pre></td></tr></table></figure>

<h2 id="查看-Nginx-配置是否正确"><a href="#查看-Nginx-配置是否正确" class="headerlink" title="查看 Nginx 配置是否正确"></a>查看 Nginx 配置是否正确</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">浏览器中输入 IP，查看显示是否为 index.html 内容</span><br></pre></td></tr></table></figure>

<h2 id="安装-openssl"><a href="#安装-openssl" class="headerlink" title="安装  openssl"></a>安装  openssl</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install openssl</span><br></pre></td></tr></table></figure>

<h2 id="安装-certbot"><a href="#安装-certbot" class="headerlink" title="安装  certbot"></a>安装  certbot</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install certbot</span><br></pre></td></tr></table></figure>

<h3 id="申请证书"><a href="#申请证书" class="headerlink" title="申请证书"></a>申请证书</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">certbot certonly \</span><br><span class="line">--webroot -w 80的访问目录 \</span><br><span class="line">-d 域名</span><br><span class="line">// 根据提示填写相关信息</span><br></pre></td></tr></table></figure>

<h3 id="生成Perfect-Forward-Security（PFS）键值"><a href="#生成Perfect-Forward-Security（PFS）键值" class="headerlink" title="生成Perfect Forward Security（PFS）键值"></a>生成Perfect Forward Security（PFS）键值</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">openssl dhparam 2048 -out /etc/ssl/private/dhparam.pem  // 生成，一般需要很长时间，耐心等候</span><br><span class="line">有时会生成失败，多试几次，如果生成不了，尝试</span><br><span class="line">cd /etc/ssl/private</span><br><span class="line">openssl dhparam -dsaparam -out dhparam.pem 4096</span><br></pre></td></tr></table></figure>

<blockquote>
<p><a href="https://link.jianshu.com?t=https://wiki.openssl.org/index.php/Manual:Dhparam(1)#OPTIONS" target="_blank" rel="noopener">This option instructs OpenSSL to produce “DSA-like” DH parameters</a> (<em>p</em> is such that <em>p</em>-1 is a multiple of a smaller prime <em>q</em>, and the generator has multiplicative order <em>q</em>). This is considerably faster because it does not need to nest the primality tests, and thus only thousands, not millions, of candidates will be generated and tested.<br> As far as academics know, DSA-like parameters for DH are equally secure; there is no actual advantage to using “strong primes” (the terminology is traditional and does not actually imply some extra strength).<br> Similarly, you may also use a 2048-bit modulus, which is already very far into the “cannot break it zone”. The 4096-bit modulus will make DH computations slower (which is not a real problem for a VPN; these occur only at the start of the connection), but won’t actually improve security.<br> To some extent, a 4096-bit modulus may woo auditors, but auditors are unlikely to be much impressed by a Raspberry-Pi, which is way too cheap anyway.</p>
</blockquote>
<h2 id="配置-Nginx-启用-https"><a href="#配置-Nginx-启用-https" class="headerlink" title="配置 Nginx 启用 https"></a>配置 Nginx 启用 https</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line">/etc/nginx/sites-available 目录下新建配置文件，如 MySite.cnf</span><br><span class="line"></span><br><span class="line">// 将以下配置写入</span><br><span class="line">// 如果是静态网页</span><br><span class="line">server &#123;</span><br><span class="line">    listen       443   ssl;</span><br><span class="line">    server_name  【域名】;</span><br><span class="line"></span><br><span class="line">    charset utf-8;</span><br><span class="line"></span><br><span class="line">    access_log  【log 路径】/access_log.log;</span><br><span class="line">    error_log   【log 路径】/error_log.log;</span><br><span class="line"></span><br><span class="line">    # 可不配置</span><br><span class="line">    location / &#123;</span><br><span class="line">        root   【80的访问目录】;</span><br><span class="line">        index  index.html index.htm;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    ssl_certificate        /etc/letsencrypt/live/【域名】/fullchain.pem;</span><br><span class="line">    ssl_certificate_key    /etc/letsencrypt/live/【域名】/privkey.pem;</span><br><span class="line"></span><br><span class="line">    ssl_session_timeout 1d;</span><br><span class="line">    ssl_session_cache shared:SSL:50m;</span><br><span class="line">    ssl_session_tickets on;</span><br><span class="line"></span><br><span class="line">    ssl_dhparam /etc/ssl/private/dhparam.pem;</span><br><span class="line"></span><br><span class="line">    ssl_protocols TLSv1 TLSv1.1 TLSv1.2;</span><br><span class="line"></span><br><span class="line">    # 一般推荐使用的ssl_ciphers值: https://wiki.mozilla.org/Security/Server_Side_TLS</span><br><span class="line">    ssl_ciphers &apos;ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-AES256-GCM-SHA384:DHE-RSA-AES128-GCM-SHA256:DHE-DSS-AES128-GCM-SHA256:kEDH+AESGCM:ECDHE-RSA-AES128-SHA256:ECDHE-ECDSA-AES128-SHA256:ECDHE-RSA-AES128-SHA:ECDHE-ECDSA-AES128-SHA:ECDHE-RSA-AES256-SHA384:ECDHE-ECDSA-AES256-SHA384:ECDHE-RSA-AES256-SHA:ECDHE-ECDSA-AES256-SHA:DHE-RSA-AES128-SHA256:DHE-RSA-AES128-SHA:DHE-DSS-AES128-SHA256:DHE-RSA-AES256-SHA256:DHE-DSS-AES256-SHA:DHE-RSA-AES256-SHA:AES128-GCM-SHA256:AES256-GCM-SHA384:AES128:AES256:AES:DES-CBC3-SHA:HIGH:!aNULL:!eNULL:!EXPORT:!DES:!RC4:!MD5:!PSK&apos;;</span><br><span class="line"></span><br><span class="line">    ssl_prefer_server_ciphers on;</span><br><span class="line"></span><br><span class="line">    error_page  404              /404.html;</span><br><span class="line">    error_page  500 502 503 504  /50x.html;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">// 如果是代理</span><br><span class="line">server &#123;</span><br><span class="line">    listen        443   ssl;</span><br><span class="line">    server_name   【域名】;</span><br><span class="line">    location /&#123;</span><br><span class="line">        proxy_redirect off;</span><br><span class="line">        proxy_set_header Host $host;</span><br><span class="line">        proxy_set_header X-Real-IP $remote_addr;</span><br><span class="line">        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;</span><br><span class="line">        proxy_pass http://127.0.0.1:【端口】;</span><br><span class="line">    &#125;</span><br><span class="line">    location /static&#123;</span><br><span class="line">        // 注意“/”的使用</span><br><span class="line">        alias   【static 路径】/;</span><br><span class="line">        index  index.html;</span><br><span class="line">    &#125;</span><br><span class="line">    access_log  【log 路径】/access_log.log;</span><br><span class="line">    error_log   【log 路径】/error_log.log;</span><br><span class="line"></span><br><span class="line">    ssl_certificate        /etc/letsencrypt/live/【域名】/fullchain.pem;</span><br><span class="line">        ssl_certificate_key    /etc/letsencrypt/live/【域名】/privkey.pem;</span><br><span class="line"></span><br><span class="line">        ssl_session_timeout 1d;</span><br><span class="line">        ssl_session_cache shared:SSL:50m;</span><br><span class="line">        ssl_session_tickets on;</span><br><span class="line"></span><br><span class="line">        ssl_dhparam /etc/ssl/private/dhparam.pem;</span><br><span class="line"></span><br><span class="line">        ssl_protocols TLSv1 TLSv1.1 TLSv1.2;</span><br><span class="line"></span><br><span class="line">        # 一般推荐使用的ssl_ciphers值: https://wiki.mozilla.org/Security/Server_Side_TLS</span><br><span class="line">        ssl_ciphers &apos;ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-AES256-GCM-SHA384:DHE-RSA-AES128-GCM-SHA256:DHE-DSS-AES128-GCM-SHA256:kEDH+AESGCM:ECDHE-RSA-AES128-SHA256:ECDHE-ECDSA-AES128-SHA256:ECDHE-RSA-AES128-SHA:ECDHE-ECDSA-AES128-SHA:ECDHE-RSA-AES256-SHA384:ECDHE-ECDSA-AES256-SHA384:ECDHE-RSA-AES256-SHA:ECDHE-ECDSA-AES256-SHA:DHE-RSA-AES128-SHA256:DHE-RSA-AES128-SHA:DHE-DSS-AES128-SHA256:DHE-RSA-AES256-SHA256:DHE-DSS-AES256-SHA:DHE-RSA-AES256-SHA:AES128-GCM-SHA256:AES256-GCM-SHA384:AES128:AES256:AES:DES-CBC3-SHA:HIGH:!aNULL:!eNULL:!EXPORT:!DES:!RC4:!MD5:!PSK&apos;;</span><br><span class="line"></span><br><span class="line">        ssl_prefer_server_ciphers on;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">// 测试 nginx 配置</span><br><span class="line">nginx -t</span><br><span class="line">// 重启 nginx 服务</span><br><span class="line">nginx -s reload</span><br></pre></td></tr></table></figure>


          
        
      
    </div>

    
    
    
      <footer class="post-footer">
          <div class="post-eof"></div>
        
      </footer>
  </div>
  
  
  
  </article>

    
      

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/11/23/解决-Idea-下-Tomcat-出现-“至少有一个JAR被扫描用于TLD但尚未包含TLD。”/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="ZHL">
      <meta itemprop="description" content="我的博客">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ZHL的博客">
    </span>
      <header class="post-header">

        
          <h1 class="post-title" itemprop="name headline">
              
              <a href="/2019/11/23/解决-Idea-下-Tomcat-出现-“至少有一个JAR被扫描用于TLD但尚未包含TLD。”/" class="post-title-link" itemprop="url">解决 Idea 下 Tomcat 出现 “至少有一个JAR被扫描用于TLD但尚未包含TLD。”</a>
            
          </h1>
        

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              
                
              

              <time title="创建时间：2019-11-23 08:33:22" itemprop="dateCreated datePublished" datetime="2019-11-23T08:33:22+08:00">2019-11-23</time>
            </span>
          
            

            
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-01-30 20:37:41" itemprop="dateModified" datetime="2020-01-30T20:37:41+08:00">2020-01-30</time>
              </span>
            
          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Tomcat/" itemprop="url" rel="index"><span itemprop="name">Tomcat</span></a></span>

                
                
              
            </span>
          

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          
            <h1 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h1><ol>
<li><a href="https://blog.csdn.net/qqqnzhky/article/details/80563823" target="_blank" rel="noopener">什么是.tld文件</a></li>
<li><a href="https://oomake.com/question/4033038" target="_blank" rel="noopener">如何修复JSP编译器警告：一个JAR被扫描用于TLD但尚未包含TLD？</a></li>
</ol>
<p>感谢以上作者的分享</p>
<h1 id="现象"><a href="#现象" class="headerlink" title="现象"></a>现象</h1><p>启动 Tomcat 很慢，出现 “至少有一个JAR被扫描用于TLD但尚未包含TLD”提示。</p>
<h1 id="分析原因"><a href="#分析原因" class="headerlink" title="分析原因"></a>分析原因</h1><p>TLD(Tag library descriptors)，即“标签库描述文件”，页面中实现 JSP 标签，必须首先定义实现标签的类，然后在标签库描述文件（TLD）中将写好的类映射成 JSP 标签,最后在 JSP 文件中使用定义好的标签，就可以生成动态的 JSP 内容【1】。</p>
<p>出现此现象，Tomcat 也给出了建议：为此记录器启用调试日志记录，以获取已扫描但未在其中找到 TLD 的完整 JAR 列表。 在扫描期间跳过不需要的 JAR 可以缩短启动时间和 JSP 编译时间。</p>
<h1 id="解决办法"><a href="#解决办法" class="headerlink" title="解决办法"></a>解决办法</h1><ol>
<li>启用调试日志记录：在 Tomcat 安装目录/conf/logging.properties 文件末尾添加 <code>org.apache.jasper.servlet.TldScanner.level = FINE</code>。再启动 Tomcat 后出现很多扫描了但是不包含 TLD 的 jar。</li>
<li>将这些 jar 添加到 Tomcat 安装目录/conf/catalina.properties 文件的 <code>tomcat.util.scan.StandardJarScanFilter.jarsToSkip</code> 标签中。</li>
</ol>
<p>注意：如果你没有使用 JSP，那可以直接设置 <code>tomcat.util.scan.StandardJarScanFilter.jarsToSkip = *.jar</code>。</p>

          
        
      
    </div>

    
    
    
      <footer class="post-footer">
          <div class="post-eof"></div>
        
      </footer>
  </div>
  
  
  
  </article>

    
      

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/11/17/Idea-Tomcat9-0-中文乱码问题/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="ZHL">
      <meta itemprop="description" content="我的博客">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ZHL的博客">
    </span>
      <header class="post-header">

        
          <h1 class="post-title" itemprop="name headline">
              
              <a href="/2019/11/17/Idea-Tomcat9-0-中文乱码问题/" class="post-title-link" itemprop="url">Idea Tomcat9.0 中文乱码问题</a>
            
          </h1>
        

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              
                
              

              <time title="创建时间：2019-11-17 08:57:29" itemprop="dateCreated datePublished" datetime="2019-11-17T08:57:29+08:00">2019-11-17</time>
            </span>
          
            

            
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2019-11-30 15:28:46" itemprop="dateModified" datetime="2019-11-30T15:28:46+08:00">2019-11-30</time>
              </span>
            
          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Idea/" itemprop="url" rel="index"><span itemprop="name">Idea</span></a></span>

                
                
              
            </span>
          

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          
            <h1 id="2019年11月17日-解决-Idea-2019-2-下-Tomcat-乱码问题"><a href="#2019年11月17日-解决-Idea-2019-2-下-Tomcat-乱码问题" class="headerlink" title="2019年11月17日 解决 Idea 2019.2 下 Tomcat 乱码问题"></a>2019年11月17日 解决 Idea 2019.2 下 Tomcat 乱码问题</h1><h2 id="现象"><a href="#现象" class="headerlink" title="现象"></a>现象</h2><p>Idea 中配置好 Tomcat 启动后，控制台 <code>Server</code>，<code>Tomcat Localhost Log</code>，<code>Tomcat Catalina Log</code> 都出现乱码。</p>
<h2 id="分析原因"><a href="#分析原因" class="headerlink" title="分析原因"></a>分析原因</h2><p>在 CMD 中，尝试使用命令 <code>catalina.bat run</code> 启动 Tomcat。发现输出乱码，可以肯定，CMD 的编码是 <code>GBK</code> 的，使用 <code>chcp 65001</code> 转到 UTF-8 后再尝试启动 Tomcat，发现输出正常。所以猜测是 Idea 控制台输出使用的是 GBK 编码。</p>
<h2 id="解决办法"><a href="#解决办法" class="headerlink" title="解决办法"></a>解决办法</h2><p>Idea 菜单栏中 <code>Help -&gt; Edit Custom VM Options</code> 文件最后加一句 <code>-Dfile.encoding=UTF-8</code>，重启 Idea。</p>
<h1 id="再次更新-2019年11月30日，解决-Idea-2019-3-下-以上设置也无效的问题"><a href="#再次更新-2019年11月30日，解决-Idea-2019-3-下-以上设置也无效的问题" class="headerlink" title="再次更新 2019年11月30日，解决 Idea 2019.3 下 以上设置也无效的问题"></a>再次更新 2019年11月30日，解决 Idea 2019.3 下 以上设置也无效的问题</h1><h2 id="现象-1"><a href="#现象-1" class="headerlink" title="现象"></a>现象</h2><p>更新了一下 Idea，发现 Idea 2019.3 中 Tomcat 再次乱码。</p>
<h2 id="解决办法-1"><a href="#解决办法-1" class="headerlink" title="解决办法"></a>解决办法</h2><p>Idea 菜单栏中 <code>Help -&gt; Edit Custom Properties</code> ，如果要创建文件则创建，然后文件最后加一句 <code>-Dfile.encoding=UTF-8</code>，重启 Idea。yun</p>

          
        
      
    </div>

    
    
    
      <footer class="post-footer">
          <div class="post-eof"></div>
        
      </footer>
  </div>
  
  
  
  </article>

    
      

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/09/27/Git-记录/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="ZHL">
      <meta itemprop="description" content="我的博客">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ZHL的博客">
    </span>
      <header class="post-header">

        
          <h1 class="post-title" itemprop="name headline">
              
              <a href="/2019/09/27/Git-记录/" class="post-title-link" itemprop="url">Git 记录</a>
            
          </h1>
        

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              
                
              

              <time title="创建时间：2019-09-27 20:22:08" itemprop="dateCreated datePublished" datetime="2019-09-27T20:22:08+08:00">2019-09-27</time>
            </span>
          
            

            
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2019-10-09 21:28:17" itemprop="dateModified" datetime="2019-10-09T21:28:17+08:00">2019-10-09</time>
              </span>
            
          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Git/" itemprop="url" rel="index"><span itemprop="name">Git</span></a></span>

                
                
              
            </span>
          

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          
            <h1 id="动机"><a href="#动机" class="headerlink" title="动机"></a>动机</h1><p>用了很久的 Git 了，但是也只是会基本的一些东西。不过就算是基本的，也可以记录下来。</p>
<h1 id="前期准备"><a href="#前期准备" class="headerlink" title="前期准备"></a>前期准备</h1><ol>
<li>下载最新版的 Git。</li>
</ol>
<h1 id="创建仓库"><a href="#创建仓库" class="headerlink" title="创建仓库"></a>创建仓库</h1><p>命令格式：<code>git init</code>。</p>
<hr>
<ol>
<li>创建项目文件夹 <code>D:/Test/GitTraining</code>。</li>
<li>Git Bash 转到该文件下，运行命令 <code>git init</code>。</li>
</ol>
<p>效果：创建了一个名为 GitTraining 的 Git 仓库。同时 GitTraining 文件夹下出现一个名为 <code>.git</code> 的隐藏文件夹。</p>
<p><img src="/2019/09/27/Git-记录/git-init-1.png" alt="git-init-1"></p>
<p><strong>创建第一个文件</strong></p>
<p>创建好文件 <code>1.txt</code>，并写点代码。</p>
<p>内容：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">111111111</span><br></pre></td></tr></table></figure>

<h1 id="添加文件到-Git-仓库"><a href="#添加文件到-Git-仓库" class="headerlink" title="添加文件到 Git 仓库"></a>添加文件到 Git 仓库</h1><p>命令格式：<code>git add 文件名或通配符</code>。</p>
<hr>
<p><code>git add 1.txt 或者 git add .</code></p>
<h1 id="提交"><a href="#提交" class="headerlink" title="提交"></a>提交</h1><p>命令格式：<code>git commit -m &quot;代码提交信息&quot;</code>。</p>
<hr>
<p><code>git commit -m &quot;No.1 commit&quot;</code></p>
<p>输出：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[master (root-commit) 7ccaacc] No.1 commit</span><br><span class="line"> 1 file changed, 1 insertion(+)</span><br><span class="line"> create mode 100644 1.txt</span><br></pre></td></tr></table></figure>

<p>修改文件 <code>1.txt</code>，内容改为：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1111111111</span><br><span class="line">2222222222</span><br></pre></td></tr></table></figure>

<h1 id="查看文件改动"><a href="#查看文件改动" class="headerlink" title="查看文件改动"></a>查看文件改动</h1><p>命令格式：<code>git status [参数]</code>。</p>
<hr>
<p><code>git status</code></p>
<p>输出：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">On branch master</span><br><span class="line">Changes not staged for commit:</span><br><span class="line">  (use &quot;git add &lt;file&gt;...&quot; to update what will be committed)</span><br><span class="line">  (use &quot;git checkout -- &lt;file&gt;...&quot; to discard changes in working directory)</span><br><span class="line"></span><br><span class="line">        modified:   1.txt</span><br><span class="line"></span><br><span class="line">no changes added to commit (use &quot;git add&quot; and/or &quot;git commit -a&quot;)</span><br></pre></td></tr></table></figure>

<h1 id="查看文件内容更改详情"><a href="#查看文件内容更改详情" class="headerlink" title="查看文件内容更改详情"></a>查看文件内容更改详情</h1><p>命令格式：<code>git diff</code>。</p>
<hr>
<p>输出：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">diff --git a/1.txt b/1.txt</span><br><span class="line">index 15c36bc..4825c6a 100644</span><br><span class="line">--- a/1.txt</span><br><span class="line">+++ b/1.txt</span><br><span class="line">@@ -1 +1,2 @@</span><br><span class="line"> 1111111111</span><br><span class="line">+2222222222</span><br></pre></td></tr></table></figure>

<hr>
<p>再次提交：<code>git add 1.txt | git commit -m &quot;No.2 commit&quot;</code></p>
<p>多加一行再提交，文件内容：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1111111111</span><br><span class="line">2222222222</span><br><span class="line">3333333333</span><br></pre></td></tr></table></figure>

<p>再次提交：<code>git add * | git commit -m &quot;No.3 commit&quot;</code></p>
<h1 id="查看提交图表"><a href="#查看提交图表" class="headerlink" title="查看提交图表"></a>查看提交图表</h1><p>命令格式：<code>git log --graph</code>。</p>
<hr>
<p>输出：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">* commit 1c3a383eb6cc11d7c7539b6dd86b8c8d66bd8f54 (HEAD -&gt; master)</span><br><span class="line">| Author: 朱合隆 &lt;zhuhelong@foxmail.com&gt;</span><br><span class="line">| Date:   Sat Sep 28 10:45:00 2019 +0800</span><br><span class="line">|</span><br><span class="line">|     No.3 commit</span><br><span class="line">|</span><br><span class="line">* commit f7dd549756103ea808715a5701d564832c9c3cc3</span><br><span class="line">| Author: 朱合隆 &lt;zhuhelong@foxmail.com&gt;</span><br><span class="line">| Date:   Sat Sep 28 10:44:37 2019 +0800</span><br><span class="line">|</span><br><span class="line">|     No.2 commit</span><br><span class="line">|</span><br><span class="line">* commit a1d3d012538055e561688160bb144aa7c1f5b098</span><br><span class="line">  Author: 朱合隆 &lt;zhuhelong@foxmail.com&gt;</span><br><span class="line">  Date:   Sat Sep 28 10:43:04 2019 +0800</span><br><span class="line"></span><br><span class="line">      No.1 commit</span><br></pre></td></tr></table></figure>

<h1 id="创建分支"><a href="#创建分支" class="headerlink" title="创建分支"></a>创建分支</h1><p>命令格式：<code>git branch [分支名]</code>。</p>
<p><code>git branch no_1_branch</code></p>
<h1 id="切换到分支"><a href="#切换到分支" class="headerlink" title="切换到分支"></a>切换到分支</h1><p>命令格式：<code>git checkout [分支名]</code>。</p>
<p><strong>上面 创建分支 + 切换到分支 也可以合成一条命令：</strong> <code>git checkout -b [分支名]</code></p>
<hr>
<p><code>git checkout no_1_branch</code></p>
<p>输出：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Switched to branch &apos;no_1_branch&apos;</span><br></pre></td></tr></table></figure>

<hr>
<p>修改文件 <code>1.txt</code>，内容改为：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">1111111111</span><br><span class="line">2222222222</span><br><span class="line">3333333333</span><br><span class="line"></span><br><span class="line">no_1_branch:</span><br><span class="line">1111111111</span><br></pre></td></tr></table></figure>

<p>提交 <code>git add * &amp;&amp; git commit -m &quot;No.1 no_1_branch commit&quot;</code>。</p>
<p>输出：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[no_1_branch ebfda7b] No.1 no_1_branch commit</span><br><span class="line"> 1 file changed, 3 insertions(+)</span><br></pre></td></tr></table></figure>

<hr>
<p>切回到 <code>master</code> 分支。</p>
<p><code>git checkout master</code>。</p>
<p>输出：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Switched to branch &apos;master&apos;</span><br></pre></td></tr></table></figure>

<p>同时文件内容被改为：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1111111111</span><br><span class="line">2222222222</span><br><span class="line">3333333333</span><br></pre></td></tr></table></figure>

<hr>
<p>修改文件 <code>1.txt</code>，内容改为：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">1111111111</span><br><span class="line">2222222222</span><br><span class="line">3333333333</span><br><span class="line">4444444444</span><br></pre></td></tr></table></figure>

<p>提交 <code>git add * &amp;&amp; git commit -m &quot;No.4 commit&quot;</code>。</p>
<p>输出：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[master 81f36b4] No.4 commit</span><br><span class="line"> 1 file changed, 1 insertion(+)</span><br></pre></td></tr></table></figure>

<hr>
<p>切回到 <code>no_1_branch</code> 分支。</p>
<p><code>git checkout no_1_branch</code>。</p>
<p>输出：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Switched to branch &apos;no_1_branch&apos;</span><br></pre></td></tr></table></figure>

<p>同时文件内容被改为：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">1111111111</span><br><span class="line">2222222222</span><br><span class="line">3333333333</span><br><span class="line"></span><br><span class="line">no_1_branch:</span><br><span class="line">1111111111</span><br></pre></td></tr></table></figure>

<hr>
<p>修改文件 <code>1.txt</code>，内容改为：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">1111111111</span><br><span class="line">2222222222</span><br><span class="line">3333333333</span><br><span class="line"></span><br><span class="line">no_1_branch:</span><br><span class="line">1111111111</span><br><span class="line">2222222222</span><br></pre></td></tr></table></figure>

<p>提交 <code>git add * &amp;&amp; git commit -m &quot;No.2 no_1_branch commit&quot;</code>。</p>
<p>输出：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[no_1_branch c04f92b] No.2 no_1_branch commit</span><br><span class="line"> 1 file changed, 1 insertion(+)</span><br></pre></td></tr></table></figure>

<h1 id="合并分支（merge-方式）"><a href="#合并分支（merge-方式）" class="headerlink" title="合并分支（merge 方式）"></a>合并分支（merge 方式）</h1><p>命令格式：<code>git merge [被合并的分支名]</code>。</p>
<hr>
<p>合并分支到 <code>master</code> 分支。</p>
<p><code>git checkout master &amp;&amp; git merge no_1_branch</code></p>
<p>输出：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Switched to branch &apos;master&apos;</span><br><span class="line">Auto-merging 1.txt</span><br><span class="line">CONFLICT (content): Merge conflict in 1.txt</span><br><span class="line">Automatic merge failed; fix conflicts and then commit the result.</span><br></pre></td></tr></table></figure>

<h1 id="解决冲突"><a href="#解决冲突" class="headerlink" title="解决冲突"></a>解决冲突</h1><p>不同的分支修改了相同的文件就会产生冲突。手动修改冲突。</p>
<hr>
<p>这时发现文件 <code>1.txt</code>，内容为：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">1111111111</span><br><span class="line">2222222222</span><br><span class="line">3333333333</span><br><span class="line">&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD</span><br><span class="line">4444444444</span><br><span class="line">=======</span><br><span class="line"></span><br><span class="line">no_1_branch:</span><br><span class="line">1111111111</span><br><span class="line">2222222222</span><br><span class="line">&gt;&gt;&gt;&gt;&gt;&gt;&gt; no_1_branch</span><br></pre></td></tr></table></figure>

<p>将 <code>1.txt</code> 修改为 <code>no_1_branch</code> 的内容：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">1111111111</span><br><span class="line">2222222222</span><br><span class="line">3333333333</span><br><span class="line"></span><br><span class="line">no_1_branch:</span><br><span class="line">1111111111</span><br><span class="line">2222222222</span><br></pre></td></tr></table></figure>

<p>解决好冲突了，提交合并 <code>git add 1.txt &amp;&amp; git commit</code></p>
<p>输出：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[master f7cfe75] Merge branch &apos;no_1_branch&apos;</span><br></pre></td></tr></table></figure>

<p>再查看一下图表 <code>git log --graph</code></p>
<p>输出：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">*   commit f7cfe75956357f88880a612f16f479052f430de0 (HEAD -&gt; master)</span><br><span class="line">|\  Merge: 93d30f6 424a126</span><br><span class="line">| | Author: 朱合隆 &lt;zhuhelong@foxmail.com&gt;</span><br><span class="line">| | Date:   Sat Sep 28 11:36:54 2019 +0800</span><br><span class="line">| |</span><br><span class="line">| |     Merge branch &apos;no_1_branch&apos;</span><br><span class="line">| |</span><br><span class="line">| * commit 424a126b4d6fbb76954bca34e9fcdf4e3d09f182 (no_1_branch)</span><br><span class="line">| | Author: 朱合隆 &lt;zhuhelong@foxmail.com&gt;</span><br><span class="line">| | Date:   Sat Sep 28 10:49:22 2019 +0800</span><br><span class="line">| |</span><br><span class="line">| |     No.2 no_1_branch commit</span><br><span class="line">| |</span><br><span class="line">| * commit 298a3ef8bb439964e6ab908f1b52cf0878225eef</span><br><span class="line">| | Author: 朱合隆 &lt;zhuhelong@foxmail.com&gt;</span><br><span class="line">| | Date:   Sat Sep 28 10:46:29 2019 +0800</span><br><span class="line">| |</span><br><span class="line">| |     No.1 no_1_branch commit</span><br><span class="line">| |</span><br><span class="line">* | commit 93d30f64faf96f75febe5ac43309bf67563c9fe0</span><br><span class="line">|/  Author: 朱合隆 &lt;zhuhelong@foxmail.com&gt;</span><br><span class="line">|   Date:   Sat Sep 28 10:48:33 2019 +0800</span><br><span class="line">|</span><br><span class="line">|       No.4 commit</span><br><span class="line">|</span><br><span class="line">* commit 1c3a383eb6cc11d7c7539b6dd86b8c8d66bd8f54</span><br><span class="line">| Author: 朱合隆 &lt;zhuhelong@foxmail.com&gt;</span><br><span class="line">| Date:   Sat Sep 28 10:45:00 2019 +0800</span><br><span class="line">|</span><br><span class="line">|     No.3 commit</span><br><span class="line">|</span><br><span class="line">* commit f7dd549756103ea808715a5701d564832c9c3cc3</span><br><span class="line">| Author: 朱合隆 &lt;zhuhelong@foxmail.com&gt;</span><br><span class="line">| Date:   Sat Sep 28 10:44:37 2019 +0800</span><br><span class="line">|</span><br><span class="line">|     No.2 commit</span><br><span class="line">|</span><br><span class="line">* commit a1d3d012538055e561688160bb144aa7c1f5b098</span><br><span class="line">  Author: 朱合隆 &lt;zhuhelong@foxmail.com&gt;</span><br><span class="line">  Date:   Sat Sep 28 10:43:04 2019 +0800</span><br><span class="line"></span><br><span class="line">      No.1 commit</span><br></pre></td></tr></table></figure>

<h1 id="合并分支（rebase-方式）"><a href="#合并分支（rebase-方式）" class="headerlink" title="合并分支（rebase 方式）"></a>合并分支（rebase 方式）</h1><p>命令格式：<code>git merge [被合并的分支名]</code>。</p>

          
        
      
    </div>

    
    
    
      <footer class="post-footer">
          <div class="post-eof"></div>
        
      </footer>
  </div>
  
  
  
  </article>

    
      

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/09/26/Qt-智能指针/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="ZHL">
      <meta itemprop="description" content="我的博客">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ZHL的博客">
    </span>
      <header class="post-header">

        
          <h1 class="post-title" itemprop="name headline">
              
              <a href="/2019/09/26/Qt-智能指针/" class="post-title-link" itemprop="url">Qt 智能指针</a>
            
          </h1>
        

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              
                
              

              <time title="创建时间：2019-09-26 16:30:12" itemprop="dateCreated datePublished" datetime="2019-09-26T16:30:12+08:00">2019-09-26</time>
            </span>
          
            

            
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2019-10-09 21:28:17" itemprop="dateModified" datetime="2019-10-09T21:28:17+08:00">2019-10-09</time>
              </span>
            
          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Qt/" itemprop="url" rel="index"><span itemprop="name">Qt</span></a></span>

                
                
                  ，
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Qt/智能指针/" itemprop="url" rel="index"><span itemprop="name">智能指针</span></a></span>

                
                
              
            </span>
          

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          
            <h1 id="目的"><a href="#目的" class="headerlink" title="目的"></a>目的</h1><p>由于使用的是 Qt，所以决定不适用标准库的智能指针，改用 Qt 的智能指针。</p>
<p>结合 Qt 中的容器进行测试，使用的容器是 <code>QList</code>。在容器中，如果保存的是指针，那么一般来所指针所指的对象应该保存在堆中，所以使用完后需要清除释放，Qt 容器都带有 <code>public void clear()</code> 方法，但是该方法实际上只是清除了容器所保存的指针，并未清除释放掉指针所指内存。所以要寻找合适的方法。</p>
<h1 id="准备"><a href="#准备" class="headerlink" title="准备"></a>准备</h1><p>创建好 Qt 项目。这里直接使用的是 UI 项目。</p>
<h1 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h1><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 文件：mainwidow.h</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifndef</span> MAINWINDOW_H</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> MAINWINDOW_H</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;QMainWindow&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> Ui &#123;</span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">MainWindow</span>;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MainWindow</span> :</span> <span class="keyword">public</span> QMainWindow &#123;</span><br><span class="line">        Q_OBJECT</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span>:</span><br><span class="line">        <span class="function"><span class="keyword">explicit</span> <span class="title">MainWindow</span><span class="params">(QWidget *parent = <span class="literal">nullptr</span>)</span></span>;</span><br><span class="line">        ~MainWindow();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> slots:</span><br><span class="line">        <span class="function"><span class="keyword">void</span> <span class="title">on_clear_push_button_clicked</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">void</span> <span class="title">on_delete_push_button_clicked</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">void</span> <span class="title">on_smart_pointer_push_button_clicked</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span>:</span><br><span class="line">        Ui::MainWindow *ui;</span><br><span class="line">        QList&lt;QString *&gt; *<span class="built_in">list</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span> <span class="comment">// MAINWINDOW_H</span></span></span><br></pre></td></tr></table></figure>

<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 文件：mainwindowcpp</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"mainwindow.h"</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"ui_mainwindow.h"</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;QDebug&gt;</span></span></span><br><span class="line"></span><br><span class="line">MainWindow::MainWindow(QWidget *parent) :</span><br><span class="line">    QMainWindow(parent),</span><br><span class="line">    ui(<span class="keyword">new</span> Ui::MainWindow) &#123;</span><br><span class="line">    ui-&gt;setupUi(<span class="keyword">this</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">MainWindow::~MainWindow() &#123;</span><br><span class="line">    <span class="keyword">delete</span> ui;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> MainWindow::on_clear_push_button_clicked() &#123;</span><br><span class="line">    <span class="comment">// 使用容器自带的 clear 函数</span></span><br><span class="line">    <span class="keyword">int</span> delete_times = <span class="number">0</span>;</span><br><span class="line">    <span class="built_in">list</span> = <span class="keyword">new</span> QList&lt;QString *&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">1000000</span>; ++i) &#123;</span><br><span class="line">        <span class="built_in">list</span>-&gt;append(<span class="keyword">new</span> QString(QString::number(i)));</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>((i + <span class="number">1</span>) % <span class="number">1000</span> == <span class="number">0</span>) &#123;</span><br><span class="line">            qDebug() &lt;&lt; <span class="string">"start delete! delete time: "</span> &lt;&lt; ++delete_times;</span><br><span class="line">            <span class="built_in">list</span>-&gt;clear();  <span class="comment">// 根本没有清除内存</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> MainWindow::on_delete_push_button_clicked() &#123;</span><br><span class="line">    <span class="comment">// 普通指针，使用 delete</span></span><br><span class="line">    <span class="keyword">int</span> delete_times = <span class="number">0</span>;</span><br><span class="line">    QString *<span class="built_in">string</span>;</span><br><span class="line">    <span class="built_in">list</span> = <span class="keyword">new</span> QList&lt;QString *&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10000000</span>; ++i) &#123;</span><br><span class="line">        <span class="built_in">list</span>-&gt;append(<span class="keyword">new</span> QString(QString::number(i)));</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>((i + <span class="number">1</span>) % <span class="number">1000</span> == <span class="number">0</span>) &#123;</span><br><span class="line">            qDebug() &lt;&lt; <span class="string">"start delete! delete time: "</span> &lt;&lt; ++delete_times;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; <span class="number">1000</span>; ++j) &#123;</span><br><span class="line">                <span class="built_in">string</span> = <span class="built_in">list</span>-&gt;last();</span><br><span class="line">                <span class="keyword">delete</span> <span class="built_in">string</span>;</span><br><span class="line">                <span class="built_in">string</span> = <span class="literal">nullptr</span>;</span><br><span class="line">                <span class="built_in">list</span>-&gt;removeLast();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> MainWindow::on_smart_pointer_push_button_clicked() &#123;</span><br><span class="line">    <span class="comment">// 智能指针</span></span><br><span class="line">    <span class="keyword">int</span> delete_times = <span class="number">0</span>;</span><br><span class="line">    <span class="built_in">list</span> = <span class="keyword">new</span> QList&lt;QString *&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">1000000</span>; ++i) &#123;</span><br><span class="line">        QSharedPointer&lt;QString&gt; <span class="built_in">string</span>(<span class="keyword">new</span> QString(QString::number(<span class="number">100</span>)));</span><br><span class="line">        <span class="built_in">list</span>-&gt;append(<span class="built_in">string</span>.data());</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>((i + <span class="number">1</span>) % <span class="number">1000</span> == <span class="number">0</span>) &#123;</span><br><span class="line">            qDebug() &lt;&lt; <span class="string">"start delete! delete time: "</span> &lt;&lt; ++delete_times;</span><br><span class="line">            <span class="built_in">list</span>-&gt;clear();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="实验"><a href="#实验" class="headerlink" title="实验"></a>实验</h1><p>使用采用每次点完按钮后都重启再测下一项的方式。</p>
<p>初始打开程序后内存用量。</p>
<p><img src="/2019/09/26/Qt-智能指针/初始打开界面的内存用量.png" alt="初始打开界面的内存用量"></p>
<p>使用容器自带的 clear 函数后内存用量。</p>
<p><img src="/2019/09/26/Qt-智能指针/使用-clear-后内存用量.png" alt="使用-clear-后内存用量"></p>
<p>使用普通指针和 delete 后内存用量。</p>
<p><img src="/2019/09/26/Qt-智能指针/使用普通指针和-delete-后内存用量.png" alt="使用普通指针和-delete-后内存用量"></p>
<p>使用智能指针后内存用量。</p>
<p><img src="/2019/09/26/Qt-智能指针/使用智能指针后内存用量.png" alt="使用智能指针后内存用量"></p>
<h1 id="结论"><a href="#结论" class="headerlink" title="结论"></a>结论</h1><p>使用智能指针，方便！</p>

          
        
      
    </div>

    
    
    
      <footer class="post-footer">
          <div class="post-eof"></div>
        
      </footer>
  </div>
  
  
  
  </article>

    
      

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/09/25/C-继承/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="ZHL">
      <meta itemprop="description" content="我的博客">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ZHL的博客">
    </span>
      <header class="post-header">

        
          <h1 class="post-title" itemprop="name headline">
              
              <a href="/2019/09/25/C-继承/" class="post-title-link" itemprop="url">C++ 继承</a>
            
          </h1>
        

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              
                
              

              <time title="创建时间：2019-09-25 15:20:57" itemprop="dateCreated datePublished" datetime="2019-09-25T15:20:57+08:00">2019-09-25</time>
            </span>
          
            

            
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2019-10-09 21:28:17" itemprop="dateModified" datetime="2019-10-09T21:28:17+08:00">2019-10-09</time>
              </span>
            
          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/C/" itemprop="url" rel="index"><span itemprop="name">C++</span></a></span>

                
                
              
            </span>
          

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          
            <h1 id="参考文献"><a href="#参考文献" class="headerlink" title="参考文献"></a>参考文献</h1><p>1.<a href="https://blog.csdn.net/tobacco5648/article/details/7650040" target="_blank" rel="noopener">C++继承：同名隐藏、覆盖，虚函数</a>。</p>
<h1 id="环境"><a href="#环境" class="headerlink" title="环境"></a>环境</h1><table>
<thead>
<tr>
<th>项目</th>
<th>型号</th>
<th>备注</th>
</tr>
</thead>
<tbody><tr>
<td>操作系统</td>
<td>win 10</td>
<td></td>
</tr>
<tr>
<td>MinGW</td>
<td>x86_64-posix-seh-rev0</td>
<td></td>
</tr>
</tbody></table>
<h1 id="类似-Java-的用法"><a href="#类似-Java-的用法" class="headerlink" title="类似 Java 的用法"></a>类似 Java 的用法</h1><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span> &#123;</span></span><br><span class="line">    <span class="keyword">public</span>:</span><br><span class="line">        <span class="function"><span class="keyword">void</span> <span class="title">print</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="built_in">cout</span> &lt;&lt; <span class="string">"A print"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">        &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">B</span> :</span> <span class="keyword">public</span> A &#123;</span><br><span class="line">    <span class="keyword">public</span>:</span><br><span class="line">        <span class="function"><span class="keyword">void</span> <span class="title">print</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="built_in">cout</span> &lt;&lt; <span class="string">"B print"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">        &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">void</span>)</span> </span>&#123;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"------------ A-1."</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    A a1;</span><br><span class="line">    a1.print();</span><br><span class="line"></span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"------------ A-2."</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    A a2 = B();</span><br><span class="line">    a2.print();</span><br><span class="line">    a2.B::print();</span><br><span class="line"></span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"------------ A-3."</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    A *a3 = <span class="keyword">new</span> B();</span><br><span class="line">    a3-&gt;print();</span><br><span class="line">    a3-&gt;B::print();</span><br><span class="line"></span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"------------ A-4."</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    B b;</span><br><span class="line">    A &amp;a4 = b;</span><br><span class="line">    a4.print();</span><br><span class="line">    a4.B::print();</span><br><span class="line"></span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"------------ B-1."</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    B b1;</span><br><span class="line">    b1.print();</span><br><span class="line">    b1.A::print();</span><br><span class="line"></span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"------------ B-2."</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    B b2 = B();</span><br><span class="line">    b2.print();</span><br><span class="line">    b2.A::print();</span><br><span class="line"></span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"------------ B-3."</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    B *b3 = <span class="keyword">new</span> B();</span><br><span class="line">    b3-&gt;print();</span><br><span class="line">    b3-&gt;A::print();</span><br><span class="line"></span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"------------ B-4."</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    B b_b;</span><br><span class="line">    B &amp;b4 = b_b;</span><br><span class="line">    b4.print();</span><br><span class="line">    b4.A::print();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="编译结果"><a href="#编译结果" class="headerlink" title="编译结果"></a>编译结果</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">like_java.cpp: In function &apos;int main()&apos;:</span><br><span class="line">like_java.cpp:26:11: error: &apos;B&apos; is not a base of &apos;A&apos;</span><br><span class="line">     a2.B::print();</span><br><span class="line">           ^~~~~</span><br><span class="line">like_java.cpp:31:12: error: &apos;B&apos; is not a base of &apos;A&apos;</span><br><span class="line">     a3-&gt;B::print();</span><br><span class="line">            ^~~~~</span><br><span class="line">like_java.cpp:37:11: error: &apos;B&apos; is not a base of &apos;A&apos;</span><br><span class="line">     a4.B::print();</span><br></pre></td></tr></table></figure>

<h3 id="编译出错分析"><a href="#编译出错分析" class="headerlink" title="编译出错分析"></a>编译出错分析</h3><p>这是一个错误示范，现实中也不会像报错的这三句这样用。</p>
<h2 id="修改正确"><a href="#修改正确" class="headerlink" title="修改正确"></a>修改正确</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span> &#123;</span></span><br><span class="line">    <span class="keyword">public</span>:</span><br><span class="line">        <span class="function"><span class="keyword">void</span> <span class="title">print</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="built_in">cout</span> &lt;&lt; <span class="string">"A print"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">        &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">B</span> :</span> <span class="keyword">public</span> A &#123;</span><br><span class="line">    <span class="keyword">public</span>:</span><br><span class="line">        <span class="function"><span class="keyword">void</span> <span class="title">print</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="built_in">cout</span> &lt;&lt; <span class="string">"B print"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">        &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">void</span>)</span> </span>&#123;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"------------ A-1."</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    A a1;</span><br><span class="line">    a1.print();</span><br><span class="line"></span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"------------ A-2."</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    A a2 = B();</span><br><span class="line">    a2.print();</span><br><span class="line">    <span class="comment">// a2.B::print();</span></span><br><span class="line"></span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"------------ A-3."</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    A *a3 = <span class="keyword">new</span> B();</span><br><span class="line">    a3-&gt;print();</span><br><span class="line">    <span class="comment">// a3-&gt;B::print();</span></span><br><span class="line"></span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"------------ A-4."</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    B b;</span><br><span class="line">    A &amp;a4 = b;</span><br><span class="line">    a4.print();</span><br><span class="line">    <span class="comment">// a4.B::print();</span></span><br><span class="line"></span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"------------ B-1."</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    B b1;</span><br><span class="line">    b1.print();</span><br><span class="line">    b1.A::print();</span><br><span class="line"></span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"------------ B-2."</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    B b2 = B();</span><br><span class="line">    b2.print();</span><br><span class="line">    b2.A::print();</span><br><span class="line"></span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"------------ B-3."</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    B *b3 = <span class="keyword">new</span> B();</span><br><span class="line">    b3-&gt;print();</span><br><span class="line">    b3-&gt;A::print();</span><br><span class="line"></span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"------------ B-4."</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    B b_b;</span><br><span class="line">    B &amp;b4 = b_b;</span><br><span class="line">    b4.print();</span><br><span class="line">    b4.A::print();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>还有使用 using 的用法，参见参考文献【1】。</p>
<h2 id="编译-amp-执行结果"><a href="#编译-amp-执行结果" class="headerlink" title="编译&amp;执行结果"></a>编译&amp;执行结果</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">------------ A-1.</span><br><span class="line">A print</span><br><span class="line">------------ A-2.</span><br><span class="line">A print</span><br><span class="line">------------ A-3.</span><br><span class="line">A print</span><br><span class="line">------------ A-4.</span><br><span class="line">A print</span><br><span class="line">------------ B-1.</span><br><span class="line">B print</span><br><span class="line">A print</span><br><span class="line">------------ B-2.</span><br><span class="line">B print</span><br><span class="line">A print</span><br><span class="line">------------ B-3.</span><br><span class="line">B print</span><br><span class="line">A print</span><br><span class="line">------------ B-4.</span><br><span class="line">B print</span><br><span class="line">A print</span><br></pre></td></tr></table></figure>

<h2 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h2><p>和 Java 不同，Java 子类会直接重写父类同名方法，导致在类外无法再访问父类同名方法，类内可以使用 <code>super</code>。</p>
<h1 id="使用-virtual"><a href="#使用-virtual" class="headerlink" title="使用 virtual"></a>使用 virtual</h1><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span> &#123;</span></span><br><span class="line">    <span class="keyword">public</span>:</span><br><span class="line">        <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">print</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="built_in">cout</span> &lt;&lt; <span class="string">"A print"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">        &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">B</span> :</span> <span class="keyword">public</span> A &#123;</span><br><span class="line">    <span class="keyword">public</span>:</span><br><span class="line">        <span class="function"><span class="keyword">void</span> <span class="title">print</span><span class="params">()</span> override </span>&#123;</span><br><span class="line">            <span class="built_in">cout</span> &lt;&lt; <span class="string">"B print"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">        &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">void</span>)</span> </span>&#123;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"------------ A-1."</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    A a1;</span><br><span class="line">    a1.print();</span><br><span class="line"></span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"------------ A-2."</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    A a2 = B();</span><br><span class="line">    a2.print();</span><br><span class="line"></span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"------------ A-3."</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    A *a3 = <span class="keyword">new</span> B();</span><br><span class="line">    a3-&gt;print();</span><br><span class="line"></span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"------------ A-4."</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    B b;</span><br><span class="line">    A &amp;a4 = b;</span><br><span class="line">    a4.print();</span><br><span class="line"></span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"------------ B-1."</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    B b1;</span><br><span class="line">    b1.print();</span><br><span class="line">    b1.A::print();</span><br><span class="line"></span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"------------ B-2."</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    B b2 = B();</span><br><span class="line">    b2.print();</span><br><span class="line">    b2.A::print();</span><br><span class="line"></span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"------------ B-3."</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    B *b3 = <span class="keyword">new</span> B();</span><br><span class="line">    b3-&gt;print();</span><br><span class="line">    b3-&gt;A::print();</span><br><span class="line"></span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"------------ B-4."</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    B b_b;</span><br><span class="line">    B &amp;b4 = b_b;</span><br><span class="line">    b4.print();</span><br><span class="line">    b4.A::print();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="编译-amp-执行结果-1"><a href="#编译-amp-执行结果-1" class="headerlink" title="编译&amp;执行结果"></a>编译&amp;执行结果</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">------------ A-1.</span><br><span class="line">A print</span><br><span class="line">------------ A-2.</span><br><span class="line">A print</span><br><span class="line">------------ A-3.</span><br><span class="line">B print</span><br><span class="line">------------ A-4.</span><br><span class="line">B print</span><br><span class="line">------------ B-1.</span><br><span class="line">B print</span><br><span class="line">A print</span><br><span class="line">------------ B-2.</span><br><span class="line">B print</span><br><span class="line">A print</span><br><span class="line">------------ B-3.</span><br><span class="line">B print</span><br><span class="line">A print</span><br><span class="line">------------ B-4.</span><br><span class="line">B print</span><br><span class="line">A print</span><br></pre></td></tr></table></figure>

<h2 id="小结-1"><a href="#小结-1" class="headerlink" title="小结"></a>小结</h2><p><code>B</code> 类重写了 <code>A</code> 类中的虚函数，实现了多态，所以 <code>A-3</code> 和 <code>A-4</code> 输出的是 <code>B print</code>。</p>
<p>注：13 行中的 <code>override</code> 可省略，但是不建议将其省略！</p>
<h1 id="基类重载"><a href="#基类重载" class="headerlink" title="基类重载"></a>基类重载</h1><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span> &#123;</span></span><br><span class="line">    <span class="keyword">public</span>:</span><br><span class="line">        <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">print</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="built_in">cout</span> &lt;&lt; <span class="string">"A print"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">/*virtual*/</span> <span class="function"><span class="keyword">void</span> <span class="title">print</span><span class="params">(<span class="keyword">int</span> value)</span> </span>&#123;</span><br><span class="line">            <span class="built_in">cout</span> &lt;&lt; <span class="string">"A print value: "</span> &lt;&lt; value &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">        &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">B</span> :</span> <span class="keyword">public</span> A &#123;</span><br><span class="line">    <span class="keyword">public</span>:</span><br><span class="line">        <span class="function"><span class="keyword">void</span> <span class="title">print</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="built_in">cout</span> &lt;&lt; <span class="string">"B print"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">        &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">void</span>)</span> </span>&#123;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"------------ A-1."</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    A a1;</span><br><span class="line">    a1.print();</span><br><span class="line">    a1.print(<span class="number">111</span>);</span><br><span class="line"></span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"------------ A-2."</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    A a2 = B();</span><br><span class="line">    a2.print();</span><br><span class="line">    a2.print(<span class="number">222</span>);</span><br><span class="line"></span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"------------ A-3."</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    A *a3 = <span class="keyword">new</span> B();</span><br><span class="line">    a3-&gt;print();</span><br><span class="line">    a3-&gt;print(<span class="number">333</span>);</span><br><span class="line"></span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"------------ A-4."</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    B b;</span><br><span class="line">    A &amp;a4 = b;</span><br><span class="line">    a4.print();</span><br><span class="line">    a4.print(<span class="number">444</span>);</span><br><span class="line"></span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"------------ B-1."</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    B b1;</span><br><span class="line">    b1.print();</span><br><span class="line">    b1.A::print();</span><br><span class="line">    b1.print(<span class="number">111</span>);</span><br><span class="line"></span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"------------ B-2."</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    B b2 = B();</span><br><span class="line">    b2.print();</span><br><span class="line">    b2.A::print();</span><br><span class="line">    b2.print(<span class="number">222</span>);</span><br><span class="line"></span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"------------ B-3."</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    B *b3 = <span class="keyword">new</span> B();</span><br><span class="line">    b3-&gt;print();</span><br><span class="line">    b3-&gt;A::print();</span><br><span class="line">    b3-&gt;print(<span class="number">333</span>);</span><br><span class="line"></span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"------------ B-4."</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    B b_b;</span><br><span class="line">    B &amp;b4 = b_b;</span><br><span class="line">    b4.print();</span><br><span class="line">    b4.A::print();</span><br><span class="line">    b4.print(<span class="number">444</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>10 行中的 <code>virtual</code> 加不加编译结果都不变。</p>
<h2 id="编译结果-1"><a href="#编译结果-1" class="headerlink" title="编译结果"></a>编译结果</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">base_class_overload.cpp: In function &apos;int main()&apos;:</span><br><span class="line">base_class_overload.cpp:48:17: error: no matching function for call to &apos;B::print(int)&apos;</span><br><span class="line">     b1.print(111);</span><br><span class="line">                 ^</span><br><span class="line">base_class_overload.cpp:17:14: note: candidate: &apos;virtual void B::print()&apos;</span><br><span class="line">         void print() &#123;</span><br><span class="line">              ^~~~~</span><br><span class="line">base_class_overload.cpp:17:14: note:   candidate expects 0 arguments, 1 provided</span><br><span class="line">base_class_overload.cpp:54:17: error: no matching function for call to &apos;B::print(int)&apos;</span><br><span class="line">     b2.print(222);</span><br><span class="line">                 ^</span><br><span class="line">base_class_overload.cpp:17:14: note: candidate: &apos;virtual void B::print()&apos;</span><br><span class="line">         void print() &#123;</span><br><span class="line">              ^~~~~</span><br><span class="line">base_class_overload.cpp:17:14: note:   candidate expects 0 arguments, 1 provided</span><br><span class="line">base_class_overload.cpp:60:18: error: no matching function for call to &apos;B::print(int)&apos;</span><br><span class="line">     b3-&gt;print(333);</span><br><span class="line">                  ^</span><br><span class="line">base_class_overload.cpp:17:14: note: candidate: &apos;virtual void B::print()&apos;</span><br><span class="line">         void print() &#123;</span><br><span class="line">              ^~~~~</span><br><span class="line">base_class_overload.cpp:17:14: note:   candidate expects 0 arguments, 1 provided</span><br><span class="line">base_class_overload.cpp:67:17: error: no matching function for call to &apos;B::print(int)&apos;</span><br><span class="line">     b4.print(444);</span><br><span class="line">                 ^</span><br><span class="line">base_class_overload.cpp:17:14: note: candidate: &apos;virtual void B::print()&apos;</span><br><span class="line">         void print() &#123;</span><br><span class="line">              ^~~~~</span><br><span class="line">base_class_overload.cpp:17:14: note:   candidate expects 0 arguments, 1 provided</span><br></pre></td></tr></table></figure>

<h3 id="编译出错分析-1"><a href="#编译出错分析-1" class="headerlink" title="编译出错分析"></a>编译出错分析</h3><p>在 Java 中，这样的继承是没有问题的。目前还不清楚为什么 C++ 中为什么是错误的。</p>
<h2 id="修改正确-1"><a href="#修改正确-1" class="headerlink" title="修改正确"></a>修改正确</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span> &#123;</span></span><br><span class="line">    <span class="keyword">public</span>:</span><br><span class="line">        <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">print</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="built_in">cout</span> &lt;&lt; <span class="string">"A print"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">print_int</span><span class="params">(<span class="keyword">int</span> value)</span> </span>&#123;</span><br><span class="line">            <span class="built_in">cout</span> &lt;&lt; <span class="string">"A print_int value: "</span> &lt;&lt; value &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">        &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">B</span> :</span> <span class="keyword">public</span> A &#123;</span><br><span class="line">    <span class="keyword">public</span>:</span><br><span class="line">        <span class="function"><span class="keyword">void</span> <span class="title">print</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="built_in">cout</span> &lt;&lt; <span class="string">"B print"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">        &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">void</span>)</span> </span>&#123;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"------------ A-1."</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    A a1;</span><br><span class="line">    a1.print();</span><br><span class="line">    a1.print_int(<span class="number">111</span>);</span><br><span class="line"></span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"------------ A-2."</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    A a2 = B();</span><br><span class="line">    a2.print();</span><br><span class="line">    a2.print_int(<span class="number">222</span>);</span><br><span class="line"></span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"------------ A-3."</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    A *a3 = <span class="keyword">new</span> B();</span><br><span class="line">    a3-&gt;print();</span><br><span class="line">    a3-&gt;print_int(<span class="number">333</span>);</span><br><span class="line"></span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"------------ A-4."</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    B b;</span><br><span class="line">    A &amp;a4 = b;</span><br><span class="line">    a4.print();</span><br><span class="line">    a4.print_int(<span class="number">444</span>);</span><br><span class="line"></span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"------------ B-1."</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    B b1;</span><br><span class="line">    b1.print();</span><br><span class="line">    b1.A::print();</span><br><span class="line">    b1.print_int(<span class="number">111</span>);</span><br><span class="line"></span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"------------ B-2."</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    B b2 = B();</span><br><span class="line">    b2.print();</span><br><span class="line">    b2.A::print();</span><br><span class="line">    b2.print_int(<span class="number">222</span>);</span><br><span class="line"></span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"------------ B-3."</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    B *b3 = <span class="keyword">new</span> B();</span><br><span class="line">    b3-&gt;print();</span><br><span class="line">    b3-&gt;A::print();</span><br><span class="line">    b3-&gt;print_int(<span class="number">333</span>);</span><br><span class="line"></span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"------------ B-4."</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    B b_b;</span><br><span class="line">    B &amp;b4 = b_b;</span><br><span class="line">    b4.print();</span><br><span class="line">    b4.A::print();</span><br><span class="line">    b4.print_int(<span class="number">444</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="编译-amp-执行结果-2"><a href="#编译-amp-执行结果-2" class="headerlink" title="编译&amp;执行结果"></a>编译&amp;执行结果</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">------------ A-1.</span><br><span class="line">A print</span><br><span class="line">A print_int value: 111</span><br><span class="line">------------ A-2.</span><br><span class="line">A print</span><br><span class="line">A print_int value: 222</span><br><span class="line">------------ A-3.</span><br><span class="line">B print</span><br><span class="line">A print_int value: 333</span><br><span class="line">------------ A-4.</span><br><span class="line">B print</span><br><span class="line">A print_int value: 444</span><br><span class="line">------------ B-1.</span><br><span class="line">B print</span><br><span class="line">A print</span><br><span class="line">A print_int value: 111</span><br><span class="line">------------ B-2.</span><br><span class="line">B print</span><br><span class="line">A print</span><br><span class="line">A print_int value: 222</span><br><span class="line">------------ B-3.</span><br><span class="line">B print</span><br><span class="line">A print</span><br><span class="line">A print_int value: 333</span><br><span class="line">------------ B-4.</span><br><span class="line">B print</span><br><span class="line">A print</span><br><span class="line">A print_int value: 444</span><br></pre></td></tr></table></figure>

<h2 id="小结-2"><a href="#小结-2" class="headerlink" title="小结"></a>小结</h2><p>基类中重载会后子类继承其中一个函数会发生错误，这个目前还不知道是为什么（有时间再深究）。虽然不推荐使用子类的指针，一般都使用父类指针指向子类的对象，但是偶尔还是要用到的。</p>

          
        
      
    </div>

    
    
    
      <footer class="post-footer">
          <div class="post-eof"></div>
        
      </footer>
  </div>
  
  
  
  </article>

    
      

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/09/11/DCMTK-工具：wlmscpfs-测试/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="ZHL">
      <meta itemprop="description" content="我的博客">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ZHL的博客">
    </span>
      <header class="post-header">

        
          <h1 class="post-title" itemprop="name headline">
              
              <a href="/2019/09/11/DCMTK-工具：wlmscpfs-测试/" class="post-title-link" itemprop="url">DCMTK 工具：wlmscpfs 测试</a>
            
          </h1>
        

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              
                
              

              <time title="创建时间：2019-09-11 13:15:09" itemprop="dateCreated datePublished" datetime="2019-09-11T13:15:09+08:00">2019-09-11</time>
            </span>
          
            

            
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2019-10-09 21:28:17" itemprop="dateModified" datetime="2019-10-09T21:28:17+08:00">2019-10-09</time>
              </span>
            
          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/DICOM/" itemprop="url" rel="index"><span itemprop="name">DICOM</span></a></span>

                
                
                  ，
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/DICOM/DCMTK/" itemprop="url" rel="index"><span itemprop="name">DCMTK</span></a></span>

                
                
                  ，
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/DICOM/DCMTK/wlmscpfs/" itemprop="url" rel="index"><span itemprop="name">wlmscpfs</span></a></span>

                
                
              
            </span>
          

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          
            <h1 id="参考文献"><a href="#参考文献" class="headerlink" title="参考文献"></a>参考文献</h1><ol>
<li><a href="https://blog.csdn.net/zssureqh/article/details/38775315" target="_blank" rel="noopener">DICOM医学图像处理：基于DCMTK工具包学习和分析worklist</a></li>
</ol>
<p>感谢以上参考文献的作者的辛勤付出~</p>
<h1 id="系统配置"><a href="#系统配置" class="headerlink" title="系统配置"></a>系统配置</h1><table>
<thead>
<tr>
<th>条目</th>
<th>型号</th>
<th>备注</th>
</tr>
</thead>
<tbody><tr>
<td>操作系统</td>
<td>win 10</td>
<td></td>
</tr>
<tr>
<td>wlmscpfs</td>
<td>v3.6.4+ DEV</td>
<td></td>
</tr>
<tr>
<td>findscu</td>
<td>v3.6.4+ DEV</td>
<td></td>
</tr>
</tbody></table>
<h1 id="前提条件"><a href="#前提条件" class="headerlink" title="前提条件"></a>前提条件</h1><p>已编译或下载好 dcmtk 工具包，并将其加入到环境变量的 <code>PATH</code> 中（也可不加，但是需要输入所在目录前缀）。</p>
<p>创建的工作目录中不要有中文及空格。</p>
<h1 id="准备工作"><a href="#准备工作" class="headerlink" title="准备工作"></a>准备工作</h1><h2 id="创建文件夹"><a href="#创建文件夹" class="headerlink" title="创建文件夹"></a>创建文件夹</h2><p>创建工作目录，如：<code>C:\DICOM_dcmqrscp_test</code>。</p>
<p>创建 <code>worklist</code> 工作目录，如：<code>C:\DICOM_dcmqrscp_test\worklist</code>。</p>
<p>在 <code>worklist</code> 工作目录下，创建 AETable 目录，<br>如创建 <code>OFFIS</code> AETable 目录：<code>C:\DICOM_dcmqrscp_test\worklist\OFFIS</code></p>
<p>创建 <code>findscu</code> 工作目录，如：<code>C:\DICOM_dcmqrscp_test\findscu</code>，不创建也可以。</p>
<h2 id="准备需要用到的文件"><a href="#准备需要用到的文件" class="headerlink" title="准备需要用到的文件"></a>准备需要用到的文件</h2><p>1.将 <code>dcmtk 安装目录\share\dcmtk\wlistdb\OFFIS</code> 目录中的所有文件复制到  <code>worklist</code> 工作目录下的 <code>OFFIS</code> AETable 目录。<br>2.由于这些文件是 dump 格式，需要转换成 wlmscpfs 可以使用的 dcm 格式，CMD 转到 <code>C:\DICOM_dcmqrscp_test\worklist\OFFIS</code>，然后运行 <code>for %i in (*.*) do dump2dcm %i %i.wl</code>，生成了 11 个 wl 文件，将其中的 <code>lockfile.wl</code> 删除。</p>
<h1 id="运行-wlmscpfs-服务"><a href="#运行-wlmscpfs-服务" class="headerlink" title="运行 wlmscpfs 服务"></a>运行 <code>wlmscpfs</code> 服务</h1><p>CMD 转到 <code>C:\DICOM_dcmqrscp_test\wlistdb</code>，然后运行</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wlmscpfs 11110 --disable-file-reject --debug</span><br></pre></td></tr></table></figure>

<p>如配置无误则出现如下信息：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">D: $dcmtk: wlmscpfs v3.6.4+ DEV $</span><br><span class="line">D:</span><br><span class="line">W: (notice: dcmdata auto correction disabled.)</span><br></pre></td></tr></table></figure>

<p>不要关闭，让其运行。</p>
<h1 id="运行-findscu-查找"><a href="#运行-findscu-查找" class="headerlink" title="运行 findscu 查找"></a>运行 <code>findscu</code> 查找</h1><p>新开一个 CMD 转到  <code>findscu</code> 工作目录（没有创建的话可不转），运行</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">findscu 127.0.0.1 11110 ^</span><br><span class="line">--call OFFIS ^</span><br><span class="line">--debug ^</span><br><span class="line">-k 0010,0010</span><br><span class="line">-k 0010,0040</span><br></pre></td></tr></table></figure>

<p>0010,0010 是病人姓名标签，所以整个命令的意思是访问 IP 为 127.0.0.1 端口号为 11110 的 worklist 服务器，从服务器中名为 OFFIS 的 AE 查找所有病人姓名，病人性别。<br>如配置无误则 CMD 打印出 findscu 查找到的信息。<br>如果想要查找指定的病人，则可在 <code>-k</code> 中添加内容，如：<code>-k 0010,0010=病人姓名</code>。</p>

          
        
      
    </div>

    
    
    
      <footer class="post-footer">
          <div class="post-eof"></div>
        
      </footer>
  </div>
  
  
  
  </article>

    
      

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/09/09/DCMTK-源码中一些名词/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="ZHL">
      <meta itemprop="description" content="我的博客">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ZHL的博客">
    </span>
      <header class="post-header">

        
          <h1 class="post-title" itemprop="name headline">
              
              <a href="/2019/09/09/DCMTK-源码中一些名词/" class="post-title-link" itemprop="url">DCMTK 源码中一些名词</a>
            
          </h1>
        

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              
                
              

              <time title="创建时间：2019-09-09 19:03:53" itemprop="dateCreated datePublished" datetime="2019-09-09T19:03:53+08:00">2019-09-09</time>
            </span>
          
            

            
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2019-10-09 21:28:17" itemprop="dateModified" datetime="2019-10-09T21:28:17+08:00">2019-10-09</time>
              </span>
            
          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/DCMTK/" itemprop="url" rel="index"><span itemprop="name">DCMTK</span></a></span>

                
                
              
            </span>
          

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          
            <table>
<thead>
<tr>
<th>词语</th>
<th>释义</th>
<th>备注</th>
</tr>
</thead>
<tbody><tr>
<td>DUL</td>
<td>DICOM Upper Layer</td>
<td>在 dcmtk/dcmnet/dul.h 中作为前缀出现</td>
</tr>
<tr>
<td>ASC</td>
<td>Association 缩写</td>
<td>在 dcmtk/dcmnet/assoc.h 中作为前缀出现</td>
</tr>
<tr>
<td>FSM</td>
<td>Finite state machine 的缩写，即有限状态自动机</td>
<td>在 dcmnet/libsrc/dulpriv.h 中出现</td>
</tr>
<tr>
<td>OF</td>
<td>OFFIS 取前两个字母</td>
<td>毕竟是 <a href="http://www.offis.de/" target="_blank" rel="noopener">OFFIS</a> 公司出品的</td>
</tr>
</tbody></table>

          
        
      
    </div>

    
    
    
      <footer class="post-footer">
          <div class="post-eof"></div>
        
      </footer>
  </div>
  
  
  
  </article>

    
      

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/08/30/Qt-iconfont-to-QIcon/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="ZHL">
      <meta itemprop="description" content="我的博客">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ZHL的博客">
    </span>
      <header class="post-header">

        
          <h1 class="post-title" itemprop="name headline">
              
              <a href="/2019/08/30/Qt-iconfont-to-QIcon/" class="post-title-link" itemprop="url">Qt iconfont to QIcon</a>
            
          </h1>
        

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              
                
              

              <time title="创建时间：2019-08-30 08:37:28" itemprop="dateCreated datePublished" datetime="2019-08-30T08:37:28+08:00">2019-08-30</time>
            </span>
          
            

            
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2019-10-09 21:28:17" itemprop="dateModified" datetime="2019-10-09T21:28:17+08:00">2019-10-09</time>
              </span>
            
          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Qt/" itemprop="url" rel="index"><span itemprop="name">Qt</span></a></span>

                
                
              
            </span>
          

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          
            <h1 id="普通使用"><a href="#普通使用" class="headerlink" title="普通使用"></a>普通使用</h1><p>使用 <code>iconfont</code> 极大简化了开发中需要使用图标的问题，一般来说使用 <code>iconfont</code> 都是将其作为字符来使用，比如在一个 <code>QLabel</code> 中：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 其中 ICONFONT_PATH 为字体库文件目录。如“*/theme/iconfont.ttf”。</span></span><br><span class="line"><span class="keyword">int</span> fontId = QFontDatabase::addApplicationFont(ICONFONT_PATH);</span><br><span class="line">QFont iconfont;</span><br><span class="line">iconfont.setFamily(QFontDatabase::applicationFontFamilies(fontId).at(<span class="number">0</span>));</span><br><span class="line"><span class="comment">// 设置字体大小</span></span><br><span class="line">iconfont.setPixelSize(<span class="number">16</span>);</span><br><span class="line">QLabel label;</span><br><span class="line">label.setFont(iconfont);</span><br><span class="line"><span class="comment">// 其中 icon_id 是一个 iconfont 的 Unicode 编码，一般在下载下来的字体库介绍中有。</span></span><br><span class="line"><span class="comment">// 形式如下：0x6501，即使用 16 进制。</span></span><br><span class="line">setText(QChar(icon_id));</span><br></pre></td></tr></table></figure>

<h1 id="使用到-QIcon-中"><a href="#使用到-QIcon-中" class="headerlink" title="使用到 QIcon 中"></a>使用到 QIcon 中</h1><p>上面这种使用方式已经能满足大部分需求了，但是，有时候需要将 <code>iconfont</code> 使用到 <code>QIcon</code> 中，比如 <code>QToolButton</code> 的 <code>setIcon</code> 只能使用 <code>QIcon</code> 。要将 <code>iconfont</code> 使用到 <code>QIcon</code> 中，需要借助 <code>QPixmap</code>。一般可以将 <code>iconfont</code> 应用到 <code>Qicon</code> 可以写成一个方法：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 其中 icon_font_id 为字符图标的 ID，w 为要生成的图标的大小，color 为图标颜色。</span></span><br><span class="line">QIcon QIconTool::getIconFromIconFont(<span class="keyword">int</span> icon_font_id, <span class="keyword">int</span> w, QColor color) &#123;</span><br><span class="line">    <span class="comment">// 一般图标为正方形，如果有其他需求，加一个参数，如 h。</span></span><br><span class="line">    <span class="function">QPixmap <span class="title">pixmap</span><span class="params">(w, w)</span></span>;</span><br><span class="line">    pixmap.fill(Qt::transparent);</span><br><span class="line">    QPainter painter;</span><br><span class="line">    painter.begin(&amp;pixmap);</span><br><span class="line">    <span class="comment">// 其中 ICONFONT_PATH 为字体库文件目录。如“*/theme/iconfont.ttf”。</span></span><br><span class="line">    <span class="keyword">int</span> fontId = QFontDatabase::addApplicationFont(ICONFONT_PATH);</span><br><span class="line">    QFont iconfont;</span><br><span class="line">    iconfont.setFamily(QFontDatabase::applicationFontFamilies(fontId).at(<span class="number">0</span>));</span><br><span class="line">    font.setPixelSize(w);</span><br><span class="line">    painter.setFont(font);</span><br><span class="line">    painter.setPen(color);</span><br><span class="line">    painter.drawText(pixmap.rect(), QString(QChar(icon_font_id)));</span><br><span class="line">    painter.end();</span><br><span class="line">    <span class="keyword">return</span> pixmap;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


          
        
      
    </div>

    
    
    
      <footer class="post-footer">
          <div class="post-eof"></div>
        
      </footer>
  </div>
  
  
  
  </article>

    
      

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/08/22/DICOM-汉字编码/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="ZHL">
      <meta itemprop="description" content="我的博客">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ZHL的博客">
    </span>
      <header class="post-header">

        
          <h1 class="post-title" itemprop="name headline">
              
              <a href="/2019/08/22/DICOM-汉字编码/" class="post-title-link" itemprop="url">DICOM 汉字编码</a>
            
          </h1>
        

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              
                
              

              <time title="创建时间：2019-08-22 17:21:08" itemprop="dateCreated datePublished" datetime="2019-08-22T17:21:08+08:00">2019-08-22</time>
            </span>
          
            

            
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2019-10-09 21:28:17" itemprop="dateModified" datetime="2019-10-09T21:28:17+08:00">2019-10-09</time>
              </span>
            
          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/DICOM/" itemprop="url" rel="index"><span itemprop="name">DICOM</span></a></span>

                
                
              
            </span>
          

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          
            <h1 id="DICOM-是可以使用汉字的"><a href="#DICOM-是可以使用汉字的" class="headerlink" title="DICOM 是可以使用汉字的"></a>DICOM 是可以使用汉字的</h1><p>在 DICOM 标准中，Part 5 中 K.3 Example of Long Text Value Representation in the Chinese Language with GB2312 G1 介绍了汉字编码的有关内容，不过使用的是 GB2312，众所周知，GB2312 已经是被淘汰掉了，最新的应该是使用 GB18030，使用 Sante DICOM Editor 软件编辑 DICOM 文件，将 (0008,0005) Specific Character Set 元素改为 <code>GB18030</code>，再将 (0010,0010) Patient’s Name 元素改为中文，最后使用 <code>DCMTK</code> 的 <code>dcmdump</code> 工具验证通过。</p>
<p>还有可以改为 Unicode 编码。</p>
<p>即 (0008,0005) Specific Character Set 元素改为 <code>ISO_IR 192</code>。</p>
<p>在 Part 5 中 6.1 Support of Character Repertoires 有详细说明支持哪些编码。</p>
<h1 id="使用-GB18030-的顾虑"><a href="#使用-GB18030-的顾虑" class="headerlink" title="使用 GB18030 的顾虑"></a>使用 GB18030 的顾虑</h1><p>虽然 GB18030 是国标，但是兼容性最好的应该还是 Unicode 编码。</p>

          
        
      
    </div>

    
    
    
      <footer class="post-footer">
          <div class="post-eof"></div>
        
      </footer>
  </div>
  
  
  
  </article>

    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><a class="page-number" href="/page/4/">4</a><a class="extend next" rel="next" href="/page/3/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>


          </div>
          

        </div>
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      <div class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">

          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image"
      src="/images/avatar.png"
      alt="ZHL">
  <p class="site-author-name" itemprop="name">ZHL</p>
  <div class="site-description motion-element" itemprop="description">我的博客</div>
</div>
  <nav class="site-state motion-element">
      <div class="site-state-item site-state-posts">
        
          <a href="/archives/">
        
          <span class="site-state-item-count">31</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
    
      
      
      <div class="site-state-item site-state-categories">
        
          
            <a href="/categories/">
          
        
        
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
        <span class="site-state-item-count">23</span>
        <span class="site-state-item-name">分类</span>
        </a>
      </div>
    
      
      
      <div class="site-state-item site-state-tags">
        
          
            <a href="/tags/">
          
        
        
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
        <span class="site-state-item-count">48</span>
        <span class="site-state-item-name">标签</span>
        </a>
      </div>
    
  </nav>



        </div>
      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2020</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">ZHL</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io" class="theme-link" rel="noopener" target="_blank">Hexo</a> 强力驱动 v3.9.0</div>
  <span class="post-meta-divider">|</span>
  <div class="theme-info">主题 – <a href="https://theme-next.org" class="theme-link" rel="noopener" target="_blank">NexT.Mist</a> v7.3.0</div>

        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <span class="post-meta-item-icon">
      <i class="fa fa-user"></i>
    </span>
    <span class="site-uv" title="总访客量">
      <span class="busuanzi-value" id="busuanzi_value_site_uv"></span>
    </span>
  
    <span class="post-meta-divider">|</span>
  
    <span class="post-meta-item-icon">
      <i class="fa fa-eye"></i>
    </span>
    <span class="site-pv" title="总访问量">
      <span class="busuanzi-value" id="busuanzi_value_site_pv"></span>
    </span>
  
</div>








        
      </div>
    </footer>
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
      </div>

    

  </div>

  
  <script src="/lib/jquery/index.js?v=3.4.1"></script>
  <script src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  <script src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

<script src="/js/utils.js?v=7.3.0"></script>
  <script src="/js/motion.js?v=7.3.0"></script>


  <script src="/js/schemes/muse.js?v=7.3.0"></script>



<script src="/js/next-boot.js?v=7.3.0"></script>




  





























  

  

  


  
    

</body>
</html>
